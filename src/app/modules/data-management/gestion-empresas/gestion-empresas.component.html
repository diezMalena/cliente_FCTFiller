<!-- Títulos de las secciones -->
<div class="row">
  <div class="page-header d-flex justify-content-between pb-3">
    <h1 class="h2">Gestión de empresas</h1>
    <button type="button" class="btn btn-outline-default mr-2" placement="left"
      ngbTooltip="Haga clic para acceder a la ayuda de esta sección" (click)="abrirAyuda()">?</button>
  </div>
</div>

<!-- Contenido de las secciones -->
<div class="card p-3">
  <div class="row">
    <!-- Botones -->
    <div class="d-flex align-items-center py-2 justify-content-end">
      <a href="data-management/registro-empresa" aria-label="Registrar empresa"
        class="btn btn-outline-primary float-end" placement="left" ngbTooltip="Registrar empresa">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
          class="bi bi-plus-square-fill" viewBox="0 0 16 16">
          <path
            d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z">
          </path>
        </svg>
      </a>
    </div>
  </div>
  <!-- Tabla -->
  <div class="p-2 table-responsive">
    <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-hover">
      <thead class="table-primary text-white">
        <tr>
          <th scope="col">CIF</th>
          <th scope="col">Nombre</th>
          <th scope="col">Localidad</th>
          <th scope="col" class="nosort">Acciones</th>
          <th scope="col" class="nosort">Convenio</th>
          <th scope="col" class="nosort">Anexo</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let empresa of empresas">
          <!-- #region Datos -->
          <td scope="col" class="align-middle cursor-pointer" attr.aria-label="Ver en detalle {{empresa.nombre}}"
            (click)="mostrarEmpresa(empresa, false)">{{empresa.cif}}</td>
          <td scope="col" class="align-middle cursor-pointer" attr.aria-label="Ver en detalle {{empresa.nombre}}"
            (click)="mostrarEmpresa(empresa, false)">{{empresa.nombre}}</td>
          <td scope="col" class="align-middle cursor-pointer" attr.aria-label="Ver en detalle {{empresa.nombre}}"
            (click)="mostrarEmpresa(empresa, false)">{{empresa.localidad}}</td>
          <!-- #endregion -->
          <!-- Acciones sobre la empresa -->
          <td scope="col" class="align-middle">
            <button class="btn btn-outline-warning p-2 py-1 m-1" (click)="mostrarEmpresa(empresa, true)"
              placement="left" ngbTooltip="Editar empresa" attr.aria-label="Editar {{empresa.nombre}}">
              <svg class="bi" width="16" height="16">
                <use xlink:href="#lapiz" />
              </svg>
            </button>
            <button class="btn btn-outline-danger px-2 py-1 m-1" (click)="deleteEmpresa(empresa)" placement="left"
              ngbTooltip="Eliminar empresa" attr.aria-label="Eliminar {{empresa.nombre}}">
              <svg class="bi" width="16" height="16">
                <use xlink:href="#papelera" />
              </svg>
            </button>
          </td>
          <!-- Acciones sobre el convenio -->
          <td scope="col" class="align-middle">
            <button *ngIf="!empresa.convenio" class="btn btn-outline-success p-2 py-1 m-1"
              ngbTooltip="Dar de alta convenio" attr.aria-label="Dar de alta convenio con {{empresa.nombre}}"
              placement="left">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-lg"
                viewBox="0 0 16 16">
                <path
                  d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z" />
              </svg>
            </button>
            <button *ngIf="empresa.convenio" class="btn btn-outline-secondary p-2 py-1 m-1" ngbTooltip="Renovar convenio"
              attr.aria-label="Renovar convenio con {{empresa.nombre}}" placement="left">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                class="bi bi-arrow-repeat" viewBox="0 0 16 16">
                <path
                  d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z" />
                <path fill-rule="evenodd"
                  d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z" />
              </svg>
            </button>
            <button *ngIf="empresa.convenio" class="btn btn-outline-primary p-2 py-1 m-1" ngbTooltip="Ver convenio en detalle"
              attr.aria-label="Ver convenio con {{empresa.nombre}}" placement="left">
              <svg class="bi" width="16" height="16">
                <use xlink:href="#A0" />
              </svg>
            </button>
            <button *ngIf="empresa.convenio" class="btn btn-outline-danger p-2 py-1 m-1" ngbTooltip="Dar de baja convenio"
              attr.aria-label="Dar de baja convenio con {{empresa.nombre}}" placement="left">
              <svg class="bi" width="16" height="16">
                <use xlink:href="#A0" />
              </svg>
            </button>
          </td>
          <!-- Acciones sobre el anexo -->
          <td scope="col" class="align-middle">
            <button class="btn btn-outline-primary p-2 py-1 m-1" ngbTooltip="Subir anexo"
              attr.aria-label="Subir anexo de convenio con {{empresa.nombre}}" placement="left">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-upload"
                viewBox="0 0 16 16">
                <path
                  d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z" />
                <path
                  d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z" />
              </svg>
            </button>
            <button class="btn btn-outline-primary p-2 py-1 m-1" ngbTooltip="Descargar anexo"
              attr.aria-label="Descargar anexo de convenio con {{empresa.nombre}}" placement="left">
              <svg class="bi " width="16 " height="16 ">
                <use xlink:href="#descarga" />
              </svg>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
