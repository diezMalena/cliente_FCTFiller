<!-- Títulos de las secciones -->
<div class="row">
  <div class="page-header d-flex justify-content-between pb-3">
    <h1 class="h2">Gestión de gastos de {{this.curso}}</h1>
    <button type="button" class="btn btn-outline-default mr-2" placement="left"
      ngbTooltip="Haga clic para acceder a la ayuda de esta sección" (click)="abrirAyuda()">?</button>
  </div>
</div>

<!-- Contenido de las secciones -->
<div class="card p-3">
  <div class="row">
    <div class="col-md-6">
        <button class="btn btn-outline-primary dropdown-toggle me-2" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
          <svg width="16" height="16" class="bi me-1">
            <use xlink:href="#nuevo" />
          </svg> Añadir alumno
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
          <li (click)="registrarAlumno(alumno)" role="button" class="dropdown-item" *ngFor="let alumno of this.gastoProfesor?.alumnosSinGasto">
            {{ alumno.nombre + ' ' + alumno.apellidos }}
          </li>
        </ul>

      <button class="btn btn-outline-primary">Generar Anexo VI</button>
    </div>
    <div class="col-md-6 d-flex align-items-center py-2 justify-content-end">
      <span>Total gastos grupo: <strong>{{this.gastoProfesor?.gastoTotalGrupo}}</strong> €</span>
    </div>
  </div>
  <!-- Tabla -->
  <div class="row">
    <div class="col-12 p-2 table-responsive">
      <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-hover">
        <thead class="table-primary text-white">
          <tr>
            <th>Nombre del alumno</th>
            <th>Desplazamiento</th>
            <th>&Sigma; Gastos de transporte</th>
            <th>&Sigma; Otros gastos</th>
            <th>Total gastos</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let gastoAlumno of this.gastoProfesor?.gastos">
            <!-- #region Datos -->
            <td class="align-middle" attr.aria-label="Ver en detalle a {{gastoAlumno.nombre_alumno}}">
              {{gastoAlumno.nombre_alumno}}
            </td>
            <td class="align-middle" attr.aria-label="Ver en detalle a {{gastoAlumno.nombre_alumno}}">
              {{gastoAlumno.tipo_desplazamiento}}
            </td>
            <td class="align-middle" attr.aria-label="Ver en detalle a {{gastoAlumno.nombre_alumno}}">
              {{(gastoAlumno!.sumatorio_gasto_transporte_publico!
              + gastoAlumno!.sumatorio_gasto_vehiculo_privado!)}} €
              <button class="btn btn-outline-success ms-5 me-2"
                (click)="this.nuevoTicketTransporte(gastoAlumno.dni_alumno!)">
                <svg width="16" height="16" class="bi">
                  <use xlink:href="#nuevo" />
                </svg>
              </button>
            </td>
            <td class="align-middle" attr.aria-label="Ver en detalle a {{gastoAlumno.nombre_alumno}}">
              {{(gastoAlumno!.sumatorio_gasto_manutencion)}} €
              <button class="btn btn-outline-success ms-5 me-2"
                (click)="this.nuevoTicketManutencion(gastoAlumno.dni_alumno!)">
                <svg width="16" height="16" class="bi">
                  <use xlink:href="#nuevo" />
                </svg>
              </button>
            </td>
            <td class="align-middle" attr.aria-label="Ver en detalle a {{gastoAlumno.nombre_alumno}}">
              {{gastoAlumno.total_gastos}} €
            </td>
            <!-- #endregion -->
            <!-- Acciones -->
            <td class="text-center">
              <button class="btn btn-outline-warning px-2 py-1 mx-3"
                (click)="mostrarGastoAlumno(gastoAlumno.dni_alumno!)" placement="left" ngbTooltip="Editar alumno"
                attr.aria-label="Editar a {{gastoAlumno.nombre_alumno}}">
                <svg class="bi" width="16" height="16">
                  <use xlink:href="#lapiz" />
                </svg>
              </button>
              <button class="btn btn-outline-danger px-2 py-1 mx-3" (click)="borrarGastoAlumno(gastoAlumno.dni_alumno!)"
                placement="left" ngbTooltip="Eliminar alumno"
                attr.aria-label="Eliminar a {{gastoAlumno.nombre_alumno}}">
                <svg class="bi" width="16" height="16">
                  <use xlink:href="#papelera" />
                </svg>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
