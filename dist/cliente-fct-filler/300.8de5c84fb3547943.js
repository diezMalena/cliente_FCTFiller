(self.webpackChunkcliente_fct_filler=self.webpackChunkcliente_fct_filler||[]).push([[300],{8300:(z,Q,Z)=>{"use strict";Z.r(Q),Z.d(Q,{DataManagementModule:()=>Yo});var b=Z(9808),A=Z(3673),E=Z(5861),w=Z(3737),I=Z(4327),e=Z(5e3),g=Z(520);let j=(()=>{class o{constructor(t){this.http=t,this.ruta="http://localhost:8000/api/"}solicitarAlumnos(t){return this.http.get(this.ruta+"solicitarAlumnosSinEmpresa/"+t)}solicitarEmpresas(t){return this.http.get(this.ruta+"solicitarEmpresasConAlumnos/"+t)}solicitarNombreCiclo(t){return this.http.get(this.ruta+"solicitarNombreCiclo/"+t)}asignarAlumnos(t){let r=this.ruta+"actualizarEmpresaAsignadaAlumno",n=new g.WM({"Content-Type":"application/json"});return this.http.post(r,t,{headers:n})}generarAnexo(t){return this.http.post(this.ruta+"relleno",{dni_tutor:t},{responseType:"arraybuffer"})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var M=Z(2290),m=Z(7769),_=Z(634);let U=(()=>{class o{constructor(t,r){this.dialogRef=t,this.data=r}ngOnInit(){}close(t){this.dialogRef.close({respuesta:t})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(_.so),e.Y36(_.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-confirm-dialog"]],decls:11,vars:2,consts:[[1,"h5"],[1,"d-flex","justify-content-end"],[1,"btn","btn-outline-primary","px-4",3,"click"],[1,"btn","btn-outline-default","px-4","ms-2",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"h1",0),e._uU(2),e.qZA(),e.TgZ(3,"div"),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"button",2),e.NdJ("click",function(){return r.close(!0)}),e._uU(8,"S\xed"),e.qZA(),e.TgZ(9,"button",3),e.NdJ("click",function(){return r.close(!1)}),e._uU(10,"No"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",r.data.title," "),e.xp6(3),e.hij(" ",r.data.message," "))},styles:[""]}),o})(),v=(()=>{class o{constructor(t){this.dialog=t}confirmacion(t,r){var n=this;return(0,E.Z)(function*(){let a=n.dialog.open(U,{data:{title:t,message:r},width:"400px"});return new Promise((s,d)=>{a.afterClosed().subscribe(c=>{s(c.respuesta)})}).then(s=>s).catch(s=>{})})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.uw))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var f=Z(9767),l=Z(2382);function O(o,i){if(1&o&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.uIk("id",t.dni),e.xp6(1),e.hij(" ",t.nombre," ")}}function Y(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"span",28),e._uU(2),e.qZA(),e.TgZ(3,"input",29),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.horario=n}),e.qZA(),e.TgZ(4,"input",30),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.fecha_ini=n}),e.qZA(),e.TgZ(5,"input",31),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.fecha_fin=n}),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.uIk("id",t.dni),e.xp6(2),e.Oqu(t.nombre),e.xp6(1),e.Q6J("ngModel",t.horario),e.xp6(1),e.Q6J("ngModel",t.fecha_ini),e.xp6(1),e.Q6J("ngModel",t.fecha_fin)}}function B(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"div",15),e.TgZ(2,"label",21),e.TgZ(3,"h3",22),e._uU(4),e.qZA(),e.TgZ(5,"span",23),e._uU(6,"Responsable de la empresa:"),e.qZA(),e.TgZ(7,"input",24),e.NdJ("ngModelChange",function(n){return e.CHM(t).$implicit.nombre_responsable=n}),e.qZA(),e.qZA(),e.TgZ(8,"div",0),e.TgZ(9,"div",8),e.TgZ(10,"div",25),e.NdJ("cdkDropListDropped",function(n){return e.CHM(t),e.oxw().drop(n)}),e.YNc(11,Y,6,5,"div",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.uIk("id",t.id),e.xp6(2),e.MGl("for","responsable",t.dni_responsable,""),e.xp6(2),e.Oqu(t.nombre),e.xp6(3),e.MGl("id","responsable",t.dni_responsable,""),e.Q6J("ngModel",t.nombre_responsable),e.xp6(3),e.Q6J("cdkDropListData",t.alumnos),e.xp6(1),e.Q6J("ngForOf",t.alumnos)}}let R=(()=>{class o{constructor(t,r,n,a,s){var d;this.alumnosEmpresas=t,this.router=r,this.toastr=n,this.storageUser=a,this.dialogService=s,this.alumnos=[],this.empresas=[],this.respuesta=[],this.nombreCiclo="",this.usuario=a.getUser(),this.dniTutor=null===(d=this.usuario)||void 0===d?void 0:d.dni}ngOnInit(){this.getNombreCiclo(),this.getAlumnos(),this.getEmpresas()}drop(t){t.previousContainer===t.container?(0,w.bA)(t.container.data,t.previousIndex,t.currentIndex):(0,w.EA)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)}getAlumnos(){this.alumnosEmpresas.solicitarAlumnos(this.dniTutor).subscribe(t=>{this.alumnos=t})}getEmpresas(){this.alumnosEmpresas.solicitarEmpresas(this.dniTutor).subscribe(t=>{this.empresas=t})}getNombreCiclo(){this.alumnosEmpresas.solicitarNombreCiclo(this.dniTutor).subscribe({next:t=>{this.nombreCiclo=t}})}setCambiosEmpresas(){var t=this;return(0,E.Z)(function*(){if(yield t.dialogService.confirmacion("Generar y Descargar","\xbfEst\xe1 seguro de que desea generar y descargar el anexo?")){var n=!0,a=!0,s="";t.empresas.forEach(c=>{var p;c.nombre_responsable&&n?null===(p=c.alumnos)||void 0===p||p.forEach(u=>{u.fecha_fin&&u.fecha_ini&&u.horario&&a||(n=!1),(u.fecha_ini>=u.fecha_fin||!n&&a)&&(a=!1,s+=`${u.nombre} tiene la fecha de inicio mayor que la fecha de fin.\n`)}):n=!1}),n&&a?(t.alumnosEmpresas.asignarAlumnos({empresas:t.empresas,alumnos_solos:t.alumnos,dni_tutor:t.dniTutor}).subscribe(),t.toastr.success("Cambios realizados con exito.","Guardado"),t.GenerarAnexos()):n||t.toastr.error("No pueden haber campos vac\xedos, o las fechas son incorrectas","Rellena campos"),""!=s&&t.toastr.error(s,"Fechas incorrectas")}else t.toastr.info("Has decidido no generar y descargar el Anexo","Generacion y Descarga")})()}GenerarAnexos(){this.alumnosEmpresas.generarAnexo(this.dniTutor).subscribe({next:t=>{const r=new Date,n=new Blob([t],{type:"application/octet-stream"});I.saveAs(n,"backup_"+r.getTime()+".zip"),this.toastr.success("Anexo Generado","T\xedtulo")},error:t=>{console.log(t),this.toastr.error("El anexo no ha podido generarse","Generado")}}),this.router.navigate(["/data-management/asig-alum-empresa"])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j),e.Y36(A.F0),e.Y36(M._W),e.Y36(m.L),e.Y36(v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-asociar-emp-alu"]],decls:30,vars:4,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-default","mr-2"],["cdkDropListGroup","",1,"card","p-3"],[1,"col-sm-12"],[1,"row","bg-white","p-2","rounded","border-white"],[1,"col-md-4","col-sm-6","mt-1"],[1,"col-12"],[1,"h4"],[1,"col-sm-9"],[1,"card"],["cdkDropList","",1,"card-body","ps-3",3,"cdkDropListData","cdkDropListDropped"],["ngClass","alumnos h6 text-black bg-secondary rounded border-secondary row p-1 mb-2","cdkDrag","",4,"ngFor","ngForOf"],[1,"col-md-8","col-sm-6","mt-1"],[1,"col"],["ngClass","row mb-2 bg-primary p-2 border border-primary rounded text-white",4,"ngFor","ngForOf"],[1,"col-sm-12","mt-1","text-center"],["type","button","value","Guardar y Generar Word",1,"btn","btn-outline-primary","m-1",3,"click"],["ngClass","alumnos h6 text-black bg-secondary rounded border-secondary row p-1 mb-2","cdkDrag",""],["ngClass","row mb-2 bg-primary p-2 border border-primary rounded text-white"],[1,"row",3,"for"],[1,"col-4","h5"],["for","responsableEmpresa",1,"col-4","text-end"],["aria-label","responsable de la empresa","type","text",1,"col-4",3,"id","ngModel","ngModelChange"],["cdkDropList","",1,"py-3",3,"cdkDropListData","cdkDropListDropped"],["ngClass","alumnos text-white bg-secondary rounded border-secondary row p-1 mb-2","cdkDrag","",4,"ngFor","ngForOf"],["ngClass","alumnos text-white bg-secondary rounded border-secondary row p-1 mb-2","cdkDrag",""],[1,"h6","text-black","col-12","col-md-3"],["aria-label","horario del alumno","placeholder","Horario","type","text",1,"col-12","col-md-3",3,"ngModel","ngModelChange"],["aria-label","fecha de inicio de pr\xe1cticas","type","date",1,"col-12","col-md-3",3,"ngModel","ngModelChange"],["aria-label","fecha de fin de pr\xe1cticas","type","date",1,"col-12","col-md-3",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",0),e.TgZ(8,"div",5),e.TgZ(9,"div",6),e.TgZ(10,"div",7),e.TgZ(11,"div",0),e.TgZ(12,"div",8),e.TgZ(13,"h2",9),e._uU(14,"Alumnos"),e.qZA(),e.TgZ(15,"div",0),e.TgZ(16,"div",10),e.TgZ(17,"div",11),e.TgZ(18,"div",12),e.NdJ("cdkDropListDropped",function(a){return r.drop(a)}),e.YNc(19,O,2,2,"div",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",14),e.TgZ(21,"div",0),e.TgZ(22,"div",8),e.TgZ(23,"h2",9),e._uU(24,"Empresas"),e.qZA(),e.TgZ(25,"div",0),e.TgZ(26,"div",15),e.YNc(27,B,12,7,"div",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",17),e.TgZ(29,"input",18),e.NdJ("click",function(){return r.setCambiosEmpresas()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij("Asignaci\xf3n de alumnos de ",r.nombreCiclo," "),e.xp6(15),e.Q6J("cdkDropListData",r.alumnos),e.xp6(1),e.Q6J("ngForOf",r.alumnos),e.xp6(8),e.Q6J("ngForOf",r.empresas))},directives:[f._L,w.Fd,w.Wj,b.sg,b.mk,w.Zt,l.Fj,l.JJ,l.On],styles:[".alumnos[_ngcontent-%COMP%]{cursor:move}"]}),o})();class N{constructor(i,t,r,n,a,s,d,c,p,u,T,q,y){this.id=i,this.cif=t,this.nombre=r,this.email=n,this.telefono=a,this.localidad=s,this.provincia=d,this.direccion=c,this.cp=p,this.representante=u,this.nombre_responsable=T,this.dni_responsable=q,this.alumnos=y}static empresaJSON(i){return new N(i.id,i.cif,i.nombre,i.email,i.telefono,i.localidad,i.provincia,i.direccion,i.cp,i.representante,i.nombre_responsable,i.dni_responsable,i.alumnos)}}class H{constructor(i,t,r,n,a){this.dni=i,this.email=t,this.nombre=r,this.apellidos=n,this.id_empresa=a}static trabajadorJSON(i){return new H(i.dni,i.email,i.nombre,i.apellidos,i.id_empresa)}}var L=Z(4004);let te=(()=>{class o{constructor(t){this.http=t,this.empresaTrigger=new e.vpe,this.URLAPI="http://127.0.0.1:8000/api/"}getEmpresas(t){return this.http.get(this.URLAPI+"solicitar_empresas/profesor="+t).pipe((0,L.U)(n=>n.map(a=>N.empresaJSON(a))))}getRepresentante(t){return this.http.get(this.URLAPI+"solicitar_representante/id="+t).pipe((0,L.U)(n=>H.trabajadorJSON(n)))}updateEmpresa(t){const r=this.URLAPI+"update_empresa",n=new g.WM({"Content-Type":"application/json"});return this.http.put(r,JSON.stringify(t),{headers:n})}updateRepresentante(t){const r=this.URLAPI+"update_representante",n=new g.WM({"Content-Type":"application/json"});return this.http.put(r,JSON.stringify(t),{headers:n})}deleteEmpresa(t){const r=this.URLAPI+"delete_empresa/id="+t,n=new g.WM({"Content-Type":"application/json"});return this.http.delete(r,{headers:n})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function le(o,i){if(1&o&&(e.TgZ(0,"div",7),e.TgZ(1,"h2",8),e._uU(2,"Datos del representante legal"),e.qZA(),e.TgZ(3,"div",9),e.TgZ(4,"label",31),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",32),e.TgZ(7,"div",12),e._uU(8," Es obligatorio insertar un nombre "),e.qZA(),e.qZA(),e.TgZ(9,"div",13),e.TgZ(10,"label",33),e._uU(11,"Apellidos"),e.qZA(),e._UZ(12,"input",34),e.TgZ(13,"div",12),e._uU(14," Es obligatorio insertar apellidos "),e.qZA(),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"label",35),e._uU(17,"DNI"),e.qZA(),e._UZ(18,"input",36),e.TgZ(19,"div",12),e._uU(20," Es obligatorio insertar un DNI v\xe1lido "),e.qZA(),e.qZA(),e.TgZ(21,"div",13),e.TgZ(22,"label",37),e._uU(23,"e-mail"),e.qZA(),e._UZ(24,"input",38),e.TgZ(25,"div",12),e._uU(26," Es obligatorio insertar un email v\xe1lido "),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null)}}function de(o,i){if(1&o&&(e.ynx(0),e._UZ(1,"hr",20),e.TgZ(2,"div",39),e._UZ(3,"input",40),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("disabled",!t.modified||null)}}function ce(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h1",3),e._uU(3),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"form",6),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(7,"div",7),e.TgZ(8,"h2",8),e._uU(9,"Datos de la empresa"),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12,"CIF"),e.qZA(),e._UZ(13,"input",11),e.TgZ(14,"div",12),e._uU(15," Es obligatorio insertar un CIF v\xe1lido "),e.qZA(),e.qZA(),e.TgZ(16,"div",13),e.TgZ(17,"label",14),e._uU(18,"Nombre"),e.qZA(),e._UZ(19,"input",15),e.TgZ(20,"div",12),e._uU(21," Es obligatorio insertar un nombre "),e.qZA(),e.qZA(),e.TgZ(22,"div",9),e.TgZ(23,"label",16),e._uU(24,"Tel\xe9fono"),e.qZA(),e._UZ(25,"input",17),e.TgZ(26,"div",12),e._uU(27," Es obligatorio insertar un tel\xe9fono "),e.qZA(),e.qZA(),e.TgZ(28,"div",13),e.TgZ(29,"label",18),e._uU(30,"e-mail"),e.qZA(),e._UZ(31,"input",19),e.TgZ(32,"div",12),e._uU(33," Es obligatorio insertar un email v\xe1lido "),e.qZA(),e.qZA(),e.qZA(),e._UZ(34,"hr",20),e.TgZ(35,"div",7),e.TgZ(36,"h2",8),e._uU(37,"Domicilio de la empresa"),e.qZA(),e.TgZ(38,"div",9),e.TgZ(39,"label",21),e._uU(40,"Provincia"),e.qZA(),e._UZ(41,"input",22),e.TgZ(42,"div",12),e._uU(43," Es obligatorio insertar una provincia "),e.qZA(),e.qZA(),e.TgZ(44,"div",13),e.TgZ(45,"label",23),e._uU(46,"Localidad"),e.qZA(),e._UZ(47,"input",24),e.TgZ(48,"div",12),e._uU(49," Es obligatorio insertar una localidad "),e.qZA(),e.qZA(),e.TgZ(50,"div",9),e.TgZ(51,"label",25),e._uU(52,"CP"),e.qZA(),e._UZ(53,"input",26),e.TgZ(54,"div",12),e._uU(55," Es obligatorio insertar un c\xf3digo postal "),e.qZA(),e.qZA(),e.TgZ(56,"div",13),e.TgZ(57,"label",27),e._uU(58,"Direcci\xf3n"),e.qZA(),e._UZ(59,"input",28),e.TgZ(60,"div",12),e._uU(61," Es obligatorio insertar una direcci\xf3n "),e.qZA(),e.qZA(),e.qZA(),e._UZ(62,"hr",20),e.YNc(63,le,27,15,"div",29),e.YNc(64,de,4,1,"ng-container",30),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.hij("Detalles de ",t.empresa.nombre," "),e.xp6(3),e.Q6J("formGroup",t.datosEmpresa),e.xp6(7),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(10),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.s9C("value",t.empresa.direccion),e.uIk("readonly",!t.editar||null),e.xp6(4),e.Q6J("ngIf",t.empresa.representante),e.xp6(1),e.Q6J("ngIf",t.editar)}}let pe=(()=>{class o{constructor(t,r,n){this.modalActive=t,this.crudEmpresasService=r,this.formBuilder=n,this.submitted=!1,this.modified=!1,this.datosEmpresa=this.formBuilder.group({}),this.crudEmpresasService.empresaTrigger.subscribe({next:a=>{this.empresa=a[0],this.editar=a[1],this.construirFormulario()}})}ngOnInit(){this.onChanges()}get formulario(){return this.datosEmpresa.controls}construirFormulario(){var t,r,n,a,s,d,c,p,u,T,q,y,C,J,k,x;this.datosEmpresa=this.formBuilder.group({cif:[null===(t=this.empresa)||void 0===t?void 0:t.cif,[l.kI.required,l.kI.minLength(9),l.kI.maxLength(9)]],nombre_empresa:[null===(r=this.empresa)||void 0===r?void 0:r.nombre,[l.kI.required]],telefono:[null===(n=this.empresa)||void 0===n?void 0:n.telefono,[l.kI.required]],email_empresa:[null===(a=this.empresa)||void 0===a?void 0:a.email,[l.kI.required,l.kI.email]],provincia:[null===(s=this.empresa)||void 0===s?void 0:s.provincia,[l.kI.required]],localidad:[null===(d=this.empresa)||void 0===d?void 0:d.localidad,[l.kI.required]],cp:[null===(c=this.empresa)||void 0===c?void 0:c.cp,[l.kI.required,l.kI.minLength(5),l.kI.maxLength(5)]],direccion:[null===(p=this.empresa)||void 0===p?void 0:p.direccion,[l.kI.required]],nombre_representante:[null===(T=null===(u=this.empresa)||void 0===u?void 0:u.representante)||void 0===T?void 0:T.nombre,[l.kI.required]],apellidos:[null===(y=null===(q=this.empresa)||void 0===q?void 0:q.representante)||void 0===y?void 0:y.apellidos,[l.kI.required]],dni:[null===(J=null===(C=this.empresa)||void 0===C?void 0:C.representante)||void 0===J?void 0:J.dni,[l.kI.required,l.kI.minLength(9),l.kI.maxLength(9)]],email_representante:[null===(x=null===(k=this.empresa)||void 0===k?void 0:k.representante)||void 0===x?void 0:x.email,[l.kI.required]]})}onChanges(){this.datosEmpresa.valueChanges.subscribe(t=>{this.modified||(this.modified=!0,console.log("Modificado"))})}onSubmit(){var t,r;let n=this.datosEmpresa.value,a=new H(n.dni,n.email_representante,n.nombre_representante,n.apellidos,null===(t=this.empresa)||void 0===t?void 0:t.id),s=new N(null===(r=this.empresa)||void 0===r?void 0:r.id,n.cif,n.nombre_empresa,n.email_empresa,n.telefono,n.localidad,n.provincia,n.direccion,n.cp,a);this.datosEmpresa.invalid||(this.modified=!1,this.updateEmpresa(s),this.updateRepresentante(a),console.log("Validado"))}updateEmpresa(t){this.crudEmpresasService.updateEmpresa(t).subscribe({next:r=>{this.empresa=t,console.log(r.message),this.updateRepresentante(t.representante)}})}updateRepresentante(t){this.crudEmpresasService.updateRepresentante(t).subscribe({next:r=>{this.empresa.representante=t,console.log(r.message)}})}closeModal(){this.modified?console.log("No puedes salir"):this.modalActive.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.Kz),e.Y36(te),e.Y36(l.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-empresa"]],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"modal-header"],[1,"modal-title","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"fs-5"],[1,"col-md-4"],["for","cif",1,"form-label","fw-bold"],["type","text","id","cif","placeholder","00000000X","formControlName","cif"],[1,"invalid-feedback"],[1,"col-md-8"],["for","nombre_empresa",1,"form-label","fw-bold"],["type","text","id","nombre_empresa","placeholder","Nombre de la empresa","formControlName","nombre_empresa"],["for","telefono",1,"form-label","fw-bold"],["type","text","id","telefono","placeholder","+34666666666","formControlName","telefono"],["for","email_empresa",1,"form-label","fw-bold"],["type","email","id","email_empresa","placeholder","email@contacto.com","formControlName","email_empresa"],[1,"my-3"],["for","provincia",1,"form-label","fw-bold"],["type","text","id","provincia","placeholder","Provincia","formControlName","provincia"],["for","localidad",1,"form-label","fw-bold"],["type","text","id","localidad","placeholder","Localidad de la empresa","formControlName","localidad"],["for","cp",1,"form-label","fw-bold"],["type","text","id","cp","placeholder","00000","formControlName","cp"],["for","direccion",1,"form-label","fw-bold"],["type","text","id","direccion","placeholder","Calle, n\xba, piso, puerta","formControlName","direccion",3,"value"],["class","row g-3",4,"ngIf"],[4,"ngIf"],["for","nombre_representante",1,"form-label","fw-bold"],["type","text","id","nombre_representante","placeholder","Nombre del representante","formControlName","nombre_representante"],["for","apellidos",1,"form-label","fw-bold"],["type","apellidos","id","apellidos","placeholder","Apellidos del representante","formControlName","apellidos"],["for","dni",1,"form-label","fw-bold"],["type","text","id","dni","placeholder","00000000A","formControlName","dni","readonly",""],["for","email_rempresentante",1,"form-label","fw-bold"],["type","text","id","email_representante","placeholder","Nombre del representante","formControlName","email_representante"],[1,"row","d-flex","align-items-center","justify-content-center","modal-footer"],["type","submit","value","Guardar cambios",1,"w-50","btn","btn-primary","btn-md",3,"disabled"]],template:function(t,r){1&t&&e.YNc(0,ce,65,37,"div",0),2&t&&e.Q6J("ngIf",r.empresa)},directives:[b.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],styles:[""]}),o})();function ue(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().mostrarEmpresa(a,!1)}),e._uU(2),e.qZA(),e.TgZ(3,"td",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().mostrarEmpresa(a,!1)}),e._uU(4),e.qZA(),e.TgZ(5,"td",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().mostrarEmpresa(a,!1)}),e._uU(6),e.qZA(),e.TgZ(7,"td",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().mostrarEmpresa(a,!1)}),e._uU(8),e.qZA(),e.TgZ(9,"td",20),e.TgZ(10,"button",21),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().mostrarEmpresa(a,!0)}),e.O4$(),e.TgZ(11,"svg",22),e._UZ(12,"use",23),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(13,"td",20),e.TgZ(14,"button",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().deleteEmpresa(a)}),e.O4$(),e.TgZ(15,"svg",22),e._UZ(16,"use",25),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(1),e.Q2q("aria-label","Ver en detalle ",t.nombre,""),e.xp6(1),e.Oqu(t.cif),e.xp6(1),e.Q2q("aria-label","Ver en detalle ",t.nombre,""),e.xp6(1),e.Oqu(t.nombre),e.xp6(1),e.Q2q("aria-label","Ver en detalle ",t.nombre,""),e.xp6(1),e.Oqu(t.email),e.xp6(1),e.Q2q("aria-label","Ver en detalle ",t.nombre,""),e.xp6(1),e.Oqu(t.localidad),e.xp6(2),e.Q2q("aria-label","Editar ",t.nombre,""),e.xp6(4),e.Q2q("aria-label","Eliminar ",t.nombre,"")}}let me=(()=>{class o{constructor(t,r,n,a){var s;this.crudEmpresasService=t,this.modal=r,this.storageUser=n,this.dialogService=a,this.empresas=[],this.usuario=n.getUser(),this.dniTutor=null===(s=this.usuario)||void 0===s?void 0:s.dni}ngOnInit(){this.getEmpresas()}getEmpresas(){this.crudEmpresasService.getEmpresas(this.dniTutor).subscribe({next:t=>{this.empresas=t,this.empresas.forEach(r=>{this.crudEmpresasService.getRepresentante(r.id).subscribe({next:n=>{r.representante=n}})})}})}mostrarEmpresa(t,r){this.modal.open(pe,{size:"md",backdrop:"static",keyboard:!1}),this.crudEmpresasService.empresaTrigger.emit([t,r])}deleteEmpresa(t){var r=this;return(0,E.Z)(function*(){(yield r.dialogService.confirmacion("Eliminar registro",`\xbfEst\xe1 seguro de que quiere eliminar el registro de la empresa ${t.nombre}?`))&&r.crudEmpresasService.deleteEmpresa(t.id).subscribe({next:a=>{r.getEmpresas(),console.log(a.message)}})})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(te),e.Y36(f.FF),e.Y36(m.L),e.Y36(v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-gestion-empresas"]],decls:34,vars:1,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-secondary","mr-2"],[1,"card","p-3"],[1,"d-flex","align-items-center","py-2","justify-content-between"],[1,"input-group","w-50","me-auto","px-0"],["id","buscar-empresa",1,"input-group-text"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-search"],["d","M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"],["type","text","placeholder","Buscar empresa","aria-label","Buscar empresa","aria-describedby","buscar-empresa",1,"form-control"],["href","data-management/registro-empresa/representante","aria-label","Registrar empresa","placement","left","ngbTooltip","Registrar empresa",1,"btn","btn-outline-primary"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus-square-fill"],["d","M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z"],[1,"col-12","p-2","table-responsive"],[1,"table","table-striped","table-hover"],[1,"table-primary","text-white"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"align-middle","cursor-pointer",3,"click"],[1,"align-middle"],["placement","left","ngbTooltip","Editar empresa",1,"btn","btn-outline-warning","px-2","py-1",3,"click"],["width","16","height","16",1,"bi"],[0,"xlink","href","#lapiz"],["placement","left","ngbTooltip","Eliminar empresa",1,"btn","btn-outline-danger","px-2","py-1",3,"click"],[0,"xlink","href","#papelera"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Gesti\xf3n de empresas"),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",0),e.TgZ(8,"div",5),e.TgZ(9,"div",6),e.TgZ(10,"span",7),e.O4$(),e.TgZ(11,"svg",8),e._UZ(12,"path",9),e.qZA(),e.qZA(),e.kcU(),e._UZ(13,"input",10),e.qZA(),e.TgZ(14,"a",11),e.O4$(),e.TgZ(15,"svg",12),e._UZ(16,"path",13),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(17,"div",0),e.TgZ(18,"div",14),e.TgZ(19,"table",15),e.TgZ(20,"thead",16),e.TgZ(21,"tr"),e.TgZ(22,"th"),e._uU(23,"CIF"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Nombre"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"e-mail contacto"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Localidad"),e.qZA(),e.TgZ(30,"th",17),e._uU(31,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"tbody"),e.YNc(33,ue,17,10,"tr",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(33),e.Q6J("ngForOf",r.empresas))},directives:[f._L,b.sg],styles:[""]}),o})();function P(o,i,t){this.x=o,this.y=i,this.time=t||(new Date).getTime()}function W(o,i,t,r){this.startPoint=o,this.control1=i,this.control2=t,this.endPoint=r}function h(o,i){var t=this,r=i||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this._strokeMoveUpdate=this.throttle?function ge(o,i,t){var r,n,a,s=null,d=0;t||(t={});var c=function(){d=!1===t.leading?0:Date.now(),s=null,a=o.apply(r,n),s||(r=n=null)};return function(){var p=Date.now();!d&&!1===t.leading&&(d=p);var u=i-(p-d);return r=this,n=arguments,u<=0||u>i?(s&&(clearTimeout(s),s=null),d=p,a=o.apply(r,n),s||(r=n=null)):!s&&!1!==t.trailing&&(s=setTimeout(c,u)),a}}(h.prototype._strokeUpdate,this.throttle):h.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=o,this._ctx=o.getContext("2d"),this.clear(),this._handleMouseDown=function(n){1===n.which&&(t._mouseButtonDown=!0,t._strokeBegin(n))},this._handleMouseMove=function(n){t._mouseButtonDown&&t._strokeMoveUpdate(n)},this._handleMouseUp=function(n){1===n.which&&t._mouseButtonDown&&(t._mouseButtonDown=!1,t._strokeEnd(n))},this._handleTouchStart=function(n){1===n.targetTouches.length&&t._strokeBegin(n.changedTouches[0])},this._handleTouchMove=function(n){n.preventDefault(),t._strokeMoveUpdate(n.targetTouches[0])},this._handleTouchEnd=function(n){n.target===t._canvas&&(n.preventDefault(),t._strokeEnd(n))},this.on()}P.prototype.velocityFrom=function(o){return this.time!==o.time?this.distanceTo(o)/(this.time-o.time):1},P.prototype.distanceTo=function(o){return Math.sqrt(Math.pow(this.x-o.x,2)+Math.pow(this.y-o.y,2))},P.prototype.equals=function(o){return this.x===o.x&&this.y===o.y&&this.time===o.time},W.prototype.length=function(){for(var i=0,t=void 0,r=void 0,n=0;n<=10;n+=1){var a=n/10,s=this._point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this._point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(n>0){var c=s-t,p=d-r;i+=Math.sqrt(c*c+p*p)}t=s,r=d}return i},W.prototype._point=function(o,i,t,r,n){return i*(1-o)*(1-o)*(1-o)+3*t*(1-o)*(1-o)*o+3*r*(1-o)*o*o+n*o*o*o},h.prototype.clear=function(){var o=this._ctx,i=this._canvas;o.fillStyle=this.backgroundColor,o.clearRect(0,0,i.width,i.height),o.fillRect(0,0,i.width,i.height),this._data=[],this._reset(),this._isEmpty=!0},h.prototype.fromDataURL=function(o){var i=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Image,n=t.ratio||window.devicePixelRatio||1,a=t.width||this._canvas.width/n,s=t.height||this._canvas.height/n;this._reset(),r.src=o,r.onload=function(){i._ctx.drawImage(r,0,0,a,s)},this._isEmpty=!1},h.prototype.toDataURL=function(o){var i;if("image/svg+xml"===o)return this._toSVG();for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return(i=this._canvas).toDataURL.apply(i,[o].concat(r))},h.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},h.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},h.prototype.isEmpty=function(){return this._isEmpty},h.prototype._strokeBegin=function(o){this._data.push([]),this._reset(),this._strokeUpdate(o),"function"==typeof this.onBegin&&this.onBegin(o)},h.prototype._strokeUpdate=function(o){var r=this._createPoint(o.clientX,o.clientY),n=this._data[this._data.length-1],a=n&&n[n.length-1],s=a&&r.distanceTo(a)<this.minDistance;if(!a||!s){var d=this._addPoint(r),c=d.curve,p=d.widths;c&&p&&this._drawCurve(c,p.start,p.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}},h.prototype._strokeEnd=function(o){var t=this.points[0];if(!(this.points.length>2)&&t&&this._drawDot(t),t){var r=this._data[this._data.length-1];t.equals(r[r.length-1])||r.push({x:t.x,y:t.y,time:t.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(o)},h.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},h.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},h.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},h.prototype._createPoint=function(o,i,t){var r=this._canvas.getBoundingClientRect();return new P(o-r.left,i-r.top,t||(new Date).getTime())},h.prototype._addPoint=function(o){var i=this.points,t=void 0;if(i.push(o),i.length>2){3===i.length&&i.unshift(i[0]);var r=(t=this._calculateCurveControlPoints(i[0],i[1],i[2])).c2;t=this._calculateCurveControlPoints(i[1],i[2],i[3]);var a=new W(i[1],r,t.c1,i[2]),s=this._calculateCurveWidths(a);return i.shift(),{curve:a,widths:s}}return{}},h.prototype._calculateCurveControlPoints=function(o,i,t){var r=o.x-i.x,n=o.y-i.y,a=i.x-t.x,s=i.y-t.y,d_x=(o.x+i.x)/2,d_y=(o.y+i.y)/2,c_x=(i.x+t.x)/2,c_y=(i.y+t.y)/2,p=Math.sqrt(r*r+n*n),u=Math.sqrt(a*a+s*s),y=u/(p+u),J=i.x-(c_x+(d_x-c_x)*y),k=i.y-(c_y+(d_y-c_y)*y);return{c1:new P(d_x+J,d_y+k),c2:new P(c_x+J,c_y+k)}},h.prototype._calculateCurveWidths=function(o){var r={start:null,end:null},n=this.velocityFilterWeight*o.endPoint.velocityFrom(o.startPoint)+(1-this.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(n);return r.start=this._lastWidth,r.end=a,this._lastVelocity=n,this._lastWidth=a,r},h.prototype._strokeWidth=function(o){return Math.max(this.maxWidth/(o+1),this.minWidth)},h.prototype._drawPoint=function(o,i,t){var r=this._ctx;r.moveTo(o,i),r.arc(o,i,t,0,2*Math.PI,!1),this._isEmpty=!1},h.prototype._drawCurve=function(o,i,t){var r=this._ctx,n=t-i,a=Math.floor(o.length());r.beginPath();for(var s=0;s<a;s+=1){var d=s/a,c=d*d,p=c*d,u=1-d,T=u*u,q=T*u,y=q*o.startPoint.x;y+=3*T*d*o.control1.x,y+=3*u*c*o.control2.x;var C=q*o.startPoint.y;C+=3*T*d*o.control1.y,C+=3*u*c*o.control2.y,this._drawPoint(y+=p*o.endPoint.x,C+=p*o.endPoint.y,i+p*n)}r.closePath(),r.fill()},h.prototype._drawDot=function(o){var i=this._ctx,t="function"==typeof this.dotSize?this.dotSize():this.dotSize;i.beginPath(),this._drawPoint(o.x,o.y,t),i.closePath(),i.fill()},h.prototype._fromData=function(o,i,t){for(var r=0;r<o.length;r+=1){var n=o[r];if(n.length>1)for(var a=0;a<n.length;a+=1){var s=n[a],d=new P(s.x,s.y,s.time),c=s.color;if(0===a)this.penColor=c,this._reset(),this._addPoint(d);else if(a!==n.length-1){var p=this._addPoint(d),u=p.curve,T=p.widths;u&&T&&i(u,T,c)}}else this._reset(),t(n[0])}},h.prototype._toSVG=function(){var o=this,i=this._data,t=this._canvas,r=Math.max(window.devicePixelRatio||1,1),s=t.width/r,d=t.height/r,c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS(null,"width",t.width),c.setAttributeNS(null,"height",t.height),this._fromData(i,function(x,F,ee){var D=document.createElement("path");if(!(isNaN(x.control1.x)||isNaN(x.control1.y)||isNaN(x.control2.x)||isNaN(x.control2.y))){var Ro="M "+x.startPoint.x.toFixed(3)+","+x.startPoint.y.toFixed(3)+" C "+x.control1.x.toFixed(3)+","+x.control1.y.toFixed(3)+" "+x.control2.x.toFixed(3)+","+x.control2.y.toFixed(3)+" "+x.endPoint.x.toFixed(3)+","+x.endPoint.y.toFixed(3);D.setAttribute("d",Ro),D.setAttribute("stroke-width",(2.25*F.end).toFixed(3)),D.setAttribute("stroke",ee),D.setAttribute("fill","none"),D.setAttribute("stroke-linecap","round"),c.appendChild(D)}},function(x){var F=document.createElement("circle"),ee="function"==typeof o.dotSize?o.dotSize():o.dotSize;F.setAttribute("r",ee),F.setAttribute("cx",x.x),F.setAttribute("cy",x.y),F.setAttribute("fill",x.color),c.appendChild(F)});var u='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+s+" "+d+'" width="'+s+'" height="'+d+'">',T=c.innerHTML;if(void 0===T){var q=document.createElement("dummy"),y=c.childNodes;q.innerHTML="";for(var C=0;C<y.length;C+=1)q.appendChild(y[C].cloneNode(!0));T=q.innerHTML}return"data:image/svg+xml;base64,"+btoa(u+T+"</svg>")},h.prototype.fromData=function(o){var i=this;this.clear(),this._fromData(o,function(t,r){return i._drawCurve(t,r.start,r.end)},function(t){return i._drawDot(t)}),this._data=o},h.prototype.toData=function(){return this._data};const fe=h;let oe=(()=>{class o{constructor(t){this.elementRef=t,this.options=this.options||{},this.onBeginEvent=new e.vpe,this.onEndEvent=new e.vpe}ngAfterContentInit(){const t=this.elementRef.nativeElement.querySelector("canvas");this.options.canvasHeight&&(t.height=this.options.canvasHeight),this.options.canvasWidth&&(t.width=this.options.canvasWidth),this.signaturePad=new fe(t,this.options),this.signaturePad.onBegin=this.onBegin.bind(this),this.signaturePad.onEnd=this.onEnd.bind(this)}ngOnDestroy(){const t=this.elementRef.nativeElement.querySelector("canvas");t.width=0,t.height=0}resizeCanvas(){const t=Math.max(window.devicePixelRatio||1,1),r=this.signaturePad.canvas;r.width=r.offsetWidth*t,r.height=r.offsetHeight*t,r.getContext("2d").scale(t,t),this.signaturePad.clear()}toData(){return this.signaturePad?this.signaturePad.toData():[]}fromData(t){this.signaturePad.fromData(t)}toDataURL(t,r){return this.signaturePad.toDataURL(t,r)}fromDataURL(t,r={}){!r.hasOwnProperty("height")&&this.options.canvasHeight&&(r.height=this.options.canvasHeight),!r.hasOwnProperty("width")&&this.options.canvasWidth&&(r.width=this.options.canvasWidth),this.signaturePad.fromDataURL(t,r)}clear(){this.signaturePad.clear()}isEmpty(){return this.signaturePad.isEmpty()}off(){this.signaturePad.off()}on(){this.signaturePad.on()}set(t,r){switch(t){case"canvasHeight":this.signaturePad.canvas.height=r;break;case"canvasWidth":this.signaturePad.canvas.width=r;break;default:this.signaturePad[t]=r}}onBegin(){this.onBeginEvent.emit(!0)}onEnd(){this.onEndEvent.emit(!0)}queryPad(){return this.signaturePad}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["signature-pad"]],inputs:{options:"options"},outputs:{onBeginEvent:"onBeginEvent",onEndEvent:"onEndEvent"},decls:1,vars:0,template:function(t,r){1&t&&e._UZ(0,"canvas")},encapsulation:2}),o})(),_e=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[]]}),o})();var re=Z(2843),ve=Z(590),ie=Z(262);class he{setFirma(i){const t=i;this.codigo_anexo=t.codigo_anexo||"",this.contenido=t.contenido||""}}const Te=`${Z(2340).N.apiUrlFirma}`;let be=(()=>{class o{constructor(t){this.http=t}add(t){return console.log(t),this.http.post(`${Te}`,t).pipe((0,L.U)(r=>r||{}),(0,ie.K)(this.handleError))}handleError(t){let r="";return r=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,(0,re._)(r)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Ae=(()=>{class o{constructor(t,r,n){this.modalActive=t,this.firmaService=r,this.toastr=n,this.signaturePadOptions={minWidth:2,canvasWidth:450,canvasHeight:300},this.unsubscribe=[]}ngAfterViewInit(){this.signaturePad.set("minWidth",2),this.signaturePad.clear()}drawComplete(){}drawStart(){}clearSignature(){this.signaturePad.clear()}savePad(){const t=this.signaturePad.toDataURL();this.signatureImg=t;const r=new he;r.codigo_anexo=this.codigo_anexo,r.contenido=this.signatureImg;const n=this.firmaService.add(r).pipe((0,ve.P)(),(0,ie.K)(a=>(console.log(a),this.toastr.error("El anexo no ha podido ser firmado","Fallo"),(0,re._)(new Error(a))))).subscribe(a=>{if(a){var s=a;this.toastr.success("Firma a\xf1adida","A\xf1adida"),s.mensaje.replaceAll("\\r","\r").replaceAll("\\n","\n"),this.closeModal()}});this.unsubscribe.push(n)}ngOnInit(){}closeModal(){this.modalActive.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.Kz),e.Y36(be),e.Y36(M._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-firma"]],viewQuery:function(t,r){if(1&t&&e.Gf(oe,5),2&t){let n;e.iGM(n=e.CRH())&&(r.signaturePad=n.first)}},inputs:{codigo_anexo:"codigo_anexo"},decls:14,vars:2,consts:[[1,"card"],[1,"modal-header"],[1,"modal-title","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"signature-container"],[3,"options","onBeginEvent","onEndEvent"],[1,"buttons"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-warning",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Firma de anexo "),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.closeModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.TgZ(7,"div",5),e.TgZ(8,"signature-pad",6),e.NdJ("onBeginEvent",function(){return r.drawStart()})("onEndEvent",function(){return r.drawComplete()}),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"button",8),e.NdJ("click",function(){return r.clearSignature()}),e._uU(11,"Limpiar"),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return r.savePad()}),e._uU(13,"Guardar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.hij(" ",r.codigo_anexo," "),e.xp6(2),e.Q6J("options",r.signaturePadOptions))},directives:[oe],styles:[".signature-container[_ngcontent-%COMP%]{border-width:1px;margin-bottom:20px;background-color:#f0f0f0;cursor:crosshair}.buttons[_ngcontent-%COMP%]{float:right}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:10px;border-radius:5px}canvas[_ngcontent-%COMP%]{max-width:300px!important}signature-pad[_ngcontent-%COMP%]{max-width:300px!important}"]}),o})();var xe=Z(7579);let qe=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manual-crud-anexos"]],decls:4,vars:0,template:function(t,r){1&t&&(e.TgZ(0,"h4"),e._uU(1,"Manual de Crud de Anexos:"),e.qZA(),e.TgZ(2,"p"),e._uU(3,"Bienvenidos al manual de crud de anexos"),e.qZA())},styles:[""]}),o})(),ye=(()=>{class o{constructor(t){this.http=t,this.ruta="http://127.0.0.1:8000/api/"}getAnexos(t){return this.http.get(this.ruta+"listarAnexos/"+t)}descargarAnexo(t,r){return this.http.post(this.ruta+"descargarAnexo",{dni_tutor:t,codigo:r},{responseType:"arraybuffer"})}descargarTodo(t){return this.http.post(this.ruta+"descargarTodo",{dni_tutor:t},{responseType:"arraybuffer"})}eliminarAnexo(t,r){r=(r=r.replace("/","*")).replace("/","*");let n=this.ruta+"eliminarAnexo/"+t+"/"+r,a=new g.WM({"Content-Type":"application/json"});return this.http.delete(n,{headers:a})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Ce=function(){function o(i,t,r){this.el=i,this.vcr=t,this.renderer=r,this.dtOptions={}}return o.prototype.ngOnInit=function(){var i=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){i.displayTable(t)}):this.displayTable(null)},o.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},o.prototype.displayTable=function(i){var t=this;i&&(this.dtOptions=i),this.dtInstance=new Promise(function(r,n){Promise.resolve(t.dtOptions).then(function(a){0===Object.keys(a).length&&0===$("tbody tr",t.el.nativeElement).length?n("Both the table and dtOptions cannot be empty"):setTimeout(function(){var d={rowCallback:function(c,p,u){if(a.columns){var T=a.columns;t.applyNgPipeTransform(c,T),t.applyNgRefTemplate(c,T,p)}a.rowCallback&&a.rowCallback(c,p,u)}};d=Object.assign({},a,d),t.dt=$(t.el.nativeElement).DataTable(d),r(t.dt)})})})},o.prototype.applyNgPipeTransform=function(i,t){t.filter(function(n){return n.ngPipeInstance&&!n.ngTemplateRef}).forEach(function(n){var a=n.ngPipeInstance,s=t.findIndex(function(u){return u.data===n.data}),d=i.childNodes.item(s),c=$(d).text(),p=a.transform(c);$(d).text(p)})},o.prototype.applyNgRefTemplate=function(i,t,r){var n=this;t.filter(function(s){return s.ngTemplateRef&&!s.ngPipeInstance}).forEach(function(s){var d=s.ngTemplateRef,c=d.ref,p=d.context,u=t.findIndex(function(C){return C.data===s.data}),T=i.childNodes.item(u);$(T).html("");var q=Object.assign({},p,null==p?void 0:p.userData,{adtData:r}),y=n.vcr.createEmbeddedView(c,q);n.renderer.appendChild(T,y.rootNodes[0])})},o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(e.Qsj))},o.\u0275dir=e.lG2({type:o,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),o}(),we=function(){function o(){}return o.forRoot=function(){return{ngModule:o}},o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[b.ez]]}),o}();function Ue(o,i){1&o&&(e.O4$(),e._UZ(0,"path",25))}function Ee(o,i){1&o&&(e.O4$(),e._UZ(0,"path",26))}function Me(o,i){1&o&&(e.O4$(),e._UZ(0,"path",25))}function Ne(o,i){1&o&&(e.O4$(),e._UZ(0,"path",26))}function Je(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",11),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"p",13),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td",11),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"td",11),e.O4$(),e.TgZ(10,"svg",14),e.YNc(11,Ue,1,0,"path",15),e.YNc(12,Ee,1,0,"path",16),e.qZA(),e.qZA(),e.kcU(),e.TgZ(13,"td",11),e.O4$(),e.TgZ(14,"svg",17),e.YNc(15,Me,1,0,"path",15),e.YNc(16,Ne,1,0,"path",16),e.qZA(),e.qZA(),e.kcU(),e.TgZ(17,"td",11),e.TgZ(18,"button",18),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().descargarAnexo(a.codigo)}),e.O4$(),e.TgZ(19,"svg",19),e._UZ(20,"use",20),e.qZA(),e.qZA(),e.kcU(),e.TgZ(21,"button",21),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().abrirModalFirma(a.codigo)}),e.O4$(),e.TgZ(22,"svg",19),e._UZ(23,"use",22),e.qZA(),e.qZA(),e.kcU(),e.TgZ(24,"button",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().eliminarAnexo(a.codigo)}),e.O4$(),e.TgZ(25,"svg",19),e._UZ(26,"use",24),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(3),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.codigo),e.xp6(3),e.Oqu(t.empresa),e.xp6(3),e.Q6J("ngIf",0==t.firma_centro),e.xp6(1),e.Q6J("ngIf",1==t.firma_centro),e.xp6(3),e.Q6J("ngIf",0==t.firma_centro),e.xp6(1),e.Q6J("ngIf",1==t.firma_centro)}}let Ie=(()=>{class o{constructor(t,r,n,a,s,d){var c;this.anexoService=t,this.router=r,this.toastr=n,this.modal=a,this.storageUser=s,this.dialogService=d,this.dtOptions={},this.dtTrigger=new xe.x,this.respuesta=[],this.codigo="",this.usuario=s.getUser(),this.dni_tutor=null===(c=this.usuario)||void 0===c?void 0:c.dni}ngOnInit(){delete this.dtOptions.language,this.verAnexos()}ngOnDestroy(){this.dtTrigger.unsubscribe()}verAnexos(){this.anexoService.getAnexos(this.dni_tutor).subscribe(t=>{this.respuesta=t,t=this.respuesta.data,this.dtTrigger.next(this.respuesta)}),$.extend(!0,$.fn.dataTable.defaults,{language:{url:"//cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"}})}descargarAnexo(t){var r=this;return(0,E.Z)(function*(){(yield r.dialogService.confirmacion("Descargar","\xbfEst\xe1 seguro de que desea descargar el anexo?"))?(r.anexoService.descargarAnexo(r.dni_tutor,t).subscribe({next:a=>{new Date;const d=new Blob([a],{type:"application/octet-stream"});I.saveAs(d,t),r.toastr.success("Anexo Descargado","Descarga")},error:a=>{console.log(a),r.toastr.error("El anexo no ha podido descargarse","Fallo")}}),r.router.navigate(["/data-management/crud-anexos"])):r.toastr.info("No has descargado el anexo","Descarga")})()}descargarTodo(){var t=this;return(0,E.Z)(function*(){(yield t.dialogService.confirmacion("Descargar","\xbfEst\xe1 seguro de que desea descargar los anexos?"))?(t.anexoService.descargarTodo(t.dni_tutor).subscribe({next:n=>{const a=new Date,s=new Blob([n],{type:"application/octet-stream"});I.saveAs(s,"backup_"+a.getTime()+".zip"),t.toastr.success("Anexos Descargados","Descarga")},error:n=>{console.log(n),t.toastr.error("Los anexos no han podido descargarse","Fallo")}}),t.router.navigate(["/data-management/crud-anexos"])):t.toastr.info("No has descargado los anexos","Descarga")})()}eliminarAnexo(t){var r=this;return(0,E.Z)(function*(){(yield r.dialogService.confirmacion("Eliminar","\xbfEst\xe1 seguro de que desea eliminar el anexo?: "+t))?r.anexoService.eliminarAnexo(r.dni_tutor,t).subscribe({next:a=>{r.toastr.success("Anexo Eliminado","Eliminado"),r.verAnexos()},error:a=>{console.log(a),r.toastr.error("El anexo no ha podido eliminarse","Fallo")}}):r.toastr.info("Has decidido no eliminar el anexo","No eliminado")})()}abrirModalFirma(t){this.modal.open(Ae,{size:"md",backdrop:"static",keyboard:!1}).componentInstance.codigo_anexo=t}abrirAyuda(){this.modal.open(qe,{size:"lg"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ye),e.Y36(A.F0),e.Y36(M._W),e.Y36(f.FF),e.Y36(m.L),e.Y36(v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-crud-anexos"]],decls:33,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"col-12","pb-3","page-header","d-flex","justify-content-between"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-secondary","mr-2","float-end",3,"click"],[1,"row","p-3"],[1,"col-12","bg-white"],[1,"container"],["aria-label","descargarTodo",1,"btn","btn-outline-primary","float-end",3,"click"],["datatable","",1,"table","table-striped","table-bordered","row-border","hover","text-center","table-hover",3,"dtOptions","dtTrigger"],[1,"table-primary","text-white"],["scope","col"],[4,"ngFor","ngForOf"],[2,"display","none"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-lg"],["d","M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z",4,"ngIf"],["d","M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-dash-lg"],["type","submit","aria-label","descargar",1,"btn","btn-outline-primary","px-2","py-1","me-2",3,"click"],["width","16","height","16",1,"bi"],[0,"xlink","href","#descarga"],["type","submit","aria-label","firma",1,"btn","btn-outline-primary","px-2","py-1","me-2",3,"click"],[0,"xlink","href","#firma"],["type","submit","aria-label","eliminar",1,"btn","btn-outline-danger","px-2","py-1","me-2",3,"click"],[0,"xlink","href","#papelera"],["d","M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"],["d","M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",0),e.TgZ(3,"div",2),e.TgZ(4,"h1",3),e._uU(5,"Gesti\xf3n de Anexos"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return r.abrirAyuda()}),e._uU(7,"?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",0),e.TgZ(9,"div",1),e.TgZ(10,"form"),e.TgZ(11,"div",5),e.TgZ(12,"div",6),e.TgZ(13,"div",7),e.TgZ(14,"div",5),e.TgZ(15,"div",6),e.TgZ(16,"button",8),e.NdJ("click",function(){return r.descargarTodo()}),e._uU(17,"Descargar todo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"table",9),e.TgZ(19,"thead",10),e.TgZ(20,"tr"),e.TgZ(21,"th",11),e._uU(22,"Anexo"),e.qZA(),e.TgZ(23,"th",11),e._uU(24,"Empresa"),e.qZA(),e.TgZ(25,"th",11),e._uU(26,"Firma de Empresa"),e.qZA(),e.TgZ(27,"th",11),e._uU(28,"Firma de Centro"),e.qZA(),e.TgZ(29,"th",11),e._uU(30,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"tbody"),e.YNc(32,Je,27,7,"tr",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(18),e.Q6J("dtOptions",r.dtOptions)("dtTrigger",r.dtTrigger),e.xp6(14),e.Q6J("ngForOf",r.respuesta))},directives:[f._L,l._Y,l.JL,l.F,Ce,b.sg,b.O5],styles:[""]}),o})();function ke(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function Pe(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Debe tener 8 n\xfameros y 1 letra en may\xfascula."),e.qZA())}function Fe(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Debe tener 9 caracteres."),e.qZA())}function Se(o,i){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,ke,2,0,"div",39),e.YNc(2,Pe,2,0,"div",39),e.YNc(3,Fe,2,0,"div",39),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.cif.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.cif.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.formulario.cif.errors.maxlength)}}function De(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function Ye(o,i){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,De,2,0,"div",39),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.nombre.errors.required)}}function Re(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xedo"),e.qZA())}function Le(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Debe tener formato de correo electr\xf3nico "),e.qZA())}function Qe(o,i){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,Re,2,0,"div",39),e.YNc(2,Le,2,0,"div",39),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.email)}}function je(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function Oe(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Debe tener 9 n\xfameros."),e.qZA())}function Be(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Debe tener 9 n\xfameros."),e.qZA())}function He(o,i){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,je,2,0,"div",39),e.YNc(2,Oe,2,0,"div",39),e.YNc(3,Be,2,0,"div",39),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.telefono.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.telefono.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.formulario.telefono.errors.maxlength)}}let Ge=(()=>{class o{constructor(t,r){var n;if(this.formBuilder=t,this.router=r,this.submitted=!1,this.correoEmpresa="",this.nombreEmpresa="",this.telefonoEmpresa="",this.cif="",this.tipoEmpresa="0",null!=sessionStorage.getItem(o.empresa)){n=sessionStorage.getItem(o.empresa);var a=JSON.parse(n);this.correoEmpresa=a.correo?a.correo:"",this.nombreEmpresa=a.nombre?a.nombre:"",this.telefonoEmpresa=a.telefono?a.telefono:"",this.cif=a.cif?a.cif:"",this.tipoEmpresa=a.tipoEmpresa?a.tipoEmpresa:"0"}this.empresa=this.formBuilder.group({email:[this.correoEmpresa,[l.kI.required,l.kI.email]],nombre:[this.nombreEmpresa,[l.kI.required]],telefono:[this.telefonoEmpresa,[l.kI.required,l.kI.minLength(9),l.kI.maxLength(9)]],cif:[this.cif,[l.kI.required,l.kI.minLength(9),l.kI.maxLength(9)]],tipoEmpresa:[this.tipoEmpresa,[l.kI.required]]})}ngOnInit(){}get formulario(){return this.empresa.controls}onSubmit(){if(this.submitted=!0,this.empresa.valid){var d={correo:this.empresa.value.email,nombre:this.empresa.value.nombre,telefono:this.empresa.value.telefono,cif:this.empresa.value.cif,tipoEmpresa:this.empresa.value.tipoEmpresa};sessionStorage.setItem(o.empresa,JSON.stringify(d)),console.log(d),this.router.navigateByUrl("data-management/registro-empresa/ubicacion"),this.onReset()}}onReset(){this.submitted=!1,this.empresa.reset()}}return o.empresa="empresa",o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(A.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-empresa"]],decls:89,vars:5,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-secondary","mr-2"],[1,"col-12","p-2"],[1,"breadcrumb"],["routerLink","/data-management/registro-empresa/representante",1,"item","completed"],[1,"arrow"],[1,"hide-mobile"],[1,"show-mobile"],["routerLink","data-management/registro-empresa/representante",1,"item","active"],[1,"item"],[1,"row","px-4","py-4","d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"col-12","col-lg-8","card","p-3"],[1,"mb-3"],[1,"row","d-flex","align-items-center"],[1,"col-12","col-lg-4","d-lg-flex","justify-content-end"],["for","cif",1,"form-label","fw-bold","m-0"],[1,"col-12","col-lg-8"],["type","text","id","cif","formControlName","cif","placeholder","00000000X",1,"form-control"],["class","col-12 col-lg-8",4,"ngIf"],["for","nombre",1,"form-label","fw-bold","m-0"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre de la empresa",1,"form-control"],["for","email",1,"form-label","fw-bold","m-0"],["type","email","id","email","placeholder","empresa@empresa.com","formControlName","email",1,"form-control"],["for","telefono",1,"form-label","fw-bold","m-0"],["type","text","id","telefono","formControlName","telefono","placeholder","000 00 00 00",1,"form-control"],[1,"form-label","fw-bold","m-0"],[1,"col-12","col-lg-4"],[1,"form-check"],["formControlName","tipoEmpresa","type","radio","value","1","name","tipoEmpresa","id","privada",1,"form-check-input"],["for","privada",1,"form-check-label"],["formControlName","tipoEmpresa","type","radio","name","tipoEmpresa","value","0","id","publica","ng-checked","true",1,"form-check-input"],["for","publica",1,"form-check-label"],[1,"row","py-2","d-flex","justify-content-center"],[1,"col-6","d-flex","justify-content-center"],["type","submit","value","Aceptar y continuar",1,"btn","btn-outline-primary"],[1,"col-12"],["type","button","value","Atr\xe1s","routerLink","data-management/registro-empresa/representante",1,"btn","btn-danger"],[4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Registro de empresas"),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"a",6),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11,"Representante legal"),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Repre..."),e.qZA(),e.qZA(),e.TgZ(14,"a",10),e._UZ(15,"span",7),e.TgZ(16,"span",8),e._uU(17,"Empresa"),e.qZA(),e.TgZ(18,"span",9),e._uU(19,"Empresa"),e.qZA(),e.qZA(),e.TgZ(20,"a",11),e._UZ(21,"span",7),e.TgZ(22,"span",8),e._uU(23,"Ubicaci\xf3n"),e.qZA(),e.TgZ(24,"span",9),e._uU(25,"Ubicaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(26,"a",11),e.TgZ(27,"span",8),e._uU(28,"Resumen"),e.qZA(),e.TgZ(29,"span",9),e._uU(30,"Resumen"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"form",12),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(32,"div",13),e.TgZ(33,"div",14),e.TgZ(34,"div",15),e.TgZ(35,"div",16),e.TgZ(36,"label",17),e._uU(37,"CIF"),e.qZA(),e.qZA(),e.TgZ(38,"div",18),e._UZ(39,"input",19),e.TgZ(40,"div",0),e.YNc(41,Se,4,3,"div",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",14),e.TgZ(43,"div",15),e.TgZ(44,"div",16),e.TgZ(45,"label",21),e._uU(46,"Nombre"),e.qZA(),e.qZA(),e.TgZ(47,"div",18),e._UZ(48,"input",22),e.TgZ(49,"div",0),e.YNc(50,Ye,2,1,"div",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",14),e.TgZ(52,"div",15),e.TgZ(53,"div",16),e.TgZ(54,"label",23),e._uU(55,"Correo electr\xf3nico"),e.qZA(),e.qZA(),e.TgZ(56,"div",18),e._UZ(57,"input",24),e.TgZ(58,"div",0),e.YNc(59,Qe,3,2,"div",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",14),e.TgZ(61,"div",15),e.TgZ(62,"div",16),e.TgZ(63,"label",25),e._uU(64,"Tel\xe9fono"),e.qZA(),e.qZA(),e.TgZ(65,"div",18),e._UZ(66,"input",26),e.TgZ(67,"div",0),e.YNc(68,He,4,3,"div",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",14),e.TgZ(70,"div",15),e.TgZ(71,"div",16),e.TgZ(72,"label",27),e._uU(73,"Tipo de empresa"),e.qZA(),e.qZA(),e.TgZ(74,"div",28),e.TgZ(75,"div",29),e._UZ(76,"input",30),e.TgZ(77,"label",31),e._uU(78," Privada "),e.qZA(),e.qZA(),e.TgZ(79,"div",29),e._UZ(80,"input",32),e.TgZ(81,"label",33),e._uU(82," P\xfablica "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(83,"div",34),e.TgZ(84,"div",35),e._UZ(85,"input",36),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",0),e.TgZ(87,"div",37),e._UZ(88,"input",38),e.qZA(),e.qZA()),2&t&&(e.xp6(31),e.Q6J("formGroup",r.empresa),e.xp6(10),e.Q6J("ngIf",r.submitted&&r.formulario.cif.errors),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.nombre.errors),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.email.errors),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.telefono.errors))},directives:[f._L,A.yS,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,b.O5,l._,A.rH],styles:[""]}),o})(),ze=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-registro-empresa"]],decls:2,vars:0,template:function(t,r){1&t&&(e.TgZ(0,"p"),e._uU(1,"registro-empresa works!"),e.qZA())},styles:[""]}),o})();function $e(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function We(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Debe tener 8 n\xfameros y 1 letra en may\xfascula."),e.qZA())}function Ve(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Debe tener 9 caracteres."),e.qZA())}function Xe(o,i){if(1&o&&(e.TgZ(0,"div",17),e.YNc(1,$e,2,0,"div",29),e.YNc(2,We,2,0,"div",30),e.YNc(3,Ve,2,0,"div",30),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.dni.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.dni.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.formulario.dni.errors.maxlength)}}function Ke(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function et(o,i){if(1&o&&(e.TgZ(0,"div",17),e.YNc(1,Ke,2,0,"div",30),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.nombre.errors.required)}}function tt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function ot(o,i){if(1&o&&(e.TgZ(0,"div",17),e.YNc(1,tt,2,0,"div",30),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.apellido.errors.required)}}function rt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xedo"),e.qZA())}function it(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Debe tener formato de correo electr\xf3nico "),e.qZA())}function nt(o,i){if(1&o&&(e.TgZ(0,"div",17),e.YNc(1,rt,2,0,"div",30),e.YNc(2,it,2,0,"div",30),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.email)}}let at=(()=>{class o{constructor(t,r){this.formBuilder=t,this.router=r,this.submitted=!1;var n="";if(this.correoRepresentante="",this.nombreRepresentante="",this.ape="",this.dni="",null!=sessionStorage.getItem(o.representante)){n=sessionStorage.getItem(o.representante);var a=JSON.parse(n);this.correoRepresentante=a.correo?a.correo:"",this.nombreRepresentante=a.nombre?a.nombre:"",this.ape=a.apellido?a.apellido:"",this.dni=a.dni?a.dni:""}this.representante=this.formBuilder.group({email:[this.correoRepresentante,[l.kI.required,l.kI.email]],nombre:[this.nombreRepresentante,[l.kI.required]],apellido:[this.ape,[l.kI.required]],dni:[this.dni,[l.kI.required,l.kI.minLength(9),l.kI.maxLength(9)]]})}ngOnInit(){}get formulario(){return this.representante.controls}onSubmit(){this.submitted=!0,this.representante.valid&&(sessionStorage.setItem(o.representante,JSON.stringify({correo:this.representante.value.email,nombre:this.representante.value.nombre,apellido:this.representante.value.apellido,dni:this.representante.value.dni})),this.router.navigateByUrl("data-management/registro-empresa/empresa"),this.onReset())}onReset(){this.submitted=!1,this.representante.reset()}}return o.representante="representante",o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(A.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-representante"]],decls:72,vars:5,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-secondary","mr-2"],[1,"col-12","p-2"],[1,"breadcrumb"],[1,"item","active"],[1,"arrow"],[1,"hide-mobile"],[1,"show-mobile"],[1,"item"],[1,"row","px-4","py-4","d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"col-12","col-lg-8","card","p-3"],[1,"mb-3"],[1,"row","d-flex","align-items-center"],[1,"col-12","col-lg-4","d-lg-flex","justify-content-end"],["for","dni",1,"form-label","fw-bold","m-0"],[1,"col-12","col-lg-8"],["type","text","id","dni","placeholder","00000000X","formControlName","dni",1,"form-control"],["class","col-12 col-lg-8",4,"ngIf"],["for","nombre",1,"form-label","fw-bold","m-0"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre del representante...",1,"form-control"],["for","apellidos",1,"form-label","fw-bold","m-0"],["type","text","id","apellidos","formControlName","apellido","placeholder","Apellidos del representante...",1,"form-control"],["for","email",1,"form-label","fw-bold","m-0"],["type","email","id","email","placeholder","representante@empresa.com","formControlName","email",1,"form-control"],[1,"row","py-2","d-flex","justify-content-center"],[1,"col-6","col-xl-6","d-flex","justify-content-center"],["type","submit","value","Aceptar y continuar",1,"btn","btn-outline-primary"],["class","error",4,"ngIf"],[4,"ngIf"],[1,"error"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Registro de empresas"),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"a",6),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11,"Representante legal"),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Repre..."),e.qZA(),e.qZA(),e.TgZ(14,"a",10),e._UZ(15,"span",7),e.TgZ(16,"span",8),e._uU(17,"Empresa"),e.qZA(),e.TgZ(18,"span",9),e._uU(19,"Empresa"),e.qZA(),e.qZA(),e.TgZ(20,"a",10),e._UZ(21,"span",7),e.TgZ(22,"span",8),e._uU(23,"Ubicaci\xf3n"),e.qZA(),e.TgZ(24,"span",9),e._uU(25,"Ubicaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(26,"a",10),e.TgZ(27,"span",8),e._uU(28,"Resumen"),e.qZA(),e.TgZ(29,"span",9),e._uU(30,"Resumen"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"form",11),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(32,"div",12),e.TgZ(33,"div",13),e.TgZ(34,"div",14),e.TgZ(35,"div",15),e.TgZ(36,"label",16),e._uU(37,"DNI"),e.qZA(),e.qZA(),e.TgZ(38,"div",17),e._UZ(39,"input",18),e.TgZ(40,"div",0),e.YNc(41,Xe,4,3,"div",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",13),e.TgZ(43,"div",14),e.TgZ(44,"div",15),e.TgZ(45,"label",20),e._uU(46,"Nombre"),e.qZA(),e.qZA(),e.TgZ(47,"div",17),e._UZ(48,"input",21),e.TgZ(49,"div",0),e.YNc(50,et,2,1,"div",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",13),e.TgZ(52,"div",14),e.TgZ(53,"div",15),e.TgZ(54,"label",22),e._uU(55,"Apellidos"),e.qZA(),e.qZA(),e.TgZ(56,"div",17),e._UZ(57,"input",23),e.TgZ(58,"div",0),e.YNc(59,ot,2,1,"div",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",13),e.TgZ(61,"div",14),e.TgZ(62,"div",15),e.TgZ(63,"label",24),e._uU(64,"Correo electr\xf3nico"),e.qZA(),e.qZA(),e.TgZ(65,"div",17),e._UZ(66,"input",25),e.TgZ(67,"div",0),e.YNc(68,nt,3,2,"div",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",26),e.TgZ(70,"div",27),e._UZ(71,"input",28),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(31),e.Q6J("formGroup",r.representante),e.xp6(10),e.Q6J("ngIf",r.submitted&&r.formulario.dni.errors),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.nombre.errors),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.apellido.errors),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.email.errors))},directives:[f._L,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,b.O5],styles:[""]}),o})(),ne=(()=>{class o{constructor(t){this.http=t,this.descargarTrigger=new e.vpe,this.ruta="http://localhost:8000/api/"}enviarDatos(t){let r=this.ruta+"addDatosEmpresa",n=new g.WM({"Content-Type":"application/json"});return this.http.post(r,t,{headers:n})}descargarAnexo0(t){return this.http.post(this.ruta+"descargarAnexo0",{ruta_anexo:t},{responseType:"arraybuffer"})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),st=(()=>{class o{constructor(t,r,n){this.modalActive=t,this.registroEmpresaService=r,this.router=n,this.ruta_anexo="",this.registroEmpresaService.descargarTrigger.subscribe({next:a=>{this.ruta_anexo=a[0]}})}ngOnInit(){}closeModel(){this.modalActive.dismiss()}descargarDocumento(){this.registroEmpresaService.descargarAnexo0(this.ruta_anexo).subscribe({next:t=>{console.log("Se descarga el anexo 0");let n=this.ruta_anexo.split("\\",3).pop();const a=new Blob([t],{type:"application/octet-stream"});I.saveAs(a,n)},error:t=>{console.log("El anexo no se ha descargado")}}),this.closeModel(),this.router.navigateByUrl("")}goHomePage(){this.closeModel(),this.router.navigateByUrl("")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.Kz),e.Y36(ne),e.Y36(A.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-descarga"]],decls:17,vars:0,consts:[[1,"modal-header"],[1,"text-center","modal-title"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x-square"],["d","M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],[1,"modal-body"],[1,"fw-bold","text-center"],[1,"row"],[1,"col-6","d-flex","justify-content-center"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Descargar Anexo 0"),e.qZA(),e.TgZ(3,"a",2),e.NdJ("click",function(){return r.closeModel()}),e.O4$(),e.TgZ(4,"svg",3),e._UZ(5,"path",4),e._UZ(6,"path",5),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(7,"div",6),e.TgZ(8,"p",7),e._uU(9,"Se ha generado el Anexo 0, \xbfDesea descargarlo ahora?"),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"button",10),e.NdJ("click",function(){return r.descargarDocumento()}),e._uU(13,"Si"),e.qZA(),e.qZA(),e.TgZ(14,"div",9),e.TgZ(15,"button",10),e.NdJ("click",function(){return r.goHomePage()}),e._uU(16,"No"),e.qZA(),e.qZA(),e.qZA(),e.qZA())},styles:[""]}),o})(),lt=(()=>{class o{constructor(t,r,n,a){this.router=t,this.formBuilder=r,this.registroEmpresaService=n,this.modal=a,this.submitted=!1,this.tipoNumero=0,this.correoRep="hola",this.nombreRep="hola",this.apellidosRep="hola",this.dniRep="hola",this.correoEmp="hola",this.nombreEmp="hola",this.telefonoEmp=0,this.cifEmp="hola",this.tipoEmpresa="0",this.localidad="hola",this.direccion="hola",this.provincia="hola",this.cp=0,this.dniTutor="20a",this.resumen=this.formBuilder.group({correoRep:[""],nombreRep:[""],apellidosRep:[""],dniRep:[""],correoEmp:[""],nombreEmp:[""],telefonoEmp:[""],cifEmp:[""],tipoEmpresa:[""],direccion:[""],localidad:[""],provincia:[""],cp:[""]})}ngOnInit(){var t=sessionStorage.getItem(o.repre),r=sessionStorage.getItem(o.empresa),n=sessionStorage.getItem(o.ubi),a=JSON.parse(t);this.correoRep=a.correo,this.nombreRep=a.nombre,this.apellidosRep=a.apellido,this.dniRep=a.dni;var s=JSON.parse(r);this.correoEmp=s.correo,this.nombreEmp=s.nombre,this.telefonoEmp=s.telefono,this.cifEmp=s.cif,this.tipoEmpresa="1"==s.tipoEmpresa?"Privada":"P\xfablica",this.tipoNumero=s.tipoEmpresa;var d=JSON.parse(n);this.localidad=d.localidad,this.direccion=d.direccion,this.provincia=d.provincia,this.cp=d.cp}get formulario(){return this.resumen.controls}onSubmit(){if(this.submitted=!0,this.resumen.valid){var n={empresa:{cif:this.cifEmp,nombre:this.nombreEmp,telefono:this.telefonoEmp,email:this.correoEmp,localidad:this.localidad,provincia:this.provincia,direccion:this.direccion,cp:this.cp,es_privada:this.tipoNumero},representante:{dni:this.dniRep,email:this.correoRep,password:"superman",nombre:this.nombreRep,apellidos:this.apellidosRep},dni:this.dniTutor};console.log(n),this.registroEmpresaService.enviarDatos(n).subscribe({next:a=>{let s=a.ruta_anexo;console.log(s),this.modal.open(st,{size:"xs"}),this.registroEmpresaService.descargarTrigger.emit([s])},error:a=>{console.log("No se han enviado los datos al servidor.")}}),this.onReset()}}onReset(){this.submitted=!1,this.resumen.reset()}}return o.dni_tutor="dni_tutor",o.repre="representante",o.empresa="empresa",o.ubi="ubicacion",o.\u0275fac=function(t){return new(t||o)(e.Y36(A.F0),e.Y36(l.qu),e.Y36(ne),e.Y36(f.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-resumen"]],decls:146,vars:14,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-secondary","mr-2"],[1,"col-12","p-2"],[1,"breadcrumb"],["routerLink","/data-management/registro-empresa/representante",1,"item","completed"],[1,"arrow"],[1,"hide-mobile"],[1,"show-mobile"],["routerLink","/data-management/registro-empresa/empresa",1,"item","completed"],["routerLink","/data-management/registro-empresa/ubicacion",1,"item","completed"],["routerLink","data-management/registro-empresa/resumen",1,"item","active"],[1,"row","px-4","py-4","d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"col-12","border","border-black","p-3","card"],[1,"col-xl-4","col-12","px-4"],[1,"col-12","h3","text-center"],[1,"row","border","border-dark","border-1","rounded","p-2","d-flex","align-items-center"],[1,"col-12","mb-3"],[1,"row","d-flex","align-items-center"],[1,"col-12","col-lg-4","d-lg-flex","justify-content-end"],["for","dniRep",1,"form-label","fw-bold","m-0"],[1,"col-12","col-lg-8"],["type","text","id","dniRep","formControlName","dniRep","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","nompreRep",1,"form-label","fw-bold","m-0"],["type","text","id","nombreRep","formControlName","nombreRep","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","apellidosRep",1,"form-label","fw-bold","m-0"],["type","text","id","apellidosRep","formControlName","apellidosRep","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","correoRep",1,"form-label","fw-bold","m-0"],["type","text","id","correoRep","formControlName","correoRep","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],[1,"col-12","text-center","h3"],["for","cifEmp",1,"form-label","fw-bold","m-0"],["type","text","id","cifEmp","formControlName","cifEmp","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","nombreEmp",1,"form-label","fw-bold","m-0"],["type","text","id","nombreEmp","formControlName","nombreEmp","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","correoEmp",1,"form-label","fw-bold","m-0"],["type","text","id","correoEmp","formControlName","correoEmp","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","telefonoEmp",1,"form-label","fw-bold","m-0"],["type","text","id","telefonoEmp","formControlName","telefonoEmp","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","tipoEmpresa",1,"form-label","fw-bold","m-0"],["type","text","id","tipoEmpresa","formControlName","tipoEmpresa","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","localidad",1,"form-label","fw-bold","m-0"],["type","text","id","localidad","formControlName","localidad","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","provincia",1,"form-label","fw-bold","m-0"],["type","text","id","provincia","formControlName","provincia","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","direccion",1,"form-label","fw-bold","m-0"],["type","text","id","direccion","formControlName","direccion","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","cp",1,"form-label","fw-bold","m-0"],["type","text","id","cp","formControlName","cp","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],[1,"row","py-2","d-flex","align-items-center"],[1,"col-12","col-xl-12","d-flex","justify-content-center"],["type","submit","value","Aceptar y continuar",1,"btn","btn-outline-primary"],[1,"col-12","col-xl-12"],["type","button","value","Atr\xe1s","routerLink","data-management/registro-empresa/ubicacion",1,"btn","btn-danger"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Registro de empresas"),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"a",6),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11,"Representante"),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Repre..."),e.qZA(),e.qZA(),e.TgZ(14,"a",10),e._UZ(15,"span",7),e.TgZ(16,"span",8),e._uU(17,"Empresa"),e.qZA(),e.TgZ(18,"span",9),e._uU(19,"Empresa"),e.qZA(),e.qZA(),e.TgZ(20,"a",11),e._UZ(21,"span",7),e.TgZ(22,"span",8),e._uU(23,"Ubicaci\xf3n"),e.qZA(),e.TgZ(24,"span",9),e._uU(25,"Ubicaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(26,"a",12),e.TgZ(27,"span",8),e._uU(28,"Resumen"),e.qZA(),e.TgZ(29,"span",9),e._uU(30,"Resumen"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"form",13),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(32,"div",14),e.TgZ(33,"div",0),e.TgZ(34,"div",15),e.TgZ(35,"div",0),e.TgZ(36,"h2",16),e._uU(37,"Representante"),e.qZA(),e.qZA(),e.TgZ(38,"div",17),e.TgZ(39,"div",18),e.TgZ(40,"div",19),e.TgZ(41,"div",20),e.TgZ(42,"label",21),e._uU(43,"DNI:"),e.qZA(),e.qZA(),e.TgZ(44,"div",22),e.TgZ(45,"input",23),e.NdJ("ngModelChange",function(a){return r.dniRep=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",18),e.TgZ(47,"div",19),e.TgZ(48,"div",20),e.TgZ(49,"label",24),e._uU(50,"Nombre:"),e.qZA(),e.qZA(),e.TgZ(51,"div",22),e.TgZ(52,"input",25),e.NdJ("ngModelChange",function(a){return r.nombreRep=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",18),e.TgZ(54,"div",19),e.TgZ(55,"div",20),e.TgZ(56,"label",26),e._uU(57,"Apellidos:"),e.qZA(),e.qZA(),e.TgZ(58,"div",22),e.TgZ(59,"input",27),e.NdJ("ngModelChange",function(a){return r.apellidosRep=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",18),e.TgZ(61,"div",19),e.TgZ(62,"div",20),e.TgZ(63,"label",28),e._uU(64,"E-mail:"),e.qZA(),e.qZA(),e.TgZ(65,"div",22),e.TgZ(66,"input",29),e.NdJ("ngModelChange",function(a){return r.correoRep=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(67,"div",15),e.TgZ(68,"div",0),e.TgZ(69,"h2",30),e._uU(70,"Empresa"),e.qZA(),e.qZA(),e.TgZ(71,"div",17),e.TgZ(72,"div",18),e.TgZ(73,"div",19),e.TgZ(74,"div",20),e.TgZ(75,"label",31),e._uU(76,"CIF:"),e.qZA(),e.qZA(),e.TgZ(77,"div",22),e.TgZ(78,"input",32),e.NdJ("ngModelChange",function(a){return r.cifEmp=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(79,"div",18),e.TgZ(80,"div",19),e.TgZ(81,"div",20),e.TgZ(82,"label",33),e._uU(83,"Nombre:"),e.qZA(),e.qZA(),e.TgZ(84,"div",22),e.TgZ(85,"input",34),e.NdJ("ngModelChange",function(a){return r.nombreEmp=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",18),e.TgZ(87,"div",19),e.TgZ(88,"div",20),e.TgZ(89,"label",35),e._uU(90,"Email:"),e.qZA(),e.qZA(),e.TgZ(91,"div",22),e.TgZ(92,"input",36),e.NdJ("ngModelChange",function(a){return r.correoEmp=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(93,"div",18),e.TgZ(94,"div",19),e.TgZ(95,"div",20),e.TgZ(96,"label",37),e._uU(97,"Tel\xe9fono:"),e.qZA(),e.qZA(),e.TgZ(98,"div",22),e.TgZ(99,"input",38),e.NdJ("ngModelChange",function(a){return r.telefonoEmp=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(100,"div",18),e.TgZ(101,"div",19),e.TgZ(102,"div",20),e.TgZ(103,"label",39),e._uU(104,"Tipo:"),e.qZA(),e.qZA(),e.TgZ(105,"div",22),e.TgZ(106,"input",40),e.NdJ("ngModelChange",function(a){return r.tipoEmpresa=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(107,"div",15),e.TgZ(108,"div",0),e.TgZ(109,"h2",30),e._uU(110,"Ubicaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(111,"div",17),e.TgZ(112,"div",18),e.TgZ(113,"div",19),e.TgZ(114,"div",20),e.TgZ(115,"label",41),e._uU(116,"Localidad:"),e.qZA(),e.qZA(),e.TgZ(117,"div",22),e.TgZ(118,"input",42),e.NdJ("ngModelChange",function(a){return r.localidad=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(119,"div",18),e.TgZ(120,"div",19),e.TgZ(121,"div",20),e.TgZ(122,"label",43),e._uU(123,"Provincia:"),e.qZA(),e.qZA(),e.TgZ(124,"div",22),e.TgZ(125,"input",44),e.NdJ("ngModelChange",function(a){return r.provincia=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(126,"div",18),e.TgZ(127,"div",19),e.TgZ(128,"div",20),e.TgZ(129,"label",45),e._uU(130,"Direcci\xf3n:"),e.qZA(),e.qZA(),e.TgZ(131,"div",22),e.TgZ(132,"input",46),e.NdJ("ngModelChange",function(a){return r.direccion=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(133,"div",18),e.TgZ(134,"div",19),e.TgZ(135,"div",20),e.TgZ(136,"label",47),e._uU(137,"CP:"),e.qZA(),e.qZA(),e.TgZ(138,"div",22),e.TgZ(139,"input",48),e.NdJ("ngModelChange",function(a){return r.cp=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(140,"div",49),e.TgZ(141,"div",50),e._UZ(142,"input",51),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(143,"div",0),e.TgZ(144,"div",52),e._UZ(145,"input",53),e.qZA(),e.qZA()),2&t&&(e.xp6(31),e.Q6J("formGroup",r.resumen),e.xp6(14),e.Q6J("ngModel",r.dniRep),e.xp6(7),e.Q6J("ngModel",r.nombreRep),e.xp6(7),e.Q6J("ngModel",r.apellidosRep),e.xp6(7),e.Q6J("ngModel",r.correoRep),e.xp6(12),e.Q6J("ngModel",r.cifEmp),e.xp6(7),e.Q6J("ngModel",r.nombreEmp),e.xp6(7),e.Q6J("ngModel",r.correoEmp),e.xp6(7),e.Q6J("ngModel",r.telefonoEmp),e.xp6(7),e.Q6J("ngModel",r.tipoEmpresa),e.xp6(12),e.Q6J("ngModel",r.localidad),e.xp6(7),e.Q6J("ngModel",r.provincia),e.xp6(7),e.Q6J("ngModel",r.direccion),e.xp6(7),e.Q6J("ngModel",r.cp))},directives:[f._L,A.yS,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,A.rH],styles:[""]}),o})();function dt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xeda."),e.qZA())}function ct(o,i){if(1&o&&(e.TgZ(0,"div",19),e.YNc(1,dt,2,0,"div",33),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.localidad.errors.required)}}function pt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xeda."),e.qZA())}function ut(o,i){if(1&o&&(e.TgZ(0,"div",19),e.YNc(1,pt,2,0,"div",33),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.provincia.errors.required)}}function mt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xeda."),e.qZA())}function gt(o,i){if(1&o&&(e.TgZ(0,"div",19),e.YNc(1,mt,2,0,"div",33),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.direccion.errors.required)}}function ft(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function _t(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Debe tener 5 d\xedgitos."),e.qZA())}function vt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Debe tener 5 d\xedgitos."),e.qZA())}function ht(o,i){if(1&o&&(e.TgZ(0,"div",19),e.YNc(1,ft,2,0,"div",33),e.YNc(2,_t,2,0,"div",33),e.YNc(3,vt,2,0,"div",33),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.cp.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.cp.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.formulario.cp.errors.maxlength)}}let Zt=(()=>{class o{constructor(t,r){this.formBuilder=t,this.router=r,this.submitted=!1;var n="";if(this.localidad="",this.direccion="",this.provincia="",this.cp="",null!=sessionStorage.getItem(o.ubicacion)){n=sessionStorage.getItem(o.ubicacion);var a=JSON.parse(n);this.localidad=a.localidad?a.localidad:"",this.direccion=a.direccion?a.direccion:"",this.provincia=a.provincia?a.provincia:"",this.cp=a.cp?a.cp:""}this.ubicacion=this.formBuilder.group({localidad:[this.localidad,[l.kI.required]],direccion:[this.direccion,[l.kI.required]],provincia:[this.provincia,[l.kI.required]],cp:[this.cp,[l.kI.required,l.kI.minLength(5),l.kI.maxLength(5)]]})}ngOnInit(){}get formulario(){return this.ubicacion.controls}onSubmit(){if(this.submitted=!0,this.ubicacion.valid){var s={localidad:this.ubicacion.value.localidad,direccion:this.ubicacion.value.direccion,provincia:this.ubicacion.value.provincia,cp:this.ubicacion.value.cp};sessionStorage.setItem(o.ubicacion,JSON.stringify(s)),console.log(s),this.router.navigateByUrl("data-management/registro-empresa/resumen"),this.onReset()}}onReset(){this.submitted=!1,this.ubicacion.reset()}}return o.ubicacion="ubicacion",o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(A.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-ubicacion"]],decls:75,vars:5,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-secondary","mr-2"],[1,"col-12","p-2"],[1,"breadcrumb"],["routerLink","/data-management/registro-empresa/representante",1,"item","completed"],[1,"arrow"],[1,"hide-mobile"],[1,"show-mobile"],["routerLink","/data-management/registro-empresa/empresa",1,"item","completed"],["routerLink","/data-management/registro-empresa/ubicacion",1,"item","active"],[1,"item"],[1,"row","px-4","py-4","d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"col-12","col-lg-8","card","p-3"],[1,"mb-3"],[1,"row","d-flex","align-items-center"],[1,"col-12","col-lg-4","d-lg-flex","justify-content-end"],["for","localidad",1,"form-label","fw-bold","m-0"],[1,"col-12","col-lg-8"],["type","text","id","localidad","formControlName","localidad","placeholder","Localidad del centro de trabajo",1,"form-control"],["class","col-12 col-lg-8",4,"ngIf"],["for","provincia",1,"form-label","fw-bold","m-0"],["type","text","id","provincia","formControlName","provincia","placeholder","Provincia del centro de trabajo",1,"form-control"],["for","direccion",1,"form-label","fw-bold","m-0"],["type","text","id","direccion","id","direccion","formControlName","direccion","placeholder","Av/ Avenida, 123",1,"form-control"],["for","cp",1,"form-label","fw-bold","m-0"],["type","text","id","exampleInputText1","aria-describedby","emailHelp","formControlName","cp","placeholder","00000",1,"form-control"],[1,"row","py-2","d-flex","justify-content-center"],[1,"col-6","d-flex","justify-content-center"],["type","submit","value","Aceptar y continuar",1,"btn","btn-outline-primary"],[1,"col-12","col-xl-12"],["type","button","value","Atr\xe1s","routerLink","data-management/registro-empresa/empresa",1,"btn","btn-danger"],[4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Registro de empresas"),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"a",6),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11,"Representante legal"),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Repre..."),e.qZA(),e.qZA(),e.TgZ(14,"a",10),e._UZ(15,"span",7),e.TgZ(16,"span",8),e._uU(17,"Empresa"),e.qZA(),e.TgZ(18,"span",9),e._uU(19,"Empresa"),e.qZA(),e.qZA(),e.TgZ(20,"a",11),e._UZ(21,"span",7),e.TgZ(22,"span",8),e._uU(23,"Ubicaci\xf3n"),e.qZA(),e.TgZ(24,"span",9),e._uU(25,"Ubicaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(26,"a",12),e.TgZ(27,"span",8),e._uU(28,"Resumen"),e.qZA(),e.TgZ(29,"span",9),e._uU(30,"Resumen"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"form",13),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(32,"div",14),e.TgZ(33,"div",15),e.TgZ(34,"div",16),e.TgZ(35,"div",17),e.TgZ(36,"label",18),e._uU(37,"Localidad"),e.qZA(),e.qZA(),e.TgZ(38,"div",19),e._UZ(39,"input",20),e.TgZ(40,"div",0),e.YNc(41,ct,2,1,"div",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",15),e.TgZ(43,"div",16),e.TgZ(44,"div",17),e.TgZ(45,"label",22),e._uU(46,"Provincia:"),e.qZA(),e.qZA(),e.TgZ(47,"div",19),e._UZ(48,"input",23),e.TgZ(49,"div",0),e.YNc(50,ut,2,1,"div",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",15),e.TgZ(52,"div",16),e.TgZ(53,"div",17),e.TgZ(54,"label",24),e._uU(55,"Direcci\xf3n"),e.qZA(),e.qZA(),e.TgZ(56,"div",19),e._UZ(57,"input",25),e.TgZ(58,"div",0),e.YNc(59,gt,2,1,"div",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",15),e.TgZ(61,"div",16),e.TgZ(62,"div",17),e.TgZ(63,"label",26),e._uU(64,"C\xf3digo Postal"),e.qZA(),e.qZA(),e.TgZ(65,"div",19),e._UZ(66,"input",27),e.TgZ(67,"div",0),e.YNc(68,ht,4,3,"div",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",28),e.TgZ(70,"div",29),e._UZ(71,"input",30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(72,"div",0),e.TgZ(73,"div",31),e._UZ(74,"input",32),e.qZA(),e.qZA()),2&t&&(e.xp6(31),e.Q6J("formGroup",r.ubicacion),e.xp6(10),e.Q6J("ngIf",r.submitted&&r.formulario.localidad.errors),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.provincia.errors),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.direccion.errors),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.cp.errors))},directives:[f._L,A.yS,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,b.O5,A.rH],styles:[""]}),o})();class G{constructor(i,t,r,n,a,s){this.id_jornada=i,this.orden_jornada=t,this.fecha_jornada=r,this.actividades=n,this.observaciones=a,this.tiempo_empleado=s}static JornadaJSON(i){return new G(i.id_jornada,i.orden_jornada,i.fecha_jornada,i.actividades,i.observaciones,i.tiempo_empleado)}}var ae=Z(1135);let V=(()=>{class o{constructor(t){this.http=t,this.ruta="http://localhost:8000/api/",this.jornadasArray=new ae.X(""),this.jornadaTrigger=new e.vpe}addJornada(t,r){let n=this.ruta+"addJornada",a=new g.WM({"Content-Type":"application/json"}),s={jornada:t,dni_alumno:r};return console.log(s),this.http.post(n,s,{headers:a})}updateJornada(t,r){let n=this.ruta+"updateJornada",a=new g.WM({"Content-Type":"application/json"}),s={jornada:t,dni_alumno:r};return console.log(s),this.http.post(n,s,{headers:a})}getJornadasInArray(t){this.jornadasArray.next(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),X=(()=>{class o{constructor(t){this.http=t,this.ruta="http://localhost:8000/api/"}escribirDatos(t){let r=this.ruta+"devolverDatosAlumno",n=new g.WM({"Content-Type":"application/json"});return this.http.post(r,{dni:t},{headers:n})}gestionarDepartamento(t){let r=this.ruta+"gestionarDepartamento",n=new g.WM({"Content-Type":"application/json"});return this.http.post(r,{dni:t},{headers:n})}addDepartamento(t,r){let n=this.ruta+"addDepartamento",a=new g.WM({"Content-Type":"application/json"});return this.http.put(n,{dni:t,departamento:r},{headers:a})}sumatorioHorasTotales(t){let r=this.ruta+"sumatorioHorasTotales",n=new g.WM({"Content-Type":"application/json"});return this.http.post(r,{dni:t},{headers:n})}devolverJornadas(t){let r=this.ruta+"devolverJornadas",n=new g.WM({"Content-Type":"application/json"});return this.http.post(r,{dni:t},{headers:n})}descargarPDF(t){return this.http.post(this.ruta+"generarAnexo3",{dni:t},{responseType:"arraybuffer"})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Tt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La fecha no puede estar vac\xeda."),e.qZA())}function bt(o,i){if(1&o&&(e.TgZ(0,"div",24),e.YNc(1,Tt,2,0,"div",25),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.fecha.errors.required)}}function At(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Las actividades no pueden estar vac\xedas. "),e.qZA())}function xt(o,i){if(1&o&&(e.TgZ(0,"div",24),e.YNc(1,At,2,0,"div",25),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.actividad.errors.required)}}function qt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Las horas no pueden estar vac\xedas. "),e.qZA())}function yt(o,i){if(1&o&&(e.TgZ(0,"div",24),e.YNc(1,qt,2,0,"div",25),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.horas.errors.required)}}function Ct(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No se pueden a\xf1adir m\xe1s de 10 horas diarias. "),e.qZA())}function wt(o,i){if(1&o&&(e.TgZ(0,"div",24),e.YNc(1,Ct,2,0,"div",25),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.horas.errors.max)}}function Ut(o,i){1&o&&(e.TgZ(0,"div",24),e.TgZ(1,"div"),e._uU(2,"No se puede introducir una fecha superior a la de hoy. "),e.qZA(),e.qZA())}let Et=(()=>{class o{constructor(t,r,n,a){this.formBuilder=t,this.modalJornadaService=r,this.modalActive=n,this.seguimientoService=a,this.submitted=!1,this.jornadaEdit="",this.dni_alumno="14d",this.jornadasArray=[],this.fecha_invalida=!1,this.jornada=this.formBuilder.group({fecha:["",[l.kI.required]],actividad:["",[l.kI.required]],observaciones:[""],horas:["",[l.kI.required,l.kI.max(10)]]}),this.modalJornadaService.jornadaTrigger.subscribe(s=>{this.jornadaEdit=s})}ngOnInit(){}get formulario(){return this.jornada.controls}closeModel(){this.modalActive.dismiss()}guardarJornada(){if(this.submitted=!0,!this.jornada.valid)return;var t=new Date;if(this.fecha_invalida=new Date(this.jornada.value.fecha)>t,this.fecha_invalida)return;var a=this.jornada.value.observaciones;null==a&&(a="");let d=new G(0,0,this.jornada.value.fecha,this.jornada.value.actividad,a,this.jornada.value.horas);this.modalJornadaService.addJornada(d,this.dni_alumno).subscribe({next:c=>{console.log("se ha insertado"),this.recogerJornadas(),this.closeModel()},error:c=>{console.log("error")}})}recogerJornadas(){this.seguimientoService.devolverJornadas(this.dni_alumno).subscribe({next:t=>{this.jornadasArray=t,this.modalJornadaService.getJornadasInArray(this.jornadasArray)},error:t=>{console.log("error en el nombre",t)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(V),e.Y36(f.Kz),e.Y36(X))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-add"]],decls:45,vars:6,consts:[[1,"modal-header"],[1,"text-center","modal-title"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x-square"],["d","M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],[1,"modal-body"],[1,"col-12","border","border-dark",3,"formGroup","ngSubmit"],[1,"row","py-4","px-2"],[1,"col-12"],[1,"row","text-center","d-flex","justify-content-center","py-3"],[1,"col-4","fw-bold"],[1,"col-8"],["type","date","formControlName","fecha","name","","id","",1,"col-12","form-control"],["name","","formControlName","actividad","id","",1,"col-12","form-control"],["name","","formControlName","observaciones","id","",1,"col-12","form-control"],["type","number","formControlName","horas","name","","id","",1,"col-8","form-control"],[1,"row","text-center","pt-2"],["class","col-12 col-xl-12",4,"ngIf"],[1,"row","text-center"],[1,"row","d-flex","justify-content-center","pt-2"],[1,"col-xl-5","col-5"],[1,"row"],["type","submit","value","Guardar jornada","name","guardar",1,"btn","btn-primary","col-12"],[1,"col-12","col-xl-12"],[4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"A\xf1adir jornada"),e.qZA(),e.TgZ(3,"a",2),e.NdJ("click",function(){return r.closeModel()}),e.O4$(),e.TgZ(4,"svg",3),e._UZ(5,"path",4),e._UZ(6,"path",5),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(7,"div",6),e.TgZ(8,"form",7),e.NdJ("ngSubmit",function(){return r.guardarJornada()}),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"div",11),e._uU(13," Fecha: "),e.qZA(),e.TgZ(14,"div",12),e._UZ(15,"input",13),e.qZA(),e.qZA(),e.TgZ(16,"div",10),e.TgZ(17,"div",11),e._uU(18," Actividades realizadas: "),e.qZA(),e.TgZ(19,"div",12),e._UZ(20,"textarea",14),e.qZA(),e.qZA(),e.TgZ(21,"div",10),e.TgZ(22,"div",11),e._uU(23," Observaciones: "),e.qZA(),e.TgZ(24,"div",12),e._UZ(25,"textarea",15),e.qZA(),e.qZA(),e.TgZ(26,"div",10),e.TgZ(27,"div",11),e._uU(28," Tiempo empleado: "),e.qZA(),e.TgZ(29,"div",12),e._UZ(30,"input",16),e.qZA(),e.qZA(),e.TgZ(31,"div",17),e.YNc(32,bt,2,1,"div",18),e.qZA(),e.TgZ(33,"div",19),e.YNc(34,xt,2,1,"div",18),e.qZA(),e.TgZ(35,"div",19),e.YNc(36,yt,2,1,"div",18),e.qZA(),e.TgZ(37,"div",19),e.YNc(38,wt,2,1,"div",18),e.qZA(),e.TgZ(39,"div",19),e.YNc(40,Ut,3,0,"div",18),e.qZA(),e.TgZ(41,"div",20),e.TgZ(42,"div",21),e.TgZ(43,"div",22),e._UZ(44,"input",23),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("formGroup",r.jornada),e.xp6(24),e.Q6J("ngIf",r.submitted&&r.formulario.fecha.errors),e.xp6(2),e.Q6J("ngIf",r.submitted&&r.formulario.actividad.errors),e.xp6(2),e.Q6J("ngIf",r.submitted&&r.formulario.horas.errors),e.xp6(2),e.Q6J("ngIf",r.submitted&&r.formulario.horas.errors),e.xp6(2),e.Q6J("ngIf",r.fecha_invalida))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,l.wV,b.O5],styles:[""]}),o})();function Mt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La fecha no puede estar vac\xeda."),e.qZA())}function Nt(o,i){if(1&o&&(e.TgZ(0,"div",25),e.YNc(1,Mt,2,0,"div",26),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.fecha.errors.required)}}function Jt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Las actividades no pueden estar vac\xedas. "),e.qZA())}function It(o,i){if(1&o&&(e.TgZ(0,"div",25),e.YNc(1,Jt,2,0,"div",26),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.actividad.errors.required)}}function kt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Las horas no pueden estar vac\xedas. "),e.qZA())}function Pt(o,i){if(1&o&&(e.TgZ(0,"div",25),e.YNc(1,kt,2,0,"div",26),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.horas.errors.required)}}function Ft(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"No se puede trabajar m\xe1s de 10 horas diarias. "),e.qZA())}function St(o,i){if(1&o&&(e.TgZ(0,"div",25),e.YNc(1,Ft,2,0,"div",26),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.horas.errors.max)}}function Dt(o,i){1&o&&(e.TgZ(0,"div",25),e.TgZ(1,"div"),e._uU(2,"No se puede introducir una fecha superior a la de hoy. "),e.qZA(),e.qZA())}function Yt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"div",10),e.TgZ(2,"div",11),e.TgZ(3,"div",12),e._uU(4," Fecha: "),e.qZA(),e.TgZ(5,"div",13),e.TgZ(6,"input",14),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().jornada.fecha_jornada=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",11),e.TgZ(8,"div",12),e._uU(9," Actividades realizadas: "),e.qZA(),e.TgZ(10,"div",13),e.TgZ(11,"textarea",15),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().jornada.actividades=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",11),e.TgZ(13,"div",12),e._uU(14," Observaciones: "),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"textarea",16),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().jornada.observaciones=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"div",12),e._uU(19," Tiempo empleado: "),e.qZA(),e.TgZ(20,"div",13),e.TgZ(21,"input",17),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().jornada.tiempo_empleado=n}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",18),e.YNc(23,Nt,2,1,"div",19),e.qZA(),e.TgZ(24,"div",20),e.YNc(25,It,2,1,"div",19),e.qZA(),e.TgZ(26,"div",20),e.YNc(27,Pt,2,1,"div",19),e.qZA(),e.TgZ(28,"div",20),e.YNc(29,St,2,1,"div",19),e.qZA(),e.TgZ(30,"div",20),e.YNc(31,Dt,3,0,"div",19),e.qZA(),e.TgZ(32,"div",21),e.TgZ(33,"div",22),e.TgZ(34,"div",23),e._UZ(35,"input",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.jornada.fecha_jornada),e.xp6(5),e.Q6J("ngModel",t.jornada.actividades),e.xp6(5),e.Q6J("ngModel",t.jornada.observaciones),e.xp6(5),e.Q6J("ngModel",t.jornada.tiempo_empleado),e.xp6(2),e.Q6J("ngIf",t.submitted&&t.formulario.fecha.errors),e.xp6(2),e.Q6J("ngIf",t.submitted&&t.formulario.actividad.errors),e.xp6(2),e.Q6J("ngIf",t.submitted&&t.formulario.horas.errors),e.xp6(2),e.Q6J("ngIf",t.submitted&&t.formulario.horas.errors),e.xp6(2),e.Q6J("ngIf",t.fecha_invalida)}}let Rt=(()=>{class o{constructor(t,r,n,a){this.modalActive=t,this.formBuilder=r,this.modalJornadaService=n,this.seguimientoService=a,this.submitted=!1,this.dni_alumno="14d",this.arrayJornadas=[],this.fecha_invalida=!1,this.editarJornada=this.formBuilder.group({fecha:["",[l.kI.required]],actividad:["",[l.kI.required]],observaciones:[""],horas:["",[l.kI.required,l.kI.max(10)]]}),this.modalJornadaService.jornadaTrigger.subscribe(s=>{this.jornada=s,console.log(this.jornada)})}ngOnInit(){}get formulario(){return this.editarJornada.controls}closeModel(){this.modalActive.dismiss()}editJornada(){if(this.submitted=!0,this.editarJornada.valid&&null!=this.jornada){var t=this.jornada.id_jornada,r=this.jornada.orden_jornada,n=new Date;if(this.fecha_invalida=new Date(this.jornada.fecha_jornada)>n,this.fecha_invalida)return;var p=new G(t,r,this.jornada.fecha_jornada,this.jornada.actividades,this.jornada.observaciones,this.jornada.tiempo_empleado);this.modalJornadaService.updateJornada(p,this.dni_alumno).subscribe({next:u=>{console.log("La jornada se ha actualizado correctamente."),this.recogerJornadas(),this.closeModel()},error:u=>{console.log("error en la actualizacion de la jornada",u)}})}}recogerJornadas(){this.seguimientoService.devolverJornadas(this.dni_alumno).subscribe({next:t=>{this.arrayJornadas=t,this.modalJornadaService.getJornadasInArray(this.arrayJornadas)},error:t=>{console.log("error en el nombre",t)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.Kz),e.Y36(l.qu),e.Y36(V),e.Y36(X))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-editar"]],decls:10,vars:2,consts:[[1,"modal-header"],[1,"text-center","modal-title"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x-square"],["d","M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],[1,"modal-body"],[1,"col-12","border","border-dark",3,"formGroup","ngSubmit"],["class","row py-4 px-2",4,"ngIf"],[1,"row","py-4","px-2"],[1,"col-12"],[1,"row","text-center","d-flex","justify-content-center","py-3"],[1,"col-4","fw-bold"],[1,"col-8"],["type","date","formControlName","fecha","name","","id","",1,"col-12","form-control",3,"ngModel","ngModelChange"],["name","","formControlName","actividad","id","",1,"col-12","form-control",3,"ngModel","ngModelChange"],["name","","formControlName","observaciones","id","",1,"col-12","form-control",3,"ngModel","ngModelChange"],["type","number","formControlName","horas","name","","id","",1,"col-8","form-control",3,"ngModel","ngModelChange"],[1,"row","text-center","pt-2"],["class","col-12 col-xl-12",4,"ngIf"],[1,"row","text-center"],[1,"row","d-flex","justify-content-center","pt-2"],[1,"col-xl-5","col-5"],[1,"row"],["type","submit","value","Guardar jornada","name","guardar",1,"btn","btn-primary","col-12"],[1,"col-12","col-xl-12"],[4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Editar jornada"),e.qZA(),e.TgZ(3,"a",2),e.NdJ("click",function(){return r.closeModel()}),e.O4$(),e.TgZ(4,"svg",3),e._UZ(5,"path",4),e._UZ(6,"path",5),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(7,"div",6),e.TgZ(8,"form",7),e.NdJ("ngSubmit",function(){return r.editJornada()}),e.YNc(9,Yt,36,9,"div",8),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("formGroup",r.editarJornada),e.xp6(1),e.Q6J("ngIf",null!=r.jornada))},directives:[l._Y,l.JL,l.sg,b.O5,l.Fj,l.JJ,l.u,l.wV],styles:[""]}),o})();function Lt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El Departamento no puede estar vac\xedo."),e.qZA())}function Qt(o,i){if(1&o&&(e.TgZ(0,"div",28),e.YNc(1,Lt,2,0,"div",29),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.depto.errors.required)}}function jt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"form",20),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().guardarDepartamento()}),e.TgZ(2,"div",21),e._uU(3," Departamento: "),e.qZA(),e.TgZ(4,"div",22),e._UZ(5,"input",23),e.qZA(),e.TgZ(6,"div",24),e._UZ(7,"input",25),e.qZA(),e.TgZ(8,"div",26),e.YNc(9,Qt,2,1,"div",27),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.deptoForm),e.xp6(8),e.Q6J("ngIf",t.submitted&&t.formulario.depto.errors)}}function Ot(o,i){if(1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",8),e._uU(2," Departamento: "),e.qZA(),e.TgZ(3,"div",9),e._uU(4),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(4),e.hij(" ",t.departamento," ")}}function Bt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"input",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().descargarPDF()}),e.qZA(),e.qZA()}}function Ht(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"input",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().verPDF()}),e.qZA(),e.qZA()}}function Gt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr",33),e.TgZ(1,"td",34),e._uU(2),e.qZA(),e.TgZ(3,"td",34),e._uU(4),e.qZA(),e.TgZ(5,"td",34),e._uU(6),e.qZA(),e.TgZ(7,"td",34),e._uU(8),e.qZA(),e.TgZ(9,"td",34),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"button",35),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().editar(a)}),e.O4$(),e.TgZ(13,"svg",36),e._UZ(14,"path",37),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(2),e.hij(" ",t.orden_jornada," "),e.xp6(2),e.Oqu(t.fecha_jornada),e.xp6(2),e.Oqu(t.actividades),e.xp6(2),e.Oqu(t.observaciones),e.xp6(2),e.hij(" ",t.tiempo_empleado," ")}}let zt=(()=>{class o{constructor(t,r,n,a,s,d){var c;this.formBuilder=t,this.router=r,this.modal=n,this.modalJornadaService=a,this.seguimientoService=s,this.storageUser=d,this.arrayJornadas=[],this.departamentoEstablecido=!1,this.submitted=!1,this.horasTotales=0,this.botonDescargar=!1,this.botonVer=!1,this.usuario=d.getUser(),this.dni_alumno=null===(c=this.usuario)||void 0===c?void 0:c.dni,this.deptoForm=this.formBuilder.group({depto:["",[l.kI.required]]})}ngOnInit(){this.arrayJornadas=this.rellenarArray(),this.ponerNombre(),this.gestionDepartamento(),this.sumatorioHorasTotales(),this.getArrayJornadas()}get formulario(){return this.deptoForm.controls}getArrayJornadas(){this.modalJornadaService.jornadasArray.subscribe(t=>{this.arrayJornadas=t;var r=this.arrayJornadas.length;this.sumatorioHorasTotales(),r>=5&&r%5==0&&(this.botonDescargar=!0,this.botonVer=!1),r>5&&r%5!=0&&(this.botonVer=!0,this.botonDescargar=!1)})}nuevaJornada(){this.modal.open(Et,{size:"m"})}rellenarArray(){return this.seguimientoService.devolverJornadas(this.dni_alumno).subscribe({next:t=>{this.arrayJornadas=t;var r=this.arrayJornadas.length;r>=5&&r%5==0&&(this.botonDescargar=!0,this.botonVer=!1),r>5&&r%5!=0&&(this.botonVer=!0,this.botonDescargar=!1)},error:t=>{console.log("error en el nombre",t)}}),this.arrayJornadas}editar(t){this.modal.open(Rt,{size:"m"}),this.modalJornadaService.jornadaTrigger.emit(t)}ponerNombre(){this.seguimientoService.escribirDatos(this.dni_alumno).subscribe({next:t=>{this.nombre_alumno=t[0].nombre_alumno+" "+t[0].apellidos_alumno,this.nombre_empresa=t[0].nombre_empresa},error:t=>{console.log("error en el nombre",t)}})}gestionDepartamento(){this.seguimientoService.gestionarDepartamento(this.dni_alumno).subscribe({next:t=>{""!=t[0].departamento?(this.departamentoEstablecido=!0,this.departamento=t[0].departamento):(console.log("El departamento est\xe1 vac\xedo."),this.departamentoEstablecido=!1)},error:t=>{console.log("error departamento")}})}guardarDepartamento(){this.submitted=!0,this.deptoForm.valid&&(this.departamento=this.deptoForm.value.depto,this.seguimientoService.addDepartamento(this.dni_alumno,this.departamento).subscribe({next:t=>{this.departamentoEstablecido=!0},error:t=>{console.log("error en add el departamento.",t)}}))}sumatorioHorasTotales(){this.seguimientoService.sumatorioHorasTotales(this.dni_alumno).subscribe({next:t=>{this.horasTotales=t},error:t=>{console.log("No han llegado las horas")}})}descargarPDF(){this.seguimientoService.descargarPDF(this.dni_alumno).subscribe({next:t=>{console.log("Se ha descargado");const r=new Blob([t],{type:"application/octet-stream"});I.saveAs(r,"hoja_seguimiento.docx")},error:t=>{console.log("No se ha descargado el documento")}})}verPDF(){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(A.F0),e.Y36(f.FF),e.Y36(V),e.Y36(X),e.Y36(m.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-seguimiento"]],decls:54,vars:8,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-secondary","mr-2"],[1,"col-6"],[1,"col-xl-3","col-12"],[1,"col-xl-9","col-12","border-bottom"],["class","row",4,"ngIf"],[1,"col-xl-4","col-12"],[1,"col-xl-8","col-12","border-bottom"],[1,"card","p-3"],[1,"col-12","col-xl-2"],[1,"h3"],[1,"col-xl-8","col-6","text-center"],["type","submit","value","Nueva jornada","name","nuevaJornada",1,"btn","btn-outline-primary",3,"click"],["class","col-xl-2 col-6 text-center",4,"ngIf"],[1,"col-12","p-2","table-responsive"],[1,"table","table-striped","table-hover","text-center"],[1,"table-primary","text-white"],["class","bg-primary bg-opacity-50 text-center",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],[1,"col-12","col-xl-3"],[1,"col-12","col-xl-5"],["type","text","placeholder","Inform\xe1tica...","formControlName","depto"],[1,"col-12","col-xl-4"],["type","submit","name","","value","Guardar",1,"btn","btn-outline-primary"],[1,"row","text-center","pt-2"],["class","col-12 col-xl-12",4,"ngIf"],[1,"col-12","col-xl-12"],[4,"ngIf"],[1,"col-xl-2","col-6","text-center"],["type","button","value","Descargar PDF","name","descargarPDF",1,"btn","btn-outline-primary",3,"click"],["type","button","value","Ver PDF","name","verPDF",1,"btn","btn-outline-primary",3,"click"],[1,"bg-primary","bg-opacity-50","text-center"],[2,"max-width","15em"],[1,"btn","btn-outline-warning","px-2","py-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-fill"],["d","M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Seguimiento de pr\xe1cticas"),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",0),e.TgZ(8,"div",5),e._uU(9," Alumno: "),e.qZA(),e.TgZ(10,"div",6),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",4),e.TgZ(13,"div",0),e.TgZ(14,"div",5),e._uU(15," Empresa: "),e.qZA(),e.TgZ(16,"div",6),e._uU(17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",4),e.YNc(19,jt,10,2,"div",7),e.YNc(20,Ot,5,1,"div",7),e.qZA(),e.TgZ(21,"div",4),e.TgZ(22,"div",0),e.TgZ(23,"div",8),e._uU(24," Horas totales: "),e.qZA(),e.TgZ(25,"div",9),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",10),e.TgZ(28,"div",0),e.TgZ(29,"div",11),e.TgZ(30,"h2",12),e._uU(31,"JORNADAS:"),e.qZA(),e.qZA(),e.TgZ(32,"div",13),e.TgZ(33,"input",14),e.NdJ("click",function(){return r.nuevaJornada()}),e.qZA(),e.qZA(),e.YNc(34,Bt,2,0,"div",15),e.YNc(35,Ht,2,0,"div",15),e.qZA(),e.TgZ(36,"div",0),e.TgZ(37,"div",16),e.TgZ(38,"table",17),e.TgZ(39,"thead",18),e.TgZ(40,"tr"),e.TgZ(41,"th"),e._uU(42,"Jornada"),e.qZA(),e.TgZ(43,"th"),e._uU(44,"Fecha"),e.qZA(),e.TgZ(45,"th"),e._uU(46,"Actividades realizadas"),e.qZA(),e.TgZ(47,"th"),e._uU(48,"Observaciones"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"Horas"),e.qZA(),e._UZ(51,"th"),e.qZA(),e.qZA(),e.TgZ(52,"tbody"),e.YNc(53,Gt,15,5,"tr",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(11),e.hij(" ",r.nombre_alumno," "),e.xp6(6),e.hij(" ",r.nombre_empresa," "),e.xp6(2),e.Q6J("ngIf",!r.departamentoEstablecido),e.xp6(1),e.Q6J("ngIf",r.departamentoEstablecido),e.xp6(6),e.hij(" ",r.horasTotales," "),e.xp6(8),e.Q6J("ngIf",r.botonDescargar),e.xp6(1),e.Q6J("ngIf",r.botonVer),e.xp6(18),e.Q6J("ngForOf",r.arrayJornadas))},directives:[f._L,b.O5,b.sg,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],styles:[""]}),o})();class S{constructor(i,t,r,n,a,s,d,c){this.dni=i,this.email=t,this.nombre=r,this.apellidos=n,this.password1=a,this.password2=s,this.roles=d,this.personaAux=c}static userJSON(i){return new S(i.dni,i.email,i.nombre,i.apellidos,i.password1,i.password2,i.roles,i.personaAux)}}let se=(()=>{class o{constructor(t){this.http=t,this.ruta="http://127.0.0.1:8000/api/",this.profesoresArray=new ae.X("")}getProfesores(t){return this.http.get(this.ruta+"listarProfesores/"+t)}getProfesor(t){return this.http.get(this.ruta+"listarProfesor/"+t)}getProfesorEdit(t){return this.http.get(this.ruta+"listarProfesorEditar/"+t)}eliminarProfesor(t){let r=this.ruta+"eliminarProfesor/"+t,n=new g.WM({"Content-Type":"application/json"});return this.http.delete(r,{headers:n})}editarUser(t){let r=this.ruta+"modificarProfesor",n=new g.WM({"Content-Type":"application/json"});return this.http.post(r,t,{headers:n}).pipe((0,L.U)(a=>S.userJSON(t)))}registrarProfesor(t){let r=this.ruta+"addProfesor",n=new g.WM({"Content-Type":"application/json"});return this.http.post(r,t,{headers:n}).pipe((0,L.U)(a=>S.userJSON(t)))}getProfesoresInArray(t){this.profesoresArray.next(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function $t(o,i){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",24),e.qZA()),2&o){const t=e.oxw().index;e.xp6(1),e.MGl("id","roles",t,"")}}function Wt(o,i){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",25),e.qZA()),2&o){const t=e.oxw().index;e.xp6(1),e.MGl("id","roles",t,"")}}function Vt(o,i){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",26),e.qZA()),2&o){const t=e.oxw().index;e.xp6(1),e.MGl("id","roles",t,"")}}function Xt(o,i){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",27),e.qZA()),2&o){const t=e.oxw().index;e.xp6(1),e.MGl("id","roles",t,"")}}function Kt(o,i){if(1&o&&(e.TgZ(0,"div",22),e.YNc(1,$t,2,1,"div",23),e.YNc(2,Wt,2,1,"div",23),e.YNc(3,Vt,2,1,"div",23),e.YNc(4,Xt,2,1,"div",23),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",1==t),e.xp6(1),e.Q6J("ngIf",2==t),e.xp6(1),e.Q6J("ngIf",3==t),e.xp6(1),e.Q6J("ngIf",4==t)}}function eo(o,i){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,Kt,5,4,"div",21),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngForOf",t.roles)}}function to(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h1",3),e._uU(3),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().CloseModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"form",6),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"label",9),e.TgZ(10,"b"),e._uU(11,"Nombre:"),e.qZA(),e.qZA(),e._UZ(12,"input",10),e.qZA(),e.TgZ(13,"div",11),e.TgZ(14,"label",12),e.TgZ(15,"b"),e._uU(16,"Apellido:"),e.qZA(),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"label",14),e.TgZ(20,"b"),e._uU(21,"DNI:"),e.qZA(),e.qZA(),e._UZ(22,"input",15),e.qZA(),e.TgZ(23,"div",11),e.TgZ(24,"label",16),e.TgZ(25,"b"),e._uU(26,"Email:"),e.qZA(),e.qZA(),e._UZ(27,"input",17),e.qZA(),e.qZA(),e._UZ(28,"hr",18),e.TgZ(29,"div",7),e.TgZ(30,"label",19),e.TgZ(31,"b"),e._uU(32,"Roles:"),e.qZA(),e.qZA(),e.YNc(33,eo,2,1,"div",20),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.hij("Perfil de ",t.profesor[0].nombre," "),e.xp6(9),e.s9C("value",t.profesor[0].nombre),e.xp6(5),e.s9C("value",t.profesor[0].apellidos),e.xp6(5),e.s9C("value",t.profesor[0].dni),e.xp6(5),e.s9C("value",t.profesor[0].email),e.xp6(6),e.Q6J("ngForOf",t.profesor)}}function oo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El nombre no puede estar vacio"),e.qZA())}function ro(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,oo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.nombre.errors.required)}}function io(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El apellido no puede estar vacio"),e.qZA())}function no(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,io,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.apellido.errors.required)}}function ao(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El dni no puede estar vacio"),e.qZA())}function so(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ao,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.dni.errors.required)}}function lo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El email no puede estar vacio"),e.qZA())}function co(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El email debe ser un email valido"),e.qZA())}function po(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,lo,2,0,"div",23),e.YNc(2,co,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.email)}}function uo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a no puede estar vacia"),e.qZA())}function mo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a debe tener al menos un d\xedgito, una min\xfascula, una may\xfascula y tener como m\xednimo 8 caracteres"),e.qZA())}function go(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,uo,2,0,"div",23),e.YNc(2,mo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.password1.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.password1.errors.pattern)}}function fo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a no puede estar vacia"),e.qZA())}function _o(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a debe tener al menos un d\xedgito, una min\xfascula, una may\xfascula y tener como m\xednimo 8 caracteres"),e.qZA())}function vo(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,fo,2,0,"div",23),e.YNc(2,_o,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.password2.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.password2.errors.pattern)}}function ho(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h1",3),e._uU(3,"Crear Usuario: "),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().CloseModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"form",28),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmitCreate()}),e.TgZ(7,"div",7),e.TgZ(8,"div",29),e.TgZ(9,"label",30),e.TgZ(10,"b"),e._uU(11,"Nombre:"),e.qZA(),e.qZA(),e._UZ(12,"input",31),e.YNc(13,ro,2,1,"div",23),e.qZA(),e.qZA(),e.TgZ(14,"div",29),e.TgZ(15,"label",32),e.TgZ(16,"b"),e._uU(17,"Apellido:"),e.qZA(),e.qZA(),e._UZ(18,"input",33),e.YNc(19,no,2,1,"div",23),e.qZA(),e.TgZ(20,"div",29),e.TgZ(21,"label",34),e.TgZ(22,"b"),e._uU(23,"DNI:"),e.qZA(),e.qZA(),e._UZ(24,"input",35),e.YNc(25,so,2,1,"div",23),e.qZA(),e.TgZ(26,"div",29),e.TgZ(27,"label",36),e.TgZ(28,"b"),e._uU(29,"Email:"),e.qZA(),e.qZA(),e._UZ(30,"input",37),e.YNc(31,po,3,2,"div",23),e.qZA(),e.TgZ(32,"div",38),e.TgZ(33,"div",8),e.TgZ(34,"label",39),e.TgZ(35,"b"),e._uU(36,"Contrase\xf1a:"),e.qZA(),e.qZA(),e._UZ(37,"input",40),e.YNc(38,go,3,2,"div",23),e.qZA(),e.TgZ(39,"div",29),e.TgZ(40,"label",41),e.TgZ(41,"b"),e._uU(42,"Repite la Contrase\xf1a:"),e.qZA(),e.qZA(),e._UZ(43,"input",42),e.YNc(44,vo,3,2,"div",23),e.qZA(),e.TgZ(45,"p",43),e.TgZ(46,"b"),e._uU(47,"Roles:"),e.qZA(),e.qZA(),e.TgZ(48,"div",44),e.TgZ(49,"label",45),e._UZ(50,"input",46),e._uU(51," Director"),e.qZA(),e.TgZ(52,"label",47),e._UZ(53,"input",48),e._uU(54," Jefe de estudios"),e.qZA(),e.TgZ(55,"label",49),e._UZ(56,"input",50),e._uU(57," Tutor"),e.qZA(),e.TgZ(58,"label",51),e._UZ(59,"input",52),e._uU(60," Profesor"),e.qZA(),e.qZA(),e.qZA(),e._UZ(61,"hr",18),e.TgZ(62,"div",53),e._UZ(63,"input",54),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("formGroup",t.datosProfesor),e.xp6(7),e.Q6J("ngIf",t.submitted&&t.formulario.nombre.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.apellido.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.dni.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.email.errors),e.xp6(7),e.Q6J("ngIf",t.submitted&&t.formulario.password1.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.password2.errors)}}function Zo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El nombre no puede estar vacio"),e.qZA())}function To(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Zo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.nombre.errors.required)}}function bo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El apellido no puede estar vacio"),e.qZA())}function Ao(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,bo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.apellido.errors.required)}}function xo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El dni no puede estar vacio"),e.qZA())}function qo(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,xo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.dni.errors.required)}}function yo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El email no puede estar vacio"),e.qZA())}function Co(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El email debe ser un email valido"),e.qZA())}function wo(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,yo,2,0,"div",23),e.YNc(2,Co,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.email)}}function Uo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a no puede estar vacia"),e.qZA())}function Eo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a debe tener al menos un d\xedgito, una min\xfascula, una may\xfascula y tener como m\xednimo 8 caracteres"),e.qZA())}function Mo(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Uo,2,0,"div",23),e.YNc(2,Eo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.password1.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.password1.errors.pattern)}}function No(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a no puede estar vacia"),e.qZA())}function Jo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a debe tener al menos un d\xedgito, una min\xfascula, una may\xfascula y tener como m\xednimo 8 caracteres"),e.qZA())}function Io(o,i){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,No,2,0,"div",23),e.YNc(2,Jo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.password2.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.password2.errors.pattern)}}function ko(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h1",3),e._uU(3,"Editar Profesor: "),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().CloseModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"form",28),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmitEdit()}),e.TgZ(7,"div",7),e.TgZ(8,"div",29),e.TgZ(9,"label",30),e.TgZ(10,"b"),e._uU(11,"Nombre:"),e.qZA(),e.qZA(),e._UZ(12,"input",31),e.YNc(13,To,2,1,"div",23),e.qZA(),e.qZA(),e.TgZ(14,"div",29),e.TgZ(15,"label",32),e.TgZ(16,"b"),e._uU(17,"Apellido:"),e.qZA(),e.qZA(),e._UZ(18,"input",33),e.YNc(19,Ao,2,1,"div",23),e.qZA(),e.TgZ(20,"div",29),e.TgZ(21,"label",34),e.TgZ(22,"b"),e._uU(23,"DNI:"),e.qZA(),e.qZA(),e._UZ(24,"input",35),e.YNc(25,qo,2,1,"div",23),e.qZA(),e.TgZ(26,"div",29),e.TgZ(27,"label",36),e.TgZ(28,"b"),e._uU(29,"Email:"),e.qZA(),e.qZA(),e._UZ(30,"input",37),e.YNc(31,wo,3,2,"div",23),e.qZA(),e.TgZ(32,"div",38),e.TgZ(33,"div",8),e.TgZ(34,"label",39),e.TgZ(35,"b"),e._uU(36,"Contrase\xf1a:"),e.qZA(),e.qZA(),e._UZ(37,"input",40),e.YNc(38,Mo,3,2,"div",23),e.qZA(),e.TgZ(39,"div",29),e.TgZ(40,"label",41),e.TgZ(41,"b"),e._uU(42,"Repite la Contrase\xf1a:"),e.qZA(),e.qZA(),e._UZ(43,"input",42),e.YNc(44,Io,3,2,"div",23),e.qZA(),e.TgZ(45,"p",43),e.TgZ(46,"b"),e._uU(47,"Roles:"),e.qZA(),e.qZA(),e.TgZ(48,"div",44),e.TgZ(49,"label",45),e._UZ(50,"input",46),e._uU(51," Director"),e.qZA(),e.TgZ(52,"label",47),e._UZ(53,"input",48),e._uU(54," Jefe de estudios"),e.qZA(),e.TgZ(55,"label",49),e._UZ(56,"input",50),e._uU(57," Tutor"),e.qZA(),e.TgZ(58,"label",51),e._UZ(59,"input",55),e._uU(60," Profesor"),e.qZA(),e.qZA(),e.qZA(),e._UZ(61,"hr",18),e.TgZ(62,"div",53),e._UZ(63,"input",56),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("formGroup",t.datosProfesor),e.xp6(7),e.Q6J("ngIf",t.submitted&&t.formulario.nombre.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.apellido.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.dni.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.email.errors),e.xp6(7),e.Q6J("ngIf",t.submitted&&t.formulario.password1.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.password2.errors)}}let K=(()=>{class o{constructor(t,r,n,a,s){var d;this.formBuilder=t,this.modalActive=r,this.profesorService=n,this.toastr=a,this.storageUser=s,this.profesor=[],this.roles=[],this.profesoresArray=[],this.submitted=!1,this.numero=sessionStorage.getItem("numPeticion"),this.usuario=s.getUser(),this.dni=null===(d=this.usuario)||void 0===d?void 0:d.dni,this.datosProfesor=this.formBuilder.group({dni:["",[l.kI.required]],email:["",[l.kI.required,l.kI.email]],nombre:["",[l.kI.required]],apellido:["",[l.kI.required]],password1:["",[l.kI.required]],password2:["",[l.kI.required]]})}get formulario(){return this.datosProfesor.controls}ngOnInit(){"0"==this.numero?this.verProfesor():"2"==this.numero&&this.verProfesorEdit()}verProfesor(){const t=sessionStorage.getItem("dniProfesor");this.profesorService.getProfesor(t).subscribe(r=>{this.profesor=r})}verProfesorEdit(){const t=sessionStorage.getItem("dniProfesor");this.profesorService.getProfesorEdit(t).subscribe(r=>{this.profesor=r,sessionStorage.setItem("dniAnt",this.profesor[0].personaAux),this.updateForm()})}updateForm(){this.datosProfesor.controls.dni.setValue(this.profesor[0].dni),this.datosProfesor.controls.email.setValue(this.profesor[0].email),this.datosProfesor.controls.nombre.setValue(this.profesor[0].nombre),this.datosProfesor.controls.apellido.setValue(this.profesor[0].apellidos),this.datosProfesor.controls.password1.setValue(this.profesor[0].password1),this.datosProfesor.controls.password2.setValue(this.profesor[0].password2);let t=document.querySelectorAll("#rolesUsers input");this.profesor[0].roles.forEach(r=>{t.forEach(n=>{if(n){let a=parseInt(n.value);r==a&&(n.checked=!0)}})})}onSubmitEdit(){if(this.submitted=!0,this.datosProfesor.invalid)return;this.roles=document.querySelectorAll("#rolesUsers input");let t=[],r=0,n=!1;if(this.roles.forEach(a=>{a.checked&&(n=!0,t[r]=parseInt(a.value),r++)}),0==n)this.toastr.error("Tienes que poner un rol como minimo","Fallo");else{let a=sessionStorage.getItem("dniAnt"),s=new S(this.datosProfesor.value.dni,this.datosProfesor.value.email,this.datosProfesor.value.nombre,this.datosProfesor.value.apellido,this.datosProfesor.value.password1,this.datosProfesor.value.password2,t,a);this.profesorService.editarUser(s).subscribe({next:()=>{this.toastr.success("Profesor Editado","Logrado!"),this.recogerProfesores(),this.CloseModal()},error:d=>{this.toastr.error("Error al editar","Error")}})}}CloseModal(){this.modalActive.dismiss()}onSubmitCreate(){let t=0,r=[],n=!1;if(this.submitted=!0,!this.datosProfesor.invalid)if(this.roles=document.querySelectorAll("#rolesUsers input"),this.roles.forEach(a=>{a.checked&&(n=!0,r[t]=parseInt(a.value),t++)}),0==n)this.toastr.error("Tienes que poner un rol como minimo","Fallo");else{let a=new S(this.datosProfesor.value.dni,this.datosProfesor.value.email,this.datosProfesor.value.nombre,this.datosProfesor.value.apellido,this.datosProfesor.value.password1,this.datosProfesor.value.password2,r,this.dni);console.log(a),this.profesorService.registrarProfesor(a).subscribe({next:()=>{this.toastr.success("Profesor Creado","Logrado!"),this.recogerProfesores(),this.CloseModal()},error:s=>{this.toastr.error("El profesor no ha podido crearse","Fallo")}})}}recogerProfesores(){this.profesorService.getProfesores(this.dni).subscribe({next:t=>{this.profesoresArray=t,this.profesorService.getProfesoresInArray(this.profesoresArray)},error:t=>{this.toastr.error("Los profesores no han podido mostrarse","Fallo")}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(f.Kz),e.Y36(se),e.Y36(M._W),e.Y36(m.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-profesores"]],decls:3,vars:3,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"modal-header"],[1,"modal-title","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"needs-validation"],[1,"row","g-3"],[1,"col-md-4"],["for","cif",1,"form-label"],["type","text","id","nombre","readonly","",1,"form-control-plaintext",3,"value"],[1,"col-md-8"],["for","nombre_empresa",1,"form-label"],["type","text","id","apellido","readonly","",1,"form-control-plaintext",3,"value"],["for","telefono",1,"form-label"],["type","text","id","dni","readonly","",1,"form-control-plaintext",3,"value"],["for","email_empresa",1,"form-label"],["type","text","id","email_profesor","readonly","",1,"form-control-plaintext",3,"value"],[1,"my-3"],["for","roles",1,"form-label"],["class","col-md-4",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngFor","ngForOf"],[1,"col-md-9"],[4,"ngIf"],["type","text","value","Director",1,"form-control-plaintext",3,"id"],["type","text","value","Jefe de estudios",1,"form-control-plaintext",3,"id"],["type","text","value","Tutor",1,"form-control-plaintext",3,"id"],["type","text","value","Profesor",1,"form-control-plaintext",3,"id"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"col-md-8","pb-2"],["for","nombre",1,"form-label"],["type","text","id","nombre","placeholder","Maria","formControlName","nombre",1,"form-control"],["for","apellido",1,"form-label"],["type","text","id","nombre_empresa","placeholder","Fernandez","formControlName","apellido",1,"form-control"],["for","dni",1,"form-label"],["type","text","id","dni","placeholder","00000000X","formControlName","dni",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","placeholder","ejemplo@gmail.com","formControlName","email",1,"form-control"],[1,"row","g-3","pb-2"],["for","password1",1,"form-label"],["type","password","id","password1","formControlName","password1",1,"form-control"],["for","password2",1,"form-label"],["type","password","id","password2","formControlName","password2",1,"form-control"],[1,"form-label"],["id","rolesUsers",1,"col","pb-2","d-flex","justify-content-between"],["for","cbox1"],["type","checkbox","id","roles","value","1"],["for","cbox2"],["type","checkbox","id","roles","value","2"],["for","cbox3"],["type","checkbox","id","roles","value","3"],["for","cbox4"],["type","checkbox","id","roles","value","4","checked",""],[1,"row","d-flex","align-items-center","justify-content-center","modal-footer"],["type","submit","value","Crear Usuario",1,"w-50","btn","btn-primary","btn-md"],["type","checkbox","id","roles","value","4"],["type","submit","value","Guardar cambios",1,"w-50","btn","btn-primary","btn-md"]],template:function(t,r){1&t&&(e.YNc(0,to,34,6,"div",0),e.YNc(1,ho,64,7,"div",0),e.YNc(2,ko,64,7,"div",0)),2&t&&(e.Q6J("ngIf","0"==r.numero),e.xp6(1),e.Q6J("ngIf","1"==r.numero),e.xp6(1),e.Q6J("ngIf","2"==r.numero))},directives:[b.O5,l._Y,l.JL,l.F,b.sg,l.sg,l.Fj,l.JJ,l.u],styles:[""]}),o})();function Po(o,i){if(1&o){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().eliminarProfesor(n.dni)}),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"use",16),e.qZA(),e.qZA()}}function Fo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().verProfesor(a.dni)}),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().verProfesor(a.dni)}),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"td",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().verProfesor(a.dni)}),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"td",8),e.TgZ(11,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().modificarProfesor(a.dni)}),e.O4$(),e.TgZ(12,"svg",12),e._UZ(13,"use",13),e.qZA(),e.qZA(),e.YNc(14,Po,3,0,"button",14),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,r=e.oxw();e.xp6(3),e.Oqu(t.apellidos),e.xp6(3),e.hij(" ",t.nombre," "),e.xp6(3),e.Oqu(t.dni),e.xp6(5),e.Q6J("ngIf",t.dni!=r.dni)}}const So=[{path:"asig-alum-empresa",component:R},{path:"registro-empresa",component:ze},{path:"registro-empresa/representante",component:at},{path:"registro-empresa/empresa",component:Ge},{path:"registro-empresa/ubicacion",component:Zt},{path:"registro-empresa/resumen",component:lt},{path:"seguimiento",component:zt},{path:"gestion-empresas",component:me},{path:"crud-anexos",component:Ie},{path:"crud-profesores",component:(()=>{class o{constructor(t,r,n,a,s,d){var c;this.profesoresService=t,this.router=r,this.toastr=n,this.modal=a,this.storageUser=s,this.dialogService=d,this.profesores=[],this.profesor=[],this.usuario=s.getUser(),this.dni=null===(c=this.usuario)||void 0===c?void 0:c.dni}ngOnInit(){this.verProfesores(),this.getArrayProfesores()}verProfesores(){this.profesoresService.getProfesores(this.dni).subscribe(t=>{this.profesores=t})}getArrayProfesores(){this.profesoresService.profesoresArray.subscribe(t=>{this.profesores=t})}registrarProfesor(){sessionStorage.setItem("numPeticion","1"),this.modal.open(K,{size:"md"})}verProfesor(t){sessionStorage.setItem("numPeticion","0"),sessionStorage.setItem("dniProfesor",t),this.modal.open(K,{size:"md"})}eliminarProfesor(t){var r=this;return(0,E.Z)(function*(){(yield r.dialogService.confirmacion("Eliminar","\xbfEst\xe1 seguro de que desea eliminar el profesor "+t+"?"))&&r.profesoresService.eliminarProfesor(t).subscribe({next:a=>{r.toastr.success("Profesor Eliminado","Eliminado"),r.verProfesores()},error:a=>{console.log(a),r.toastr.error("El profesor no ha podido eliminarse","Fallo")}})})()}modificarProfesor(t){sessionStorage.setItem("numPeticion","2"),sessionStorage.setItem("dniProfesor",t),this.modal.open(K,{size:"md"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(se),e.Y36(A.F0),e.Y36(M._W),e.Y36(f.FF),e.Y36(m.L),e.Y36(v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-crud-profesores"]],decls:27,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"col-12","d-flex","justify-content-between","pb-3","page-header"],[1,"h2"],[1,"btn","btn-outline-primary","float-end",3,"click"],[1,"table","table-striped","table-hover","text-center"],[1,"table-primary","text-white"],["scope","col"],[4,"ngFor","ngForOf"],["scope","col",1,"cursor-pointer",3,"click"],["type","submit",1,"btn","btn-outline-warning","px-2","py-1","me-2",3,"click"],["width","16","height","16",1,"bi"],[0,"xlink","href","#lapiz"],["class","btn btn-outline-danger px-2 py-1 me-2","type","submit",3,"click",4,"ngIf"],["type","submit",1,"btn","btn-outline-danger","px-2","py-1","me-2",3,"click"],[0,"xlink","href","#papelera"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",1),e.TgZ(4,"div",3),e.TgZ(5,"h2",4),e._uU(6,"Gesti\xf3n de Profesores"),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return r.registrarProfesor()}),e._uU(8,"Registrar Profesor"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",1),e.TgZ(10,"div",2),e.TgZ(11,"form"),e.TgZ(12,"div",1),e.TgZ(13,"div",2),e.TgZ(14,"table",6),e.TgZ(15,"thead",7),e.TgZ(16,"tr"),e.TgZ(17,"th",8),e._uU(18,"Apellido"),e.qZA(),e.TgZ(19,"th",8),e._uU(20,"Nombre"),e.qZA(),e.TgZ(21,"th",8),e._uU(22,"DNI"),e.qZA(),e.TgZ(23,"th",8),e._uU(24,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"tbody"),e.YNc(26,Fo,15,4,"tr",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(26),e.Q6J("ngForOf",r.profesores))},directives:[l._Y,l.JL,l.F,b.sg,b.O5],styles:[""]}),o})()}];let Do=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[A.Bz.forChild(So)],A.Bz]}),o})(),Yo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[b.ez,l.u5,l.UX,Do,f.IJ,w._t,_e,we]]}),o})()},4327:function(z,Q){var A;void 0!==(A=function(){"use strict";function w(m,_,U){var v=new XMLHttpRequest;v.open("GET",m),v.responseType="blob",v.onload=function(){M(v.response,_,U)},v.onerror=function(){console.error("could not download file")},v.send()}function I(m){var _=new XMLHttpRequest;_.open("HEAD",m,!1);try{_.send()}catch(U){}return 200<=_.status&&299>=_.status}function e(m){try{m.dispatchEvent(new MouseEvent("click"))}catch(U){var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(_)}}var g="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,j=g.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),M=g.saveAs||("object"!=typeof window||window!==g?function(){}:"download"in HTMLAnchorElement.prototype&&!j?function(m,_,U){var v=g.URL||g.webkitURL,f=document.createElement("a");f.download=_=_||m.name||"download",f.rel="noopener","string"==typeof m?(f.href=m,f.origin===location.origin?e(f):I(f.href)?w(m,_,U):e(f,f.target="_blank")):(f.href=v.createObjectURL(m),setTimeout(function(){v.revokeObjectURL(f.href)},4e4),setTimeout(function(){e(f)},0))}:"msSaveOrOpenBlob"in navigator?function(m,_,U){if(_=_||m.name||"download","string"!=typeof m)navigator.msSaveOrOpenBlob(function E(m,_){return void 0===_?_={autoBom:!1}:"object"!=typeof _&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\ufeff",m],{type:m.type}):m}(m,U),_);else if(I(m))w(m,_,U);else{var v=document.createElement("a");v.href=m,v.target="_blank",setTimeout(function(){e(v)})}}:function(m,_,U,v){if((v=v||open("","_blank"))&&(v.document.title=v.document.body.innerText="downloading..."),"string"==typeof m)return w(m,_,U);var f="application/octet-stream"===m.type,l=/constructor/i.test(g.HTMLElement)||g.safari,O=/CriOS\/[\d]+/.test(navigator.userAgent);if((O||f&&l||j)&&"undefined"!=typeof FileReader){var Y=new FileReader;Y.onloadend=function(){var N=Y.result;N=O?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=N:location=N,v=null},Y.readAsDataURL(m)}else{var B=g.URL||g.webkitURL,R=B.createObjectURL(m);v?v.location=R:location.href=R,v=null,setTimeout(function(){B.revokeObjectURL(R)},4e4)}});g.saveAs=M.saveAs=M,z.exports=M}.apply(Q,[]))&&(z.exports=A)}}]);