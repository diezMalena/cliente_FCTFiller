(self.webpackChunkcliente_fct_filler=self.webpackChunkcliente_fct_filler||[]).push([[364],{364:(re,H,b)=>{"use strict";b.r(H),b.d(H,{DataManagementModule:()=>wr});var A=b(9808),U=b(3673),x=b(5861),M=b(3737),S=b(4327),e=b(5e3),g=b(9767);let B=(()=>{class o{constructor(t){this.modalActive=t}ngOnInit(){}closeModal(){this.modalActive.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manual-asig-alum"]],decls:91,vars:0,consts:[[1,"modal-header"],[1,"modal-title","fs-2"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"modal-body","p-3"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"fs-4","text-info"],["src","/assets/Manuales/asig-alum-emp/screenshot_00.jpg","alt","Captura de pantalla con la vista de asignar alumnos.",1,"img-fluid"],[1,"d-flex","justify-content-between","align-items-center"],["src","/assets/Manuales/asig-alum-emp/screenshot_01.jpg","alt","Captura de pantalla con el nombre del ciclo",1,"img-fluid","me-3"],["src","/assets/Manuales/asig-alum-emp/screenshot_02.jpg","alt","Captura de pantalla de las empresas",1,"img-fluid","ms-3","border","border-dark"],["src","/assets/Manuales/asig-alum-emp/screenshot_03.jpg","alt","GIF que ejemplifica la b\xfasqueda en la tabla de gesti\xf3n de empresas",1,"img-fluid","me-3","border","border-dark"],["src","/assets/Manuales/asig-alum-emp/screenshot_04.jpg","alt","Captura de pantalla que muestra el nombre de la empresa",1,"img-fluid","me-3","border","border-dark"],["src","/assets/Manuales/asig-alum-emp/screenshot_05.jpg","alt","Captura de pantalla que muestra el nombre del responsable de la empresa",1,"img-fluid","me-3","border","border-dark"],["src","/assets/Manuales/asig-alum-emp/screenshot_06.jpg","alt","Captura de pantalla con el nombre del alumno asignado",1,"img-fluid","me-3"],["src","/assets/Manuales/asig-alum-emp/screenshot_07.jpg","alt","Captura de pantalla con el horario del alumno en la empresa",1,"img-fluid","me-3"],["src","/assets/Manuales/asig-alum-emp/screenshot_08.jpg","alt","Captura de pantalla con la fecha de inicio de pr\xe1cticas",1,"img-fluid","me-3"],["src","/assets/Manuales/asig-alum-emp/screenshot_09.jpg","alt","Captura de pantalla con la fecha de fin de pr\xe1cticas",1,"img-fluid","me-3"],["src","/assets/Manuales/asig-alum-emp/screenshot_10.jpg","alt","Captura de pantalla con la fecha de fin de pr\xe1cticas",1,"img-fluid","me-3"],["src","/assets/Manuales/asig-alum-emp/grabacion_00.GIF","alt","GIF que muestra como mover a los alumnos",1,"img-fluid","me-3","border","border-dark"],[1,"modal-footer"],[1,"btn","btn-outline-primary",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Manual de asignaci\xf3n de alumnos a empresas"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.closeModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"ul",4),e.TgZ(6,"li",5),e.TgZ(7,"h2",6),e._uU(8,"Vistazo general"),e.qZA(),e.TgZ(9,"p"),e._uU(10,"Lo primero que vemos arriba es el grupo al que pertenecen estos alumnos, abajo a la izquierda los alumnos que a\xfan no no est\xe1n asignados a ninguna empresa, a la derecha las empresas que solicitan alumnos de este ciclo, y dentro de estas empresas pueden haber alumnos que ya est\xe9n asignados a ellas, o pueden estar vac\xedas. "),e.qZA(),e.TgZ(11,"p"),e._uU(12,"En la siguiente imagen puede observar cada uno de los elementos importantes de la vista, numerados."),e.qZA(),e._UZ(13,"img",7),e.qZA(),e.TgZ(14,"li",5),e.TgZ(15,"h2",6),e._uU(16,"1. Nombre del ciclo"),e.qZA(),e.TgZ(17,"div",8),e._UZ(18,"img",9),e.TgZ(19,"div"),e.TgZ(20,"p"),e._uU(21,"Este es el nombre del ciclo del tutor que est\xe1 dentro de la aplicaci\xf3n, y al que pertenecen los alumnos que hay abajo. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"li",5),e.TgZ(23,"h2",6),e._uU(24,"2. Alumnos sin asignar"),e.qZA(),e.TgZ(25,"div",8),e.TgZ(26,"div"),e.TgZ(27,"p"),e._uU(28,"Estos son los alumnos que a\xfan no han sido asignados a una empresa."),e.qZA(),e.qZA(),e._UZ(29,"img",10),e.qZA(),e.qZA(),e.TgZ(30,"li",5),e.TgZ(31,"h2",6),e._uU(32,"3. Empresas"),e.qZA(),e.TgZ(33,"p"),e._uU(34,"Estas son las empresas que est\xe1n solicitando alumnos de este ciclo, los elementos que hay dentro los explico m\xe1s adelante."),e.qZA(),e._UZ(35,"img",11),e.qZA(),e.TgZ(36,"li",5),e.TgZ(37,"h2",6),e._uU(38,"4. Nombre de la empresa"),e.qZA(),e.TgZ(39,"p"),e._uU(40,"Es el nombre de esa empresa que est\xe1 solicitando alumnos."),e.qZA(),e._UZ(41,"img",12),e.qZA(),e.TgZ(42,"li",5),e.TgZ(43,"h2",6),e._uU(44,"5. Responsable de la empresa"),e.qZA(),e.TgZ(45,"p"),e._uU(46,"Este es el nombre del responsable de esa empresa, el cual se puede editar."),e.qZA(),e._UZ(47,"img",13),e.qZA(),e.TgZ(48,"li",5),e.TgZ(49,"h2",6),e._uU(50,"6. Nombre del alumno"),e.qZA(),e.TgZ(51,"div",8),e._UZ(52,"img",14),e.TgZ(53,"div"),e.TgZ(54,"p"),e._uU(55,"Es el nombre del alumno que est\xe1 asignado."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"li",5),e.TgZ(57,"h2",6),e._uU(58,"7. Horario del alumno"),e.qZA(),e.TgZ(59,"div",8),e._UZ(60,"img",15),e.TgZ(61,"div"),e.TgZ(62,"p"),e._uU(63,"Este es el horario que tendr\xe1 el alumno durante sus pr\xe1cticas."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(64,"li",5),e.TgZ(65,"h2",6),e._uU(66,"8. Fecha de inicio de pr\xe1cticas"),e.qZA(),e.TgZ(67,"p"),e._uU(68,"Esta es la fecha en la que el alumno empezar\xe1 las pr\xe1cticas"),e.qZA(),e._UZ(69,"img",16),e.qZA(),e.TgZ(70,"li",5),e.TgZ(71,"h2",6),e._uU(72,"9. Fecha de fin de pr\xe1cticas"),e.qZA(),e.TgZ(73,"p"),e._uU(74,"Esta es la fecha en la que el alumno finalizar\xe1 las pr\xe1cticas."),e.qZA(),e._UZ(75,"img",17),e.qZA(),e.TgZ(76,"li",5),e.TgZ(77,"h2",6),e._uU(78,"10. Guardar y generar documento"),e.qZA(),e.TgZ(79,"p"),e._uU(80,"Al pulsar este bot\xf3n se guardar\xe1n los cambios realizados y se generar\xe1 el anexo correspondiente."),e.qZA(),e._UZ(81,"img",18),e.qZA(),e.TgZ(82,"li",5),e.TgZ(83,"h2",6),e._uU(84,"Mover a los alumnos"),e.qZA(),e.TgZ(85,"p"),e._uU(86,"Para mover a los alumnos es tal como se ve en el siguiente gif, solo pinchas sobre \xe9l y lo mueves donde corresponda."),e.qZA(),e._UZ(87,"img",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(88,"div",20),e.TgZ(89,"button",21),e.NdJ("click",function(){return r.closeModal()}),e._uU(90,"Volver"),e.qZA(),e.qZA())},styles:[""]}),o})();var _=b(520);let f=(()=>{class o{constructor(t){this.http=t,this.ruta="http://localhost:8000/api/"}solicitarAlumnos(t){return this.http.get(this.ruta+"solicitarAlumnosSinEmpresa/"+t)}solicitarEmpresas(t){return this.http.get(this.ruta+"solicitarEmpresasConAlumnos/"+t)}solicitarNombreCiclo(t){return this.http.get(this.ruta+"solicitarNombreCiclo/"+t)}asignarAlumnos(t){let r=this.ruta+"actualizarEmpresaAsignadaAlumno",a=new _.WM({"Content-Type":"application/json"});return this.http.post(r,t,{headers:a})}generarAnexo(t){return this.http.post(this.ruta+"relleno",{dni_tutor:t},{responseType:"arraybuffer"})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=b(2290),T=b(7769),Z=b(634);let w=(()=>{class o{constructor(t,r){this.dialogRef=t,this.data=r}ngOnInit(){}close(t){this.dialogRef.close({respuesta:t})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.so),e.Y36(Z.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-confirm-dialog"]],decls:10,vars:2,consts:[[1,"h5"],[1,"d-flex","justify-content-end"],[1,"btn","btn-outline-primary","px-4",3,"click"],[1,"btn","btn-outline-default","px-4","ms-2",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"div"),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"div",1),e.TgZ(6,"button",2),e.NdJ("click",function(){return r.close(!0)}),e._uU(7,"S\xed"),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){return r.close(!1)}),e._uU(9,"No"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",r.data.title," "),e.xp6(3),e.hij(" ",r.data.message," "))},styles:[""]}),o})(),k=(()=>{class o{constructor(t){this.dialog=t}confirmacion(t,r){var a=this;return(0,x.Z)(function*(){let n=a.dialog.open(w,{data:{title:t,message:r},width:"400px"});return new Promise((s,d)=>{n.afterClosed().subscribe(u=>{s(u.respuesta)})}).then(s=>s).catch(s=>{})})()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(Z.uw))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var l=b(2382);function L(o,i){if(1&o&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.uIk("id",t.dni),e.xp6(1),e.hij(" ",t.nombre," ")}}function W(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"span",28),e._uU(2),e.qZA(),e.TgZ(3,"input",29),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.horario=a}),e.qZA(),e.TgZ(4,"input",30),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.fecha_ini=a}),e.qZA(),e.TgZ(5,"input",31),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.fecha_fin=a}),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.uIk("id",t.dni),e.xp6(2),e.Oqu(t.nombre),e.xp6(1),e.Q6J("ngModel",t.horario),e.xp6(1),e.Q6J("ngModel",t.fecha_ini),e.xp6(1),e.Q6J("ngModel",t.fecha_fin)}}function R(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",20),e.TgZ(1,"div",15),e.TgZ(2,"label",21),e.TgZ(3,"h3",22),e._uU(4),e.qZA(),e.TgZ(5,"span",23),e._uU(6,"Responsable de la empresa:"),e.qZA(),e.TgZ(7,"input",24),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.nombre_responsable=a}),e.qZA(),e.qZA(),e.TgZ(8,"div",0),e.TgZ(9,"div",8),e.TgZ(10,"div",25),e.NdJ("cdkDropListDropped",function(a){return e.CHM(t),e.oxw().drop(a)}),e.YNc(11,W,6,5,"div",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.uIk("id",t.id),e.xp6(2),e.MGl("for","responsable",t.dni_responsable,""),e.xp6(2),e.Oqu(t.nombre),e.xp6(3),e.MGl("id","responsable",t.dni_responsable,""),e.Q6J("ngModel",t.nombre_responsable),e.xp6(3),e.Q6J("cdkDropListData",t.alumnos),e.xp6(1),e.Q6J("ngForOf",t.alumnos)}}let P=(()=>{class o{constructor(t,r,a,n,s,d){var u;this.alumnosEmpresas=t,this.router=r,this.toastr=a,this.storageUser=n,this.dialogService=s,this.modal=d,this.alumnos=[],this.empresas=[],this.respuesta=[],this.nombreCiclo="",this.usuario=n.getUser(),this.dniTutor=null===(u=this.usuario)||void 0===u?void 0:u.dni}ngOnInit(){this.getNombreCiclo(),this.getAlumnos(),this.getEmpresas()}drop(t){t.previousContainer===t.container?(0,M.bA)(t.container.data,t.previousIndex,t.currentIndex):(0,M.EA)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex)}getAlumnos(){this.alumnosEmpresas.solicitarAlumnos(this.dniTutor).subscribe(t=>{this.alumnos=t})}getEmpresas(){this.alumnosEmpresas.solicitarEmpresas(this.dniTutor).subscribe(t=>{this.empresas=t})}getNombreCiclo(){this.alumnosEmpresas.solicitarNombreCiclo(this.dniTutor).subscribe({next:t=>{this.nombreCiclo=t}})}setCambiosEmpresas(){var t=this;return(0,x.Z)(function*(){if(yield t.dialogService.confirmacion("Generar y Descargar","\xbfEst\xe1 seguro de que desea generar y descargar el anexo?")){var a=!0,n=!0,s="";t.empresas.forEach(u=>{var c;u.nombre_responsable&&a?null===(c=u.alumnos)||void 0===c||c.forEach(m=>{m.fecha_fin&&m.fecha_ini&&m.horario&&n||(a=!1),(m.fecha_ini>=m.fecha_fin||!a&&n)&&(n=!1,s+=`${m.nombre} tiene la fecha de inicio mayor que la fecha de fin.\n`)}):a=!1}),a&&n?(t.alumnosEmpresas.asignarAlumnos({empresas:t.empresas,alumnos_solos:t.alumnos,dni_tutor:t.dniTutor}).subscribe(),t.toastr.success("Cambios realizados con exito.","Guardado"),t.GenerarAnexos()):a||t.toastr.error("No pueden haber campos vac\xedos, o las fechas son incorrectas","Rellena campos"),""!=s&&t.toastr.error(s,"Fechas incorrectas")}else t.toastr.info("Has decidido no generar y descargar el Anexo","Generacion y Descarga")})()}GenerarAnexos(){this.alumnosEmpresas.generarAnexo(this.dniTutor).subscribe({next:t=>{const r=new Date,a=new Blob([t],{type:"application/octet-stream"});S.saveAs(a,"backup_"+r.getTime()+".zip"),this.toastr.success("Anexo Generado","T\xedtulo")},error:t=>{console.log(t),this.toastr.error("El anexo no ha podido generarse","Generado")}}),this.router.navigate(["/data-management/asig-alum-empresa"])}abrirAyuda(){this.modal.open(B,{size:"lg"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f),e.Y36(U.F0),e.Y36(p._W),e.Y36(T.L),e.Y36(k),e.Y36(g.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-asociar-emp-alu"]],decls:30,vars:4,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-default","mr-2",3,"click"],["cdkDropListGroup","",1,"card","p-3"],[1,"col-sm-12"],[1,"row","bg-white","p-2","rounded","border-white"],[1,"col-md-4","col-sm-6","mt-1"],[1,"col-12"],[1,"h4"],[1,"col-sm-9"],[1,"card"],["cdkDropList","",1,"card-body","ps-3",3,"cdkDropListData","cdkDropListDropped"],["ngClass","alumnos h6 text-black bg-secondary rounded border-secondary row p-1 mb-2","cdkDrag","",4,"ngFor","ngForOf"],[1,"col-md-8","col-sm-6","mt-1"],[1,"col"],["ngClass","row mb-2 bg-primary p-2 border border-primary rounded text-white",4,"ngFor","ngForOf"],[1,"col-sm-12","mt-1","text-center"],["type","button","value","Guardar y Generar Word",1,"btn","btn-outline-primary","m-1",3,"click"],["ngClass","alumnos h6 text-black bg-secondary rounded border-secondary row p-1 mb-2","cdkDrag",""],["ngClass","row mb-2 bg-primary p-2 border border-primary rounded text-white"],[1,"row",3,"for"],[1,"col-4","h5"],["for","responsableEmpresa",1,"col-4","text-end"],["aria-label","responsable de la empresa","type","text",1,"col-4",3,"id","ngModel","ngModelChange"],["cdkDropList","",1,"py-3",3,"cdkDropListData","cdkDropListDropped"],["ngClass","alumnos text-white bg-secondary rounded border-secondary row p-1 mb-2","cdkDrag","",4,"ngFor","ngForOf"],["ngClass","alumnos text-white bg-secondary rounded border-secondary row p-1 mb-2","cdkDrag",""],[1,"h6","text-black","col-12","col-md-3"],["aria-label","horario del alumno","placeholder","Horario","type","text",1,"col-12","col-md-3",3,"ngModel","ngModelChange"],["aria-label","fecha de inicio de pr\xe1cticas","type","date",1,"col-12","col-md-3",3,"ngModel","ngModelChange"],["aria-label","fecha de fin de pr\xe1cticas","type","date",1,"col-12","col-md-3",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.abrirAyuda()}),e._uU(5,"?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",0),e.TgZ(8,"div",5),e.TgZ(9,"div",6),e.TgZ(10,"div",7),e.TgZ(11,"div",0),e.TgZ(12,"div",8),e.TgZ(13,"h2",9),e._uU(14,"Alumnos"),e.qZA(),e.TgZ(15,"div",0),e.TgZ(16,"div",10),e.TgZ(17,"div",11),e.TgZ(18,"div",12),e.NdJ("cdkDropListDropped",function(n){return r.drop(n)}),e.YNc(19,L,2,2,"div",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",14),e.TgZ(21,"div",0),e.TgZ(22,"div",8),e.TgZ(23,"h2",9),e._uU(24,"Empresas"),e.qZA(),e.TgZ(25,"div",0),e.TgZ(26,"div",15),e.YNc(27,R,12,7,"div",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",17),e.TgZ(29,"input",18),e.NdJ("click",function(){return r.setCambiosEmpresas()}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij("Asignaci\xf3n de alumnos de ",r.nombreCiclo," "),e.xp6(15),e.Q6J("cdkDropListData",r.alumnos),e.xp6(1),e.Q6J("ngForOf",r.alumnos),e.xp6(8),e.Q6J("ngForOf",r.empresas))},directives:[g._L,M.Fd,M.Wj,A.sg,A.mk,M.Zt,l.Fj,l.JJ,l.On],styles:[".alumnos[_ngcontent-%COMP%]{cursor:move}"]}),o})();class V{constructor(i,t,r,a,n,s,d,u,c,m,h,q,C){this.id=i,this.cif=t,this.nombre=r,this.email=a,this.telefono=n,this.localidad=s,this.provincia=d,this.direccion=u,this.cp=c,this.representante=m,this.nombre_responsable=h,this.dni_responsable=q,this.alumnos=C}static empresaJSON(i){return new V(i.id,i.cif,i.nombre,i.email,i.telefono,i.localidad,i.provincia,i.direccion,i.cp,i.representante,i.nombre_responsable,i.dni_responsable,i.alumnos)}}class X{constructor(i,t,r,a,n){this.dni=i,this.email=t,this.nombre=r,this.apellidos=a,this.id_empresa=n}static trabajadorJSON(i){return new X(i.dni,i.email,i.nombre,i.apellidos,i.id_empresa)}}var K=b(1135),J=b(4004);let de=(()=>{class o{constructor(t){this.http=t,this.empresaTrigger=new e.vpe,this.URLAPI="http://127.0.0.1:8000/api/",this.empresasArray=new K.X([])}getEmpresas(t){return this.http.get(this.URLAPI+"solicitar_empresas/profesor="+t).pipe((0,J.U)(a=>a.map(n=>V.empresaJSON(n))))}getRepresentante(t){return this.http.get(this.URLAPI+"solicitar_representante/id="+t).pipe((0,J.U)(a=>X.trabajadorJSON(a)))}updateEmpresa(t){const r=this.URLAPI+"update_empresa",a=new _.WM({"Content-Type":"application/json"});return this.http.put(r,JSON.stringify(t),{headers:a})}updateRepresentante(t){const r=this.URLAPI+"update_trabajador",a=new _.WM({"Content-Type":"application/json"});return this.http.put(r,JSON.stringify(t),{headers:a})}deleteEmpresa(t){const r=this.URLAPI+"delete_empresa/id="+t,a=new _.WM({"Content-Type":"application/json"});return this.http.delete(r,{headers:a})}getEmpresasArray(t){this.empresasArray.next(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function fe(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar un CIF v\xe1lido "),e.qZA())}function Ze(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar un nombre "),e.qZA())}function he(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar un tel\xe9fono "),e.qZA())}function ve(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar un email v\xe1lido "),e.qZA())}function be(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar una provincia "),e.qZA())}function Ae(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar una localidad "),e.qZA())}function Te(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar un c\xf3digo postal "),e.qZA())}function qe(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar una direcci\xf3n "),e.qZA())}function xe(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar un nombre "),e.qZA())}function Ce(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar apellidos "),e.qZA())}function ye(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar un DNI v\xe1lido "),e.qZA())}function Ee(o,i){1&o&&(e.TgZ(0,"div",31),e._uU(1," Es obligatorio insertar un email v\xe1lido "),e.qZA())}function Ue(o,i){if(1&o&&(e.TgZ(0,"div",7),e.TgZ(1,"h2",8),e._uU(2,"Datos del representante legal"),e.qZA(),e.TgZ(3,"div",9),e.TgZ(4,"label",32),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",33),e.YNc(7,xe,2,0,"div",12),e.qZA(),e.TgZ(8,"div",13),e.TgZ(9,"label",34),e._uU(10,"Apellidos"),e.qZA(),e._UZ(11,"input",35),e.YNc(12,Ce,2,0,"div",12),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"label",36),e._uU(15,"DNI"),e.qZA(),e._UZ(16,"input",37),e.YNc(17,ye,2,0,"div",12),e.qZA(),e.TgZ(18,"div",13),e.TgZ(19,"label",38),e._uU(20,"e-mail"),e.qZA(),e._UZ(21,"input",39),e.YNc(22,Ee,2,0,"div",12),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(6),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.nombre_representante.errors),e.xp6(4),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.apellidos.errors),e.xp6(4),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.dni.errors),e.xp6(4),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.email_representante.errors)}}function we(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",40),e._UZ(2,"input",41),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",!t.modified||null)}}function Me(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h1",3),e._uU(3),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"form",6),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(7,"div",7),e.TgZ(8,"h2",8),e._uU(9,"Datos de la empresa"),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"label",10),e._uU(12,"CIF"),e.qZA(),e._UZ(13,"input",11),e.YNc(14,fe,2,0,"div",12),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"label",14),e._uU(17,"Nombre"),e.qZA(),e._UZ(18,"input",15),e.YNc(19,Ze,2,0,"div",12),e.qZA(),e.TgZ(20,"div",9),e.TgZ(21,"label",16),e._uU(22,"Tel\xe9fono"),e.qZA(),e._UZ(23,"input",17),e.YNc(24,he,2,0,"div",12),e.qZA(),e.TgZ(25,"div",13),e.TgZ(26,"label",18),e._uU(27,"e-mail"),e.qZA(),e._UZ(28,"input",19),e.YNc(29,ve,2,0,"div",12),e.qZA(),e.qZA(),e._UZ(30,"hr",20),e.TgZ(31,"div",7),e.TgZ(32,"h2",8),e._uU(33,"Domicilio de la empresa"),e.qZA(),e.TgZ(34,"div",9),e.TgZ(35,"label",21),e._uU(36,"Provincia"),e.qZA(),e._UZ(37,"input",22),e.YNc(38,be,2,0,"div",12),e.qZA(),e.TgZ(39,"div",13),e.TgZ(40,"label",23),e._uU(41,"Localidad"),e.qZA(),e._UZ(42,"input",24),e.YNc(43,Ae,2,0,"div",12),e.qZA(),e.TgZ(44,"div",9),e.TgZ(45,"label",25),e._uU(46,"CP"),e.qZA(),e._UZ(47,"input",26),e.YNc(48,Te,2,0,"div",12),e.qZA(),e.TgZ(49,"div",13),e.TgZ(50,"label",27),e._uU(51,"Direcci\xf3n"),e.qZA(),e._UZ(52,"input",28),e.YNc(53,qe,2,0,"div",12),e.qZA(),e.qZA(),e._UZ(54,"hr",20),e.YNc(55,Ue,23,19,"div",29),e.YNc(56,we,3,1,"ng-container",30),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.hij("Detalles de ",t.empresa.nombre," "),e.xp6(3),e.Q6J("formGroup",t.datosEmpresa),e.xp6(7),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.cif.errors),e.xp6(4),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.nombre_empresa.errors),e.xp6(4),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.telefono.errors),e.xp6(4),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.email_empresa.errors),e.xp6(8),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.provincia.errors),e.xp6(4),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.localidad.errors),e.xp6(4),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.cp.errors),e.xp6(4),e.Tol(t.editar?"form-control":"form-control-plaintext"),e.s9C("value",t.empresa.direccion),e.uIk("readonly",!t.editar||null),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.direccion.errors),e.xp6(2),e.Q6J("ngIf",t.empresa.representante),e.xp6(1),e.Q6J("ngIf",t.editar)}}let Ne=(()=>{class o{constructor(t,r,a,n,s,d){this.modalActive=t,this.crudEmpresasService=r,this.storageUser=a,this.formBuilder=n,this.dialogService=s,this.toastr=d,this.submitted=!1,this.modified=!1,this.empresas=[],this.usuario=a.getUser(),this.datosEmpresa=this.formBuilder.group({}),this.crudEmpresasService.empresaTrigger.subscribe({next:u=>{this.empresa=u[0],this.editar=u[1],this.construirFormulario()}})}ngOnInit(){this.getEmpresas(),this.onChanges()}get formulario(){return this.datosEmpresa.controls}construirFormulario(){var t,r,a,n,s,d,u,c,m,h,q,C,E,N,I,y;this.datosEmpresa=this.formBuilder.group({cif:[null===(t=this.empresa)||void 0===t?void 0:t.cif,[l.kI.required,l.kI.minLength(9),l.kI.maxLength(9)]],nombre_empresa:[null===(r=this.empresa)||void 0===r?void 0:r.nombre,[l.kI.required]],telefono:[null===(a=this.empresa)||void 0===a?void 0:a.telefono,[l.kI.required]],email_empresa:[null===(n=this.empresa)||void 0===n?void 0:n.email,[l.kI.required,l.kI.email]],provincia:[null===(s=this.empresa)||void 0===s?void 0:s.provincia,[l.kI.required]],localidad:[null===(d=this.empresa)||void 0===d?void 0:d.localidad,[l.kI.required]],cp:[null===(u=this.empresa)||void 0===u?void 0:u.cp,[l.kI.required,l.kI.minLength(5),l.kI.maxLength(5)]],direccion:[null===(c=this.empresa)||void 0===c?void 0:c.direccion,[l.kI.required]],nombre_representante:[null===(h=null===(m=this.empresa)||void 0===m?void 0:m.representante)||void 0===h?void 0:h.nombre,[l.kI.required]],apellidos:[null===(C=null===(q=this.empresa)||void 0===q?void 0:q.representante)||void 0===C?void 0:C.apellidos,[l.kI.required]],dni:[null===(N=null===(E=this.empresa)||void 0===E?void 0:E.representante)||void 0===N?void 0:N.dni,[l.kI.required,l.kI.minLength(9),l.kI.maxLength(9)]],email_representante:[null===(y=null===(I=this.empresa)||void 0===I?void 0:I.representante)||void 0===y?void 0:y.email,[l.kI.required]]})}getEmpresas(){var r,a,t=this;this.crudEmpresasService.getEmpresas(null===(r=this.usuario)||void 0===r?void 0:r.dni).subscribe({next:(a=(0,x.Z)(function*(n){t.empresas=n,yield t.meterRepresentantesEmpresas(n),t.crudEmpresasService.getEmpresasArray(t.empresas)}),function(s){return a.apply(this,arguments)})})}meterRepresentantesEmpresas(t){var r=this;return(0,x.Z)(function*(){t.forEach(a=>{r.crudEmpresasService.getRepresentante(a.id).subscribe({next:n=>{a.representante=n}})})})()}onChanges(){this.datosEmpresa.valueChanges.subscribe(t=>{this.modified||(this.modified=!0)})}onSubmit(){var t,r;this.submitted=!0;let a=this.datosEmpresa.value,n=new X(a.dni,a.email_representante,a.nombre_representante,a.apellidos,null===(t=this.empresa)||void 0===t?void 0:t.id),s=new V(null===(r=this.empresa)||void 0===r?void 0:r.id,a.cif,a.nombre_empresa,a.email_empresa,a.telefono,a.localidad,a.provincia,a.direccion,a.cp,n);this.datosEmpresa.invalid||(this.modified=!1,this.updateEmpresa(s))}updateEmpresa(t){var a,r=this;this.crudEmpresasService.updateEmpresa(t).subscribe({next:(a=(0,x.Z)(function*(n){r.empresa=t,yield r.updateRepresentante(t.representante),r.getEmpresas(),r.toastr.success(n.message,n.title)}),function(s){return a.apply(this,arguments)}),error:a=>{this.toastr.error(a.error.message,a.error.title)}})}updateRepresentante(t){var r=this;return(0,x.Z)(function*(){r.crudEmpresasService.updateRepresentante(t).subscribe({next:a=>{r.empresa.representante=t,r.toastr.success(a.message,a.title)},error:a=>{r.toastr.error(a.error.message,a.error.title)}})})()}closeModal(){var t=this;return(0,x.Z)(function*(){t.modified&&(yield t.dialogService.confirmacion("Guardar cambios","Hay cambios sin guardar. \xbfQuiere guardarlos antes de salir?"))&&t.onSubmit(),t.modalActive.close()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Kz),e.Y36(de),e.Y36(T.L),e.Y36(l.qu),e.Y36(k),e.Y36(p._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-empresa"]],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"modal-header"],[1,"modal-title","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"fs-5"],[1,"col-md-4"],["for","cif",1,"form-label","fw-bold"],["type","text","id","cif","placeholder","00000000X","formControlName","cif"],["class","text-danger bg-white rounded border border-2 border-danger p-2",4,"ngIf"],[1,"col-md-8"],["for","nombre_empresa",1,"form-label","fw-bold"],["type","text","id","nombre_empresa","placeholder","Nombre de la empresa","formControlName","nombre_empresa"],["for","telefono",1,"form-label","fw-bold"],["type","text","id","telefono","placeholder","+34666666666","formControlName","telefono"],["for","email_empresa",1,"form-label","fw-bold"],["type","email","id","email_empresa","placeholder","email@contacto.com","formControlName","email_empresa"],[1,"my-3"],["for","provincia",1,"form-label","fw-bold"],["type","text","id","provincia","placeholder","Provincia","formControlName","provincia"],["for","localidad",1,"form-label","fw-bold"],["type","text","id","localidad","placeholder","Localidad de la empresa","formControlName","localidad"],["for","cp",1,"form-label","fw-bold"],["type","text","id","cp","placeholder","00000","formControlName","cp"],["for","direccion",1,"form-label","fw-bold"],["type","text","id","direccion","placeholder","Calle, n\xba, piso, puerta","formControlName","direccion",3,"value"],["class","row g-3",4,"ngIf"],[4,"ngIf"],[1,"text-danger","bg-white","rounded","border","border-2","border-danger","p-2"],["for","nombre_representante",1,"form-label","fw-bold"],["type","text","id","nombre_representante","placeholder","Nombre del representante","formControlName","nombre_representante"],["for","apellidos",1,"form-label","fw-bold"],["type","apellidos","id","apellidos","placeholder","Apellidos del representante","formControlName","apellidos"],["for","dni",1,"form-label","fw-bold"],["type","text","id","dni","placeholder","00000000A","formControlName","dni","readonly",""],["for","email_representante",1,"form-label","fw-bold"],["type","text","id","email_representante","placeholder","Nombre del representante","formControlName","email_representante"],[1,"row","mt-3","d-flex","align-items-center","justify-content-center","modal-footer"],["type","submit","value","Guardar cambios",1,"w-50","btn","btn-primary","btn-md",3,"disabled"]],template:function(t,r){1&t&&e.YNc(0,Me,57,45,"div",0),2&t&&e.Q6J("ngIf",r.empresa)},directives:[A.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],styles:[""]}),o})();var F=function(){function o(i,t,r){this.el=i,this.vcr=t,this.renderer=r,this.dtOptions={}}return o.prototype.ngOnInit=function(){var i=this;this.dtTrigger?this.dtTrigger.subscribe(function(t){i.displayTable(t)}):this.displayTable(null)},o.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},o.prototype.displayTable=function(i){var t=this;i&&(this.dtOptions=i),this.dtInstance=new Promise(function(r,a){Promise.resolve(t.dtOptions).then(function(n){0===Object.keys(n).length&&0===$("tbody tr",t.el.nativeElement).length?a("Both the table and dtOptions cannot be empty"):setTimeout(function(){var d={rowCallback:function(u,c,m){if(n.columns){var h=n.columns;t.applyNgPipeTransform(u,h),t.applyNgRefTemplate(u,h,c)}n.rowCallback&&n.rowCallback(u,c,m)}};d=Object.assign({},n,d),t.dt=$(t.el.nativeElement).DataTable(d),r(t.dt)})})})},o.prototype.applyNgPipeTransform=function(i,t){t.filter(function(a){return a.ngPipeInstance&&!a.ngTemplateRef}).forEach(function(a){var n=a.ngPipeInstance,s=t.findIndex(function(m){return m.data===a.data}),d=i.childNodes.item(s),u=$(d).text(),c=n.transform(u);$(d).text(c)})},o.prototype.applyNgRefTemplate=function(i,t,r){var a=this;t.filter(function(s){return s.ngTemplateRef&&!s.ngPipeInstance}).forEach(function(s){var d=s.ngTemplateRef,u=d.ref,c=d.context,m=t.findIndex(function(E){return E.data===s.data}),h=i.childNodes.item(m);$(h).html("");var q=Object.assign({},c,null==c?void 0:c.userData,{adtData:r}),C=a.vcr.createEmbeddedView(u,q);a.renderer.appendChild(h,C.rootNodes[0])})},o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(e.Qsj))},o.\u0275dir=e.lG2({type:o,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),o}(),Je=function(){function o(){}return o.forRoot=function(){return{ngModule:o}},o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[A.ez]]}),o}(),G=b(7579);let ke=(()=>{class o{constructor(t){this.modalActive=t}ngOnInit(){}closeModal(){this.modalActive.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manual-gestion-empresas"]],decls:85,vars:0,consts:[[1,"modal-header"],[1,"modal-title","fs-2"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"modal-body","p-3"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"fs-4","text-info"],["src","/assets/Manuales/gestion-empresas/screenshot_00.png","alt","Captura de pantalla con la vista de gesti\xf3n de empresas",1,"img-fluid"],[1,"d-flex","justify-content-between","align-items-center"],["src","/assets/Manuales/gestion-empresas/screenshot_01.png","alt","Captura de pantalla con el bot\xf3n para registrar una empresa",1,"img-fluid","me-3"],[1,"m-0"],["src","/assets/Manuales/gestion-empresas/screenshot_02.png","alt","Captura de pantalla del desplegable de mostrar registros",1,"img-fluid","ms-3","border","border-dark"],["src","/assets/Manuales/gestion-empresas/busqueda.gif","alt","GIF que ejemplifica la b\xfasqueda en la tabla de gesti\xf3n de empresas",1,"img-fluid","me-3","border","border-dark"],["src","/assets/Manuales/gestion-empresas/screenshot_03.png","alt","Captura de pantalla que muestra las empresas ordenadas ascendentemente por nombre, con el cursor sobre el t\xedtulo 'Nombre' de la tabla",1,"img-fluid","me-3","border","border-dark"],[1,"mt-3"],["src","/assets/Manuales/gestion-empresas/screenshot_04.png","alt","Captura de pantalla que muestra las empresas ordenadas descendentemente por nombre, con el cursor sobre el t\xedtulo 'Nombre' de la tabla",1,"img-fluid","me-3","border","border-dark"],["src","/assets/Manuales/gestion-empresas/screenshot_05.png","alt","Captura de pantalla que muestra el cursor sobre una fila de la tabla",1,"img-fluid","me-3","border","border-dark"],["src","/assets/Manuales/gestion-empresas/screenshot_06.png","alt","Captura de pantalla con el bot\xf3n para editar una empresa",1,"img-fluid","me-3"],["src","/assets/Manuales/gestion-empresas/screenshot_07.png","alt","Captura de pantalla con el bot\xf3n para eliminar una empresa",1,"img-fluid","me-3"],[1,"modal-footer"],[1,"btn","btn-outline-primary",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Manual de gesti\xf3n de empresas"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.closeModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"ul",4),e.TgZ(6,"li",5),e.TgZ(7,"h2",6),e._uU(8,"Vistazo general"),e.qZA(),e.TgZ(9,"p"),e._uU(10,"En la vista de gesti\xf3n de empresas se muestran los datos de las empresas que tienen convenio con el centro de estudios en el que est\xe1 trabajando"),e.qZA(),e.TgZ(11,"p"),e._uU(12,"En la siguiente imagen puede observar cada uno de los elementos importantes de la vista, numerados"),e.qZA(),e._UZ(13,"img",7),e.qZA(),e.TgZ(14,"li",5),e.TgZ(15,"h2",6),e._uU(16,"1. Registrar empresa"),e.qZA(),e.TgZ(17,"div",8),e._UZ(18,"img",9),e.TgZ(19,"div"),e.TgZ(20,"p"),e._uU(21,"Este bot\xf3n, situado en la esquina superior derecha permite registrar una empresa en la aplicaci\xf3n, gener\xe1ndose el convenio y el Anexo 0 o 0A correspondientes"),e.qZA(),e.TgZ(22,"p",10),e._uU(23,"El funcionamiento del registro de la empresa se detalla en el manual correspondiente"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"li",5),e.TgZ(25,"h2",6),e._uU(26,"2. Cantidad de registros a mostrar"),e.qZA(),e.TgZ(27,"div",8),e.TgZ(28,"div"),e.TgZ(29,"p"),e._uU(30,"Clickee sobre el desplegable para seleccionar cu\xe1ntos registros quiere ver en cada p\xe1gina"),e.qZA(),e.TgZ(31,"p",10),e._uU(32,"Mostrar m\xe1s de 50 registros puede reducir el rendimiento de la aplicaci\xf3n"),e.qZA(),e.qZA(),e._UZ(33,"img",11),e.qZA(),e.qZA(),e.TgZ(34,"li",5),e.TgZ(35,"h2",6),e._uU(36,"3. B\xfasqueda por cualquier campo"),e.qZA(),e.TgZ(37,"p"),e._uU(38,"Busque empresas registradas usando la barra de b\xfasquedas en la parte superior derecha de la tabla"),e.qZA(),e._UZ(39,"img",12),e.TgZ(40,"p"),e._uU(41,"Puede buscar una empresa por cualquiera de los campos de la tabla: CIF, nombre, e-mail de contacto o localidad "),e.qZA(),e.qZA(),e.TgZ(42,"li",5),e.TgZ(43,"h2",6),e._uU(44,"4. Ordenar seg\xfan campo"),e.qZA(),e.TgZ(45,"p"),e._uU(46,"Puede ordenar las empresas en orden ascendente o descendente de cualquiera de los campos de la tabla clickeando sobre el t\xedtulo de la columna"),e.qZA(),e._UZ(47,"img",13),e.TgZ(48,"p",14),e._uU(49,"Si desea cambiar el orden, clickee de nuevo sobre el mismo t\xedtulo"),e.qZA(),e._UZ(50,"img",15),e.qZA(),e.TgZ(51,"li",5),e.TgZ(52,"h2",6),e._uU(53,"5. Ver empresa en detalle"),e.qZA(),e.TgZ(54,"p"),e._uU(55,"Clickee sobre una fila de la tabla para ver los datos de la empresa correspondiente en detalle"),e.qZA(),e._UZ(56,"img",16),e.qZA(),e.TgZ(57,"li",5),e.TgZ(58,"h2",6),e._uU(59,"6. Editar empresa"),e.qZA(),e.TgZ(60,"div",8),e._UZ(61,"img",17),e.TgZ(62,"div"),e.TgZ(63,"p"),e._uU(64,"Clickee sobre el bot\xf3n de editar (lapicero) para modificar los datos de una empresa o su representante legal."),e.qZA(),e.TgZ(65,"p",10),e._uU(66,"Se abrir\xe1 una ventana modal que le permitir\xe1 cambiar todos los datos de la empresa, salvo el DNI del representante legal."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(67,"li",5),e.TgZ(68,"h2",6),e._uU(69,"7. Eliminar empresa"),e.qZA(),e.TgZ(70,"div",8),e._UZ(71,"img",18),e.TgZ(72,"div"),e.TgZ(73,"p"),e._uU(74,"Clickee sobre el bot\xf3n de eliminar (cubo de basura) para eliminar de la aplicaci\xf3n los datos de una empresa y sus trabajadores"),e.qZA(),e.TgZ(75,"p",10),e._uU(76,"Dado que es una acci\xf3n definitiva, se pedir\xe1 una confirmaci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(77,"li",5),e.TgZ(78,"h2",6),e._uU(79,"8. Navegar por las p\xe1ginas de datos"),e.qZA(),e.TgZ(80,"p"),e._uU(81,"Utilice los botones de la esquina inferior derecha de la pantalla para navegar por las p\xe1ginas de datos"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(82,"div",19),e.TgZ(83,"button",20),e.NdJ("click",function(){return r.closeModal()}),e._uU(84,"Volver"),e.qZA(),e.qZA())},styles:[""]}),o})();function Fe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",15),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().mostrarEmpresa(n,!1)}),e._uU(2),e.qZA(),e.TgZ(3,"td",15),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().mostrarEmpresa(n,!1)}),e._uU(4),e.qZA(),e.TgZ(5,"td",15),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().mostrarEmpresa(n,!1)}),e._uU(6),e.qZA(),e.TgZ(7,"td",15),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().mostrarEmpresa(n,!1)}),e._uU(8),e.qZA(),e.TgZ(9,"td",16),e.TgZ(10,"button",17),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().mostrarEmpresa(n,!0)}),e.O4$(),e.TgZ(11,"svg",18),e._UZ(12,"use",19),e.qZA(),e.qZA(),e.kcU(),e.TgZ(13,"button",20),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().deleteEmpresa(n)}),e.O4$(),e.TgZ(14,"svg",18),e._UZ(15,"use",21),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(1),e.Q2q("aria-label","Ver en detalle ",t.nombre,""),e.xp6(1),e.Oqu(t.cif),e.xp6(1),e.Q2q("aria-label","Ver en detalle ",t.nombre,""),e.xp6(1),e.Oqu(t.nombre),e.xp6(1),e.Q2q("aria-label","Ver en detalle ",t.nombre,""),e.xp6(1),e.Oqu(t.email),e.xp6(1),e.Q2q("aria-label","Ver en detalle ",t.nombre,""),e.xp6(1),e.Oqu(t.localidad),e.xp6(2),e.Q2q("aria-label","Editar ",t.nombre,""),e.xp6(3),e.Q2q("aria-label","Eliminar ",t.nombre,"")}}let Ie=(()=>{class o{constructor(t,r,a,n,s){var d;this.crudEmpresasService=t,this.modal=r,this.storageUser=a,this.dialogService=n,this.toastr=s,this.dtOptions={},this.dtTrigger=new G.x,this.empresas=[],this.usuario=a.getUser(),this.dniTutor=null===(d=this.usuario)||void 0===d?void 0:d.dni}ngAfterViewInit(){this.dtTrigger.next(this.empresas)}ngOnInit(){delete this.dtOptions.language,this.getEmpresas(),this.getEmpresasFromModal()}ngOnDestroy(){this.dtTrigger.unsubscribe()}rerender(){this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next(this.empresas)})}getEmpresas(){var r,t=this;this.crudEmpresasService.getEmpresas(this.dniTutor).subscribe({next:(r=(0,x.Z)(function*(a){t.empresas=a,yield t.meterRepresentantesEmpresas(t.empresas),t.rerender(),$.fn.dataTable.ext.errMode="throw",t.dtTrigger.next(t.empresas)}),function(n){return r.apply(this,arguments)})}),$.extend(!0,$.fn.dataTable.defaults,{language:{url:"//cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"},columnDefs:[{targets:"nosort",orderable:!1}]})}meterRepresentantesEmpresas(t){var r=this;return(0,x.Z)(function*(){t.forEach(a=>{r.crudEmpresasService.getRepresentante(a.id).subscribe({next:n=>{a.representante=n}})})})()}mostrarEmpresa(t,r){this.modal.open(Ne,{size:"md",backdrop:"static",keyboard:!1}),this.crudEmpresasService.empresaTrigger.emit([t,r])}deleteEmpresa(t){var r=this;return(0,x.Z)(function*(){(yield r.dialogService.confirmacion("Eliminar registro",`\xbfEst\xe1 seguro de que quiere eliminar el registro de la empresa ${t.nombre}?`))&&r.crudEmpresasService.deleteEmpresa(t.id).subscribe({next:n=>{r.getEmpresas(),r.toastr.success(n.message,n.title)},error:n=>{console.log(n),r.toastr.error(n.error.message,n.error.title)}})})()}getEmpresasFromModal(){this.crudEmpresasService.empresasArray.subscribe(t=>{this.empresas=t,this.rerender()})}abrirAyuda(){this.modal.open(ke,{size:"lg"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(de),e.Y36(g.FF),e.Y36(T.L),e.Y36(k),e.Y36(p._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-gestion-empresas"]],viewQuery:function(t,r){if(1&t&&e.Gf(F,5),2&t){let a;e.iGM(a=e.CRH())&&(r.dtElement=a.first)}},decls:28,vars:3,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-default","mr-2",3,"click"],[1,"card","p-3"],[1,"d-flex","align-items-center","py-2","justify-content-end"],["href","data-management/registro-empresa/representante","aria-label","Registrar empresa","placement","left","ngbTooltip","Registrar empresa",1,"btn","btn-outline-primary","float-end"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus-square-fill"],["d","M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z"],[1,"p-2","table-responsive"],["datatable","",1,"table","table-striped","table-hover",3,"dtOptions","dtTrigger"],[1,"table-primary","text-white"],["scope","col"],["scope","col",1,"nosort"],[4,"ngFor","ngForOf"],["scope","col",1,"align-middle","cursor-pointer",3,"click"],["scope","col",1,"align-middle"],["placement","left","ngbTooltip","Editar empresa",1,"btn","btn-outline-warning","p-2","py-1","m-1",3,"click"],["width","16","height","16",1,"bi"],[0,"xlink","href","#lapiz"],["placement","left","ngbTooltip","Eliminar empresa",1,"btn","btn-outline-danger","px-2","py-1","m-1",3,"click"],[0,"xlink","href","#papelera"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Gesti\xf3n de empresas"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.abrirAyuda()}),e._uU(5,"?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",0),e.TgZ(8,"div",5),e.TgZ(9,"a",6),e.O4$(),e.TgZ(10,"svg",7),e._UZ(11,"path",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(12,"div",9),e.TgZ(13,"table",10),e.TgZ(14,"thead",11),e.TgZ(15,"tr"),e.TgZ(16,"th",12),e._uU(17,"CIF"),e.qZA(),e.TgZ(18,"th",12),e._uU(19,"Nombre"),e.qZA(),e.TgZ(20,"th",12),e._uU(21,"e-mail contacto"),e.qZA(),e.TgZ(22,"th",12),e._uU(23,"Localidad"),e.qZA(),e.TgZ(24,"th",13),e._uU(25,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,Fe,16,10,"tr",14),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(13),e.Q6J("dtOptions",r.dtOptions)("dtTrigger",r.dtTrigger),e.xp6(14),e.Q6J("ngForOf",r.empresas))},directives:[g._L,F,A.sg],styles:[""]}),o})();function Y(o,i,t){this.x=o,this.y=i,this.time=t||(new Date).getTime()}function ae(o,i,t,r){this.startPoint=o,this.control1=i,this.control2=t,this.endPoint=r}function v(o,i){var t=this,r=i||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this._strokeMoveUpdate=this.throttle?function Se(o,i,t){var r,a,n,s=null,d=0;t||(t={});var u=function(){d=!1===t.leading?0:Date.now(),s=null,n=o.apply(r,a),s||(r=a=null)};return function(){var c=Date.now();!d&&!1===t.leading&&(d=c);var m=i-(c-d);return r=this,a=arguments,m<=0||m>i?(s&&(clearTimeout(s),s=null),d=c,n=o.apply(r,a),s||(r=a=null)):!s&&!1!==t.trailing&&(s=setTimeout(u,m)),n}}(v.prototype._strokeUpdate,this.throttle):v.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=o,this._ctx=o.getContext("2d"),this.clear(),this._handleMouseDown=function(a){1===a.which&&(t._mouseButtonDown=!0,t._strokeBegin(a))},this._handleMouseMove=function(a){t._mouseButtonDown&&t._strokeMoveUpdate(a)},this._handleMouseUp=function(a){1===a.which&&t._mouseButtonDown&&(t._mouseButtonDown=!1,t._strokeEnd(a))},this._handleTouchStart=function(a){1===a.targetTouches.length&&t._strokeBegin(a.changedTouches[0])},this._handleTouchMove=function(a){a.preventDefault(),t._strokeMoveUpdate(a.targetTouches[0])},this._handleTouchEnd=function(a){a.target===t._canvas&&(a.preventDefault(),t._strokeEnd(a))},this.on()}Y.prototype.velocityFrom=function(o){return this.time!==o.time?this.distanceTo(o)/(this.time-o.time):1},Y.prototype.distanceTo=function(o){return Math.sqrt(Math.pow(this.x-o.x,2)+Math.pow(this.y-o.y,2))},Y.prototype.equals=function(o){return this.x===o.x&&this.y===o.y&&this.time===o.time},ae.prototype.length=function(){for(var i=0,t=void 0,r=void 0,a=0;a<=10;a+=1){var n=a/10,s=this._point(n,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),d=this._point(n,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var u=s-t,c=d-r;i+=Math.sqrt(u*u+c*c)}t=s,r=d}return i},ae.prototype._point=function(o,i,t,r,a){return i*(1-o)*(1-o)*(1-o)+3*t*(1-o)*(1-o)*o+3*r*(1-o)*o*o+a*o*o*o},v.prototype.clear=function(){var o=this._ctx,i=this._canvas;o.fillStyle=this.backgroundColor,o.clearRect(0,0,i.width,i.height),o.fillRect(0,0,i.width,i.height),this._data=[],this._reset(),this._isEmpty=!0},v.prototype.fromDataURL=function(o){var i=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Image,a=t.ratio||window.devicePixelRatio||1,n=t.width||this._canvas.width/a,s=t.height||this._canvas.height/a;this._reset(),r.src=o,r.onload=function(){i._ctx.drawImage(r,0,0,n,s)},this._isEmpty=!1},v.prototype.toDataURL=function(o){var i;if("image/svg+xml"===o)return this._toSVG();for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return(i=this._canvas).toDataURL.apply(i,[o].concat(r))},v.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},v.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},v.prototype.isEmpty=function(){return this._isEmpty},v.prototype._strokeBegin=function(o){this._data.push([]),this._reset(),this._strokeUpdate(o),"function"==typeof this.onBegin&&this.onBegin(o)},v.prototype._strokeUpdate=function(o){var r=this._createPoint(o.clientX,o.clientY),a=this._data[this._data.length-1],n=a&&a[a.length-1],s=n&&r.distanceTo(n)<this.minDistance;if(!n||!s){var d=this._addPoint(r),u=d.curve,c=d.widths;u&&c&&this._drawCurve(u,c.start,c.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}},v.prototype._strokeEnd=function(o){var t=this.points[0];if(!(this.points.length>2)&&t&&this._drawDot(t),t){var r=this._data[this._data.length-1];t.equals(r[r.length-1])||r.push({x:t.x,y:t.y,time:t.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(o)},v.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},v.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},v.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},v.prototype._createPoint=function(o,i,t){var r=this._canvas.getBoundingClientRect();return new Y(o-r.left,i-r.top,t||(new Date).getTime())},v.prototype._addPoint=function(o){var i=this.points,t=void 0;if(i.push(o),i.length>2){3===i.length&&i.unshift(i[0]);var r=(t=this._calculateCurveControlPoints(i[0],i[1],i[2])).c2;t=this._calculateCurveControlPoints(i[1],i[2],i[3]);var n=new ae(i[1],r,t.c1,i[2]),s=this._calculateCurveWidths(n);return i.shift(),{curve:n,widths:s}}return{}},v.prototype._calculateCurveControlPoints=function(o,i,t){var r=o.x-i.x,a=o.y-i.y,n=i.x-t.x,s=i.y-t.y,d_x=(o.x+i.x)/2,d_y=(o.y+i.y)/2,u_x=(i.x+t.x)/2,u_y=(i.y+t.y)/2,c=Math.sqrt(r*r+a*a),m=Math.sqrt(n*n+s*s),C=m/(c+m),N=i.x-(u_x+(d_x-u_x)*C),I=i.y-(u_y+(d_y-u_y)*C);return{c1:new Y(d_x+N,d_y+I),c2:new Y(u_x+N,u_y+I)}},v.prototype._calculateCurveWidths=function(o){var r={start:null,end:null},a=this.velocityFilterWeight*o.endPoint.velocityFrom(o.startPoint)+(1-this.velocityFilterWeight)*this._lastVelocity,n=this._strokeWidth(a);return r.start=this._lastWidth,r.end=n,this._lastVelocity=a,this._lastWidth=n,r},v.prototype._strokeWidth=function(o){return Math.max(this.maxWidth/(o+1),this.minWidth)},v.prototype._drawPoint=function(o,i,t){var r=this._ctx;r.moveTo(o,i),r.arc(o,i,t,0,2*Math.PI,!1),this._isEmpty=!1},v.prototype._drawCurve=function(o,i,t){var r=this._ctx,a=t-i,n=Math.floor(o.length());r.beginPath();for(var s=0;s<n;s+=1){var d=s/n,u=d*d,c=u*d,m=1-d,h=m*m,q=h*m,C=q*o.startPoint.x;C+=3*h*d*o.control1.x,C+=3*m*u*o.control2.x;var E=q*o.startPoint.y;E+=3*h*d*o.control1.y,E+=3*m*u*o.control2.y,this._drawPoint(C+=c*o.endPoint.x,E+=c*o.endPoint.y,i+c*a)}r.closePath(),r.fill()},v.prototype._drawDot=function(o){var i=this._ctx,t="function"==typeof this.dotSize?this.dotSize():this.dotSize;i.beginPath(),this._drawPoint(o.x,o.y,t),i.closePath(),i.fill()},v.prototype._fromData=function(o,i,t){for(var r=0;r<o.length;r+=1){var a=o[r];if(a.length>1)for(var n=0;n<a.length;n+=1){var s=a[n],d=new Y(s.x,s.y,s.time),u=s.color;if(0===n)this.penColor=u,this._reset(),this._addPoint(d);else if(n!==a.length-1){var c=this._addPoint(d),m=c.curve,h=c.widths;m&&h&&i(m,h,u)}}else this._reset(),t(a[0])}},v.prototype._toSVG=function(){var o=this,i=this._data,t=this._canvas,r=Math.max(window.devicePixelRatio||1,1),s=t.width/r,d=t.height/r,u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"width",t.width),u.setAttributeNS(null,"height",t.height),this._fromData(i,function(y,D,le){var j=document.createElement("path");if(!(isNaN(y.control1.x)||isNaN(y.control1.y)||isNaN(y.control2.x)||isNaN(y.control2.y))){var Mr="M "+y.startPoint.x.toFixed(3)+","+y.startPoint.y.toFixed(3)+" C "+y.control1.x.toFixed(3)+","+y.control1.y.toFixed(3)+" "+y.control2.x.toFixed(3)+","+y.control2.y.toFixed(3)+" "+y.endPoint.x.toFixed(3)+","+y.endPoint.y.toFixed(3);j.setAttribute("d",Mr),j.setAttribute("stroke-width",(2.25*D.end).toFixed(3)),j.setAttribute("stroke",le),j.setAttribute("fill","none"),j.setAttribute("stroke-linecap","round"),u.appendChild(j)}},function(y){var D=document.createElement("circle"),le="function"==typeof o.dotSize?o.dotSize():o.dotSize;D.setAttribute("r",le),D.setAttribute("cx",y.x),D.setAttribute("cy",y.y),D.setAttribute("fill",y.color),u.appendChild(D)});var m='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+s+" "+d+'" width="'+s+'" height="'+d+'">',h=u.innerHTML;if(void 0===h){var q=document.createElement("dummy"),C=u.childNodes;q.innerHTML="";for(var E=0;E<C.length;E+=1)q.appendChild(C[E].cloneNode(!0));h=q.innerHTML}return"data:image/svg+xml;base64,"+btoa(m+h+"</svg>")},v.prototype.fromData=function(o){var i=this;this.clear(),this._fromData(o,function(t,r){return i._drawCurve(t,r.start,r.end)},function(t){return i._drawDot(t)}),this._data=o},v.prototype.toData=function(){return this._data};const Pe=v;let ue=(()=>{class o{constructor(t){this.elementRef=t,this.options=this.options||{},this.onBeginEvent=new e.vpe,this.onEndEvent=new e.vpe}ngAfterContentInit(){const t=this.elementRef.nativeElement.querySelector("canvas");this.options.canvasHeight&&(t.height=this.options.canvasHeight),this.options.canvasWidth&&(t.width=this.options.canvasWidth),this.signaturePad=new Pe(t,this.options),this.signaturePad.onBegin=this.onBegin.bind(this),this.signaturePad.onEnd=this.onEnd.bind(this)}ngOnDestroy(){const t=this.elementRef.nativeElement.querySelector("canvas");t.width=0,t.height=0}resizeCanvas(){const t=Math.max(window.devicePixelRatio||1,1),r=this.signaturePad.canvas;r.width=r.offsetWidth*t,r.height=r.offsetHeight*t,r.getContext("2d").scale(t,t),this.signaturePad.clear()}toData(){return this.signaturePad?this.signaturePad.toData():[]}fromData(t){this.signaturePad.fromData(t)}toDataURL(t,r){return this.signaturePad.toDataURL(t,r)}fromDataURL(t,r={}){!r.hasOwnProperty("height")&&this.options.canvasHeight&&(r.height=this.options.canvasHeight),!r.hasOwnProperty("width")&&this.options.canvasWidth&&(r.width=this.options.canvasWidth),this.signaturePad.fromDataURL(t,r)}clear(){this.signaturePad.clear()}isEmpty(){return this.signaturePad.isEmpty()}off(){this.signaturePad.off()}on(){this.signaturePad.on()}set(t,r){switch(t){case"canvasHeight":this.signaturePad.canvas.height=r;break;case"canvasWidth":this.signaturePad.canvas.width=r;break;default:this.signaturePad[t]=r}}onBegin(){this.onBeginEvent.emit(!0)}onEnd(){this.onEndEvent.emit(!0)}queryPad(){return this.signaturePad}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))},o.\u0275cmp=e.Xpm({type:o,selectors:[["signature-pad"]],inputs:{options:"options"},outputs:{onBeginEvent:"onBeginEvent",onEndEvent:"onEndEvent"},decls:1,vars:0,template:function(t,r){1&t&&e._UZ(0,"canvas")},encapsulation:2}),o})(),Ye=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[]]}),o})();var ce=b(2843),De=b(590),me=b(262);class Qe{setFirma(i){const t=i;this.codigo_anexo=t.codigo_anexo||"",this.contenido=t.contenido||""}}const je=`${b(2340).N.apiUrlFirma}`;let Le=(()=>{class o{constructor(t){this.http=t}add(t){return console.log(t),this.http.post(`${je}`,t).pipe((0,J.U)(r=>r||{}),(0,me.K)(this.handleError))}handleError(t){let r="";return r=t.error instanceof ErrorEvent?t.error.message:`Error Code: ${t.status}\nMessage: ${t.message}`,(0,ce._)(r)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Re=(()=>{class o{constructor(t,r,a){this.modalActive=t,this.firmaService=r,this.toastr=a,this.signaturePadOptions={minWidth:2,canvasWidth:450,canvasHeight:300},this.unsubscribe=[]}ngAfterViewInit(){this.signaturePad.set("minWidth",2),this.signaturePad.clear()}drawComplete(){}drawStart(){}clearSignature(){this.signaturePad.clear()}savePad(){const t=this.signaturePad.toDataURL();this.signatureImg=t;const r=new Qe;r.codigo_anexo=this.codigo_anexo,r.contenido=this.signatureImg;const a=this.firmaService.add(r).pipe((0,De.P)(),(0,me.K)(n=>(console.log(n),this.toastr.error("El anexo no ha podido ser firmado","Fallo"),(0,ce._)(new Error(n))))).subscribe(n=>{if(n){var s=n;this.toastr.success("Firma a\xf1adida","A\xf1adida"),s.mensaje.replaceAll("\\r","\r").replaceAll("\\n","\n"),this.closeModal()}});this.unsubscribe.push(a)}ngOnInit(){}closeModal(){this.modalActive.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Kz),e.Y36(Le),e.Y36(p._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-firma"]],viewQuery:function(t,r){if(1&t&&e.Gf(ue,5),2&t){let a;e.iGM(a=e.CRH())&&(r.signaturePad=a.first)}},inputs:{codigo_anexo:"codigo_anexo"},decls:14,vars:2,consts:[[1,"card"],[1,"modal-header"],[1,"modal-title","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"signature-container"],[3,"options","onBeginEvent","onEndEvent"],[1,"buttons"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-warning",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Firma de anexo "),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.closeModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.TgZ(7,"div",5),e.TgZ(8,"signature-pad",6),e.NdJ("onBeginEvent",function(){return r.drawStart()})("onEndEvent",function(){return r.drawComplete()}),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"button",8),e.NdJ("click",function(){return r.clearSignature()}),e._uU(11,"Limpiar"),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return r.savePad()}),e._uU(13,"Guardar"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.hij(" ",r.codigo_anexo," "),e.xp6(2),e.Q6J("options",r.signaturePadOptions))},directives:[ue],styles:[".signature-container[_ngcontent-%COMP%]{border-width:1px;margin-bottom:20px;background-color:#f0f0f0;cursor:crosshair}.buttons[_ngcontent-%COMP%]{float:right}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;padding:10px;border-radius:5px}canvas[_ngcontent-%COMP%]{max-width:300px!important}signature-pad[_ngcontent-%COMP%]{max-width:300px!important}"]}),o})(),Ge=(()=>{class o{constructor(t){this.modalActive=t}ngOnInit(){}CloseModal(){this.modalActive.dismiss()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manual-crud-anexos"]],decls:50,vars:0,consts:[[1,"modal-header"],[1,"modal-title","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],[1,"text-info"],[1,"col-12"],[1,"h5"],[1,"text-info","pt-3","fw-underline"],[1,"pt-3"],["src","../../../../assets/Manuales/crud-anexos/Screenshot_3.png","alt","",1,"pb-3"],["src","../../../../assets/Manuales/crud-anexos/Screenshot_4.png","alt","",1,"pb-3"],["src","../../../../assets/Manuales/crud-anexos/Screenshot_5.png","alt","",1,"pb-3"],["src","../../../../assets/Manuales/crud-anexos/Screenshot_6.png","alt","",1,"pb-3"],[1,"text-info","pt-3"],["src","../../../../assets/Manuales/crud-anexos/Screenshot_7.png","alt","",1,"pb-3"],["src","../../../../assets/Manuales/crud-anexos/Screenshot_8.png","alt","",1,"pb-3"],["src","../../../../assets/Manuales/crud-anexos/Screenshot_9.png","alt","",1,"pb-3"],["src","../../../../assets/Manuales/crud-anexos/Screenshot_10.png","alt","",1,"pb-3"],["src","../../../../assets/Manuales/crud-anexos/Screenshot_2.png","alt","",1,"pb-3"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Manual de la lista de Anexos "),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.CloseModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"p",5),e.TgZ(7,"b"),e._uU(8,"Esto es una ayuda para poder manejar la lista de Anexos"),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"h2",7),e._uU(11,"Si eres Tutor, Jefe de estudios o Director:"),e.qZA(),e.TgZ(12,"ul"),e.TgZ(13,"p",8),e.TgZ(14,"b"),e._uU(15,"Explicaci\xf3n de los botones:"),e.qZA(),e.qZA(),e.TgZ(16,"li",9),e._uU(17,"Con este bot\xf3n podras descargar todos los anexos que estan activos en la tabla"),e.qZA(),e._UZ(18,"img",10),e.TgZ(19,"li",9),e._uU(20,"Con este bot\xf3n podras descargar un anexo en concreto, el que se muestra en la linea de la tabla donde se encuentre el bot\xf3n "),e.qZA(),e._UZ(21,"img",11),e.TgZ(22,"li",9),e._uU(23,"Con este bot\xf3n podras firmar un anexo en concreto, el que se muestra en la linea de la tabla donde se encuentre el bot\xf3n "),e.qZA(),e._UZ(24,"img",12),e.TgZ(25,"li",9),e._uU(26,"Con este bot\xf3n podras eliminar un anexo en concreto, el que se muestra en la linea de la tabla donde se encuentre el bot\xf3n "),e.qZA(),e._UZ(27,"img",13),e.TgZ(28,"p",14),e.TgZ(29,"b"),e._uU(30,"Explicaci\xf3n de los campos:"),e.qZA(),e.qZA(),e.TgZ(31,"li"),e._uU(32,"Este campo nos muestra si la empresa ha firmado ese anexo, una linea es No, un check es Si"),e.qZA(),e._UZ(33,"img",15),e.TgZ(34,"li",9),e._uU(35,"Este campo nos muestra si el centro de estudios ha firmado ese anexo, una linea es No, un check es Si"),e.qZA(),e._UZ(36,"img",16),e.TgZ(37,"li",9),e._uU(38,"Este campo nos muestra el tipo de Anexo"),e.qZA(),e._UZ(39,"img",17),e.TgZ(40,"li",9),e._uU(41,"Este campo nos muestra la empresa asociada a ese Anexo"),e.qZA(),e._UZ(42,"img",18),e.qZA(),e.qZA(),e.TgZ(43,"div",6),e.TgZ(44,"h2",7),e._uU(45,"Solo si eres Director o Jefe de estudios:"),e.qZA(),e.TgZ(46,"ul"),e.TgZ(47,"li",9),e._uU(48,"Esto ser\xeda una lista con los grupos vigentes en tu centro"),e.qZA(),e._UZ(49,"img",19),e.qZA(),e.qZA(),e.qZA(),e.qZA())},styles:[""]}),o})(),ze=(()=>{class o{constructor(t){this.http=t,this.ruta="http://127.0.0.1:8000/api/"}getAnexos(t){return this.http.get(this.ruta+"listarAnexos/"+t)}getGrupos(t){return this.http.get(this.ruta+"listarGrupos/"+t)}descargarAnexo(t,r){return this.http.post(this.ruta+"descargarAnexo",{dni_tutor:t,codigo:r},{responseType:"arraybuffer"})}descargarTodo(t){return this.http.post(this.ruta+"descargarTodo",{dni_tutor:t},{responseType:"arraybuffer"})}eliminarAnexo(t,r){r=(r=r.replace("/","*")).replace("/","*");let a=this.ruta+"eliminarAnexo/"+t+"/"+r,n=new _.WM({"Content-Type":"application/json"});return this.http.delete(a,{headers:n})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function He(o,i){1&o&&(e.O4$(),e._UZ(0,"path",26))}function Be(o,i){1&o&&(e.O4$(),e._UZ(0,"path",27))}function $e(o,i){1&o&&(e.O4$(),e._UZ(0,"path",26))}function We(o,i){1&o&&(e.O4$(),e._UZ(0,"path",27))}function Ve(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",12),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"p",14),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td",12),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"td",12),e.O4$(),e.TgZ(10,"svg",15),e.YNc(11,He,1,0,"path",16),e.YNc(12,Be,1,0,"path",17),e.qZA(),e.qZA(),e.kcU(),e.TgZ(13,"td",12),e.O4$(),e.TgZ(14,"svg",18),e.YNc(15,$e,1,0,"path",16),e.YNc(16,We,1,0,"path",17),e.qZA(),e.qZA(),e.kcU(),e.TgZ(17,"td",12),e.TgZ(18,"button",19),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).descargarAnexo(n.codigo)}),e.O4$(),e.TgZ(19,"svg",20),e._UZ(20,"use",21),e.qZA(),e.qZA(),e.kcU(),e.TgZ(21,"button",22),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).abrirModalFirma(n.codigo)}),e.O4$(),e.TgZ(22,"svg",20),e._UZ(23,"use",23),e.qZA(),e.qZA(),e.kcU(),e.TgZ(24,"button",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).eliminarAnexo(n.codigo)}),e.O4$(),e.TgZ(25,"svg",20),e._UZ(26,"use",25),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(3),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.codigo),e.xp6(3),e.Oqu(t.empresa),e.xp6(3),e.Q6J("ngIf",0==t.firma_centro),e.xp6(1),e.Q6J("ngIf",1==t.firma_centro),e.xp6(3),e.Q6J("ngIf",0==t.firma_centro),e.xp6(1),e.Q6J("ngIf",1==t.firma_centro)}}function Xe(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",1),e.TgZ(3,"div",3),e.TgZ(4,"h1",4),e._uU(5,"Gesti\xf3n de Anexos"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().abrirAyuda()}),e._uU(7,"?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",1),e.TgZ(9,"div",2),e.TgZ(10,"form"),e.TgZ(11,"div",6),e.TgZ(12,"div",7),e.TgZ(13,"div",8),e.TgZ(14,"div",6),e.TgZ(15,"div",7),e.TgZ(16,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().descargarTodo()}),e._uU(17,"Descargar todo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"table",10),e.TgZ(19,"thead",11),e.TgZ(20,"tr"),e.TgZ(21,"th",12),e._uU(22,"Anexo"),e.qZA(),e.TgZ(23,"th",12),e._uU(24,"Empresa"),e.qZA(),e.TgZ(25,"th",12),e._uU(26,"Firma de Empresa"),e.qZA(),e.TgZ(27,"th",12),e._uU(28,"Firma de Centro"),e.qZA(),e.TgZ(29,"th",12),e._uU(30,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"tbody"),e.YNc(32,Ve,27,7,"tr",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(18),e.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),e.xp6(14),e.Q6J("ngForOf",t.anexosArray)}}function Ke(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"option",37),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).buscar(n.dni_profesor)}),e._uU(1),e.qZA()}if(2&o){const t=i.$implicit;e.s9C("value",t.dni_profesor),e.xp6(1),e.Oqu(t.cod_grupo)}}function et(o,i){1&o&&(e.O4$(),e._UZ(0,"path",47))}function tt(o,i){1&o&&(e.O4$(),e._UZ(0,"path",48))}function ot(o,i){1&o&&(e.O4$(),e._UZ(0,"path",47))}function rt(o,i){1&o&&(e.O4$(),e._UZ(0,"path",49))}function at(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",36),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.TgZ(4,"p",14),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td",36),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"td",36),e.O4$(),e.TgZ(10,"svg",38),e.YNc(11,et,1,0,"path",39),e.YNc(12,tt,1,0,"path",40),e.qZA(),e.qZA(),e.kcU(),e.TgZ(13,"td",36),e.O4$(),e.TgZ(14,"svg",41),e.YNc(15,ot,1,0,"path",39),e.YNc(16,rt,1,0,"path",42),e.qZA(),e.qZA(),e.kcU(),e.TgZ(17,"td",36),e.TgZ(18,"button",43),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).descargarAnexo(n.codigo)}),e.O4$(),e.TgZ(19,"svg",44),e._UZ(20,"use",21),e.qZA(),e.qZA(),e.kcU(),e.TgZ(21,"button",45),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).abrirModalFirma(n.codigo)}),e.O4$(),e.TgZ(22,"svg",44),e._UZ(23,"use",23),e.qZA(),e.qZA(),e.kcU(),e.TgZ(24,"button",46),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw(2).eliminarAnexo(n.codigo)}),e.O4$(),e.TgZ(25,"svg",44),e._UZ(26,"use",25),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(3),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.codigo),e.xp6(3),e.Oqu(t.empresa),e.xp6(3),e.Q6J("ngIf",0==t.firma_centro),e.xp6(1),e.Q6J("ngIf",1==t.firma_centro),e.xp6(3),e.Q6J("ngIf",0==t.firma_centro),e.xp6(1),e.Q6J("ngIf",1==t.firma_centro)}}function it(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",1),e.TgZ(3,"div",3),e.TgZ(4,"h1",4),e._uU(5,"Gesti\xf3n de Anexos"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().abrirAyuda()}),e._uU(7,"?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",1),e.TgZ(9,"div",2),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e.TgZ(12,"div",8),e.TgZ(13,"div",1),e.TgZ(14,"div",2),e.TgZ(15,"div",28),e.TgZ(16,"div",29),e.TgZ(17,"label",30),e._uU(18,"Grupos "),e.qZA(),e.TgZ(19,"select",31),e.YNc(20,Ke,2,2,"option",32),e.qZA(),e.qZA(),e.TgZ(21,"div",33),e.TgZ(22,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw().descargarTodo()}),e._uU(23,"Descargar todo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"table",35),e.TgZ(25,"thead",11),e.TgZ(26,"tr"),e.TgZ(27,"th",36),e._uU(28,"Anexo"),e.qZA(),e.TgZ(29,"th",36),e._uU(30,"Empresa"),e.qZA(),e.TgZ(31,"th",36),e._uU(32,"Firma de Empresa"),e.qZA(),e.TgZ(33,"th",36),e._uU(34,"Firma de Centro"),e.qZA(),e.TgZ(35,"th",36),e._uU(36,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"tbody"),e.YNc(38,at,27,7,"tr",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(20),e.Q6J("ngForOf",t.gruposArr),e.xp6(4),e.Q6J("dtOptions",t.dtOptions)("dtTrigger",t.dtTrigger),e.xp6(14),e.Q6J("ngForOf",t.anexosArray)}}let nt=(()=>{class o{constructor(t,r,a,n,s,d){var u;this.anexoService=t,this.router=r,this.toastr=a,this.modal=n,this.storageUser=s,this.dialogService=d,this.dtOptions={},this.dtTrigger=new G.x,this.anexosArray=[],this.gruposArr=[],this.codigo="",this.usuario=s.getUser(),this.dni_tutor=null===(u=this.usuario)||void 0===u?void 0:u.dni}ngAfterViewInit(){this.dtTrigger.next(this.anexosArray)}ngOnInit(){delete this.dtOptions.language,this.usuario.isTutor()?this.verAnexos():this.verGrupos()}ngOnDestroy(){this.dtTrigger.unsubscribe()}rerender(){this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next(this.anexosArray)})}verAnexos(){this.anexoService.getAnexos(this.dni_tutor).subscribe(t=>{this.anexosArray=t,t=this.anexosArray.data,this.rerender(),this.dtTrigger.next(this.anexosArray),$.fn.dataTable.ext.errMode="throw"}),$.extend(!0,$.fn.dataTable.defaults,{language:{url:"//cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"}})}verGrupos(){this.anexoService.getGrupos(this.dni_tutor).subscribe(t=>{this.gruposArr=t,this.dniAux=this.gruposArr[0].dni_profesor,this.verAnexosDirector()})}verAnexosDirector(){this.anexoService.getAnexos(this.dniAux).subscribe({next:t=>{this.anexosArray=t,this.toastr.info("Anexos de: "+this.dniAux,"Vistas Anexos"),t=this.anexosArray.data,this.dtTrigger.next(this.anexosArray),$.fn.dataTable.ext.errMode="throw"},error:t=>{console.log(t),this.toastr.error("Los anexos afiliados a este grupo no han podido visualizarse","Fallo"),this.anexosArray=null}}),$.extend(!0,$.fn.dataTable.defaults,{language:{url:"//cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"}})}verAnexosEliminar(){this.anexoService.getAnexos(this.dni_tutor).subscribe(t=>{this.anexosArray=t,t=this.anexosArray.data})}descargarAnexo(t){var r=this;return(0,x.Z)(function*(){var a;if(yield r.dialogService.confirmacion("Descargar","\xbfEst\xe1 seguro de que desea descargar el anexo?")){let s;s=(null===(a=r.usuario)||void 0===a?void 0:a.isTutor())?r.dni_tutor:r.dniAux,r.anexoService.descargarAnexo(s,t).subscribe({next:d=>{new Date;const c=new Blob([d],{type:"application/octet-stream"});S.saveAs(c,t),r.toastr.success("Anexo Descargado","Descarga")},error:d=>{console.log(d),r.toastr.error("El anexo no ha podido descargarse","Fallo")}}),r.router.navigate(["/data-management/crud-anexos"])}else r.toastr.info("No has descargado el anexo","Descarga")})()}descargarTodo(){var t=this;return(0,x.Z)(function*(){var r;if(yield t.dialogService.confirmacion("Descargar","\xbfEst\xe1 seguro de que desea descargar los anexos?")){let n;n=(null===(r=t.usuario)||void 0===r?void 0:r.isTutor())?t.dni_tutor:t.dniAux,t.anexoService.descargarTodo(n).subscribe({next:s=>{const d=new Date,u=new Blob([s],{type:"application/octet-stream"});S.saveAs(u,"backup_"+d.getTime()+".zip"),t.toastr.success("Anexos Descargados","Descarga")},error:s=>{console.log(s),t.toastr.error("Los anexos no han podido descargarse","Fallo")}}),t.router.navigate(["/data-management/crud-anexos"])}else t.toastr.info("No has descargado los anexos","Descarga")})()}eliminarAnexo(t){var r=this;return(0,x.Z)(function*(){var a;if(yield r.dialogService.confirmacion("Eliminar","\xbfEst\xe1 seguro de que desea eliminar el anexo?: "+t)){let s;s=(null===(a=r.usuario)||void 0===a?void 0:a.isTutor())?r.dni_tutor:r.dniAux,r.anexoService.eliminarAnexo(s,t).subscribe({next:d=>{var u;r.toastr.success("Anexo Eliminado","Eliminado"),(null===(u=r.usuario)||void 0===u?void 0:u.isTutor())?r.verAnexos():r.verGrupos()},error:d=>{console.log(d),r.toastr.error("El anexo no ha podido eliminarse","Fallo")}})}else r.toastr.info("Has decidido no eliminar el anexo","No eliminado")})()}abrirModalFirma(t){this.modal.open(Re,{size:"md",backdrop:"static",keyboard:!1}).componentInstance.codigo_anexo=t}abrirAyuda(){this.modal.open(Ge,{size:"lg"})}buscar(t){this.dniAux=t,this.verAnexosDirector()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ze),e.Y36(U.F0),e.Y36(p._W),e.Y36(g.FF),e.Y36(T.L),e.Y36(k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-crud-anexos"]],viewQuery:function(t,r){if(1&t&&e.Gf(F,5),2&t){let a;e.iGM(a=e.CRH())&&(r.dtElement=a.first)}},decls:2,vars:2,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],[1,"col-12","pb-3","page-header","d-flex","justify-content-between"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-default","mr-2","float-end",3,"click"],[1,"row","p-3"],[1,"col-12","bg-white"],[1,"container"],["aria-label","descargarTodo",1,"btn","btn-outline-primary","float-end",3,"click"],["datatable","",1,"table","table-striped","table-bordered","row-border","hover","text-center","table-hover",3,"dtOptions","dtTrigger"],[1,"table-primary","text-white"],["scope","col"],[4,"ngFor","ngForOf"],[2,"display","none"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check-lg"],["d","M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z",4,"ngIf"],["d","M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-dash-lg"],["type","submit","aria-label","descargar",1,"btn","btn-outline-primary","px-2","py-1","me-2",3,"click"],["width","16","height","16",1,"bi"],[0,"xlink","href","#descarga"],["type","submit","aria-label","firma",1,"btn","btn-outline-primary","px-2","py-1","me-2",3,"click"],[0,"xlink","href","#firma"],["type","submit","aria-label","eliminar",1,"btn","btn-outline-danger","px-2","py-1","me-2",3,"click"],[0,"xlink","href","#papelera"],["d","M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z"],["d","M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"],[1,"row","mb-2"],[1,"col-12","col-lg-10","d-flex","justify-content-start","pb-2"],["for","grupos",1,"m-1"],["id","grupos","name","Grupos",1,"form-select","select"],[3,"value","click",4,"ngFor","ngForOf"],[1,"col-12","col-lg-2","d-flex","justify-content-start","justify-content-lg-end","pb-2"],["aria-label","descargarTodo ",1,"btn","btn-outline-primary",3,"click"],["id","tablaDirector","datatable","",1,"table","table-striped","table-bordered","row-border","hover","text-center","table-hover",3,"dtOptions","dtTrigger"],["scope","col "],[3,"value","click"],["xmlns","http://www.w3.org/2000/svg ","width","20 ","height","20 ","fill","currentColor ","viewBox","0 0 16 16 ",1,"bi","bi-check-lg"],["d","M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z ",4,"ngIf"],["d","M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247\n                                                0 0 1 .02-.022Z ",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg ","width","20 ","height","20 ","fill","currentColor ","viewBox","0 0 16 16 ",1,"bi","bi-dash-lg"],["d","M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247\n                                                0 0 1 .02-.022Z",4,"ngIf"],["type","submit ","aria-label","descargar ",1,"btn","btn-outline-primary","px-2","py-1","me-2",3,"click"],["width","16 ","height","16 ",1,"bi"],["type","submit ","aria-label","firma ",1,"btn","btn-outline-primary","px-2","py-1","me-2",3,"click"],["type","submit ","aria-label","eliminar ",1,"btn","btn-outline-danger","px-2","py-1","me-2",3,"click"],["d","M2 8a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11A.5.5 0 0 1 2 8Z "],["d","M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247\n                                                0 0 1 .02-.022Z "],["d","M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247\n                                                0 0 1 .02-.022Z"]],template:function(t,r){1&t&&(e.YNc(0,Xe,33,3,"div",0),e.YNc(1,it,39,4,"div",0)),2&t&&(e.Q6J("ngIf",r.usuario.isTutor()),e.xp6(1),e.Q6J("ngIf",r.usuario.isJefatura()||r.usuario.isDirector()))},directives:[A.O5,g._L,l._Y,l.JL,l.F,F,A.sg,l.YN,l.Kr],styles:[".select[_ngcontent-%COMP%]{width:auto}"]}),o})();function st(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function lt(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1,"Debe tener 8 n\xfameros y 1 letra en may\xfascula."),e.qZA())}function dt(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1,"Debe tener 9 caracteres."),e.qZA())}function ut(o,i){if(1&o&&(e.ynx(0),e.YNc(1,st,2,0,"div",37),e.YNc(2,lt,2,0,"div",37),e.YNc(3,dt,2,0,"div",37),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.cif.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.cif.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.formulario.cif.errors.maxlength)}}function ct(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function mt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,ct,2,0,"div",37),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.nombre.errors.required)}}function pt(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1,"No puede estar vac\xedo"),e.qZA())}function gt(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1,"Debe tener formato de correo electr\xf3nico "),e.qZA())}function _t(o,i){if(1&o&&(e.ynx(0),e.YNc(1,pt,2,0,"div",37),e.YNc(2,gt,2,0,"div",37),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.email)}}function ft(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function Zt(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1,"Debe tener 9 n\xfameros."),e.qZA())}function ht(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1,"Debe tener 9 n\xfameros."),e.qZA())}function vt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,ft,2,0,"div",37),e.YNc(2,Zt,2,0,"div",37),e.YNc(3,ht,2,0,"div",37),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.telefono.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.telefono.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.formulario.telefono.errors.maxlength)}}let bt=(()=>{class o{constructor(t,r){var a;if(this.formBuilder=t,this.router=r,this.submitted=!1,this.correoEmpresa="",this.nombreEmpresa="",this.telefonoEmpresa="",this.cif="",this.tipoEmpresa="0",null!=sessionStorage.getItem(o.empresa)){a=sessionStorage.getItem(o.empresa);var n=JSON.parse(a);this.correoEmpresa=n.correo?n.correo:"",this.nombreEmpresa=n.nombre?n.nombre:"",this.telefonoEmpresa=n.telefono?n.telefono:"",this.cif=n.cif?n.cif:"",this.tipoEmpresa=n.tipoEmpresa?n.tipoEmpresa:"0"}this.empresa=this.formBuilder.group({email:[this.correoEmpresa,[l.kI.required,l.kI.email]],nombre:[this.nombreEmpresa,[l.kI.required]],telefono:[this.telefonoEmpresa,[l.kI.required,l.kI.minLength(9),l.kI.maxLength(9)]],cif:[this.cif,[l.kI.required,l.kI.minLength(9),l.kI.maxLength(9)]],tipoEmpresa:[this.tipoEmpresa,[l.kI.required]]})}ngOnInit(){}get formulario(){return this.empresa.controls}onSubmit(){if(this.submitted=!0,this.empresa.valid){var d={correo:this.empresa.value.email,nombre:this.empresa.value.nombre,telefono:this.empresa.value.telefono,cif:this.empresa.value.cif,tipoEmpresa:this.empresa.value.tipoEmpresa};sessionStorage.setItem(o.empresa,JSON.stringify(d)),console.log(d),this.router.navigateByUrl("data-management/registro-empresa/ubicacion"),this.onReset()}}onReset(){this.submitted=!1,this.empresa.reset()}}return o.empresa="empresa",o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(U.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-empresa"]],decls:82,vars:5,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-default","mr-2"],[1,"col-12","p-2"],[1,"breadcrumb"],["routerLink","/data-management/registro-empresa/representante",1,"item","completed"],[1,"arrow"],[1,"hide-mobile"],[1,"show-mobile"],["routerLink","data-management/registro-empresa/representante",1,"item","active"],[1,"item"],[1,"row","px-4","py-4","d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"col-12","col-lg-8","card","p-3"],[1,"mb-3"],[1,"row","d-flex","align-items-center"],[1,"col-12","col-lg-4","d-lg-flex","justify-content-end"],["for","cif",1,"form-label","fw-bold","m-0"],[1,"col-12","col-lg-8"],["type","text","id","cif","formControlName","cif","placeholder","00000000X",1,"form-control"],[4,"ngIf"],["for","nombre",1,"form-label","fw-bold","m-0"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre de la empresa",1,"form-control"],["for","email",1,"form-label","fw-bold","m-0"],["type","email","id","email","placeholder","empresa@empresa.com","formControlName","email",1,"form-control"],["for","telefono",1,"form-label","fw-bold","m-0"],["type","text","id","telefono","formControlName","telefono","placeholder","000 00 00 00",1,"form-control"],["id","tipo-empresa-label",1,"form-label","fw-bold","m-0"],[1,"col-12","col-lg-4"],[1,"form-check"],["formControlName","tipoEmpresa","type","radio","value","1","name","tipoEmpresa","id","privada","aria-describedby","tipo-empresa-label",1,"form-check-input"],["for","privada",1,"form-check-label"],["formControlName","tipoEmpresa","type","radio","name","tipoEmpresa","value","0","id","publica","ng-checked","true","aria-describedby","tipo-empresa-label",1,"form-check-input"],["for","publica",1,"form-check-label"],[1,"row","py-2","d-flex","justify-content-center"],[1,"col-6","d-flex","justify-content-center"],["type","submit","value","Aceptar y continuar",1,"btn","btn-outline-primary"],["class","text-danger bg-white rounded border border-2 border-danger p-2",4,"ngIf"],[1,"text-danger","bg-white","rounded","border","border-2","border-danger","p-2"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Registro de empresas"),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"a",6),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11,"Representante legal"),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Repre..."),e.qZA(),e.qZA(),e.TgZ(14,"a",10),e._UZ(15,"span",7),e.TgZ(16,"span",8),e._uU(17,"Empresa"),e.qZA(),e.TgZ(18,"span",9),e._uU(19,"Empresa"),e.qZA(),e.qZA(),e.TgZ(20,"a",11),e._UZ(21,"span",7),e.TgZ(22,"span",8),e._uU(23,"Ubicaci\xf3n"),e.qZA(),e.TgZ(24,"span",9),e._uU(25,"Ubicaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(26,"a",11),e.TgZ(27,"span",8),e._uU(28,"Resumen"),e.qZA(),e.TgZ(29,"span",9),e._uU(30,"Resumen"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"form",12),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(32,"div",13),e.TgZ(33,"div",14),e.TgZ(34,"div",15),e.TgZ(35,"div",16),e.TgZ(36,"label",17),e._uU(37,"CIF"),e.qZA(),e.qZA(),e.TgZ(38,"div",18),e._UZ(39,"input",19),e.YNc(40,ut,4,3,"ng-container",20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",14),e.TgZ(42,"div",15),e.TgZ(43,"div",16),e.TgZ(44,"label",21),e._uU(45,"Nombre"),e.qZA(),e.qZA(),e.TgZ(46,"div",18),e._UZ(47,"input",22),e.YNc(48,mt,2,1,"ng-container",20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",14),e.TgZ(50,"div",15),e.TgZ(51,"div",16),e.TgZ(52,"label",23),e._uU(53,"Correo electr\xf3nico"),e.qZA(),e.qZA(),e.TgZ(54,"div",18),e._UZ(55,"input",24),e.YNc(56,_t,3,2,"ng-container",20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",14),e.TgZ(58,"div",15),e.TgZ(59,"div",16),e.TgZ(60,"label",25),e._uU(61,"Tel\xe9fono"),e.qZA(),e.qZA(),e.TgZ(62,"div",18),e._UZ(63,"input",26),e.YNc(64,vt,4,3,"ng-container",20),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",14),e.TgZ(66,"fieldset",15),e.TgZ(67,"div",16),e.TgZ(68,"label",27),e._uU(69,"Tipo de empresa"),e.qZA(),e.qZA(),e.TgZ(70,"div",28),e.TgZ(71,"div",29),e._UZ(72,"input",30),e.TgZ(73,"label",31),e._uU(74," Privada "),e.qZA(),e.qZA(),e.TgZ(75,"div",29),e._UZ(76,"input",32),e.TgZ(77,"label",33),e._uU(78," P\xfablica "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(79,"div",34),e.TgZ(80,"div",35),e._UZ(81,"input",36),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(31),e.Q6J("formGroup",r.empresa),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.cif.errors),e.xp6(8),e.Q6J("ngIf",r.submitted&&r.formulario.nombre.errors),e.xp6(8),e.Q6J("ngIf",r.submitted&&r.formulario.email.errors),e.xp6(8),e.Q6J("ngIf",r.submitted&&r.formulario.telefono.errors))},directives:[g._L,U.yS,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,A.O5,l._],styles:[""]}),o})(),At=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-registro-empresa"]],decls:2,vars:0,template:function(t,r){1&t&&(e.TgZ(0,"p"),e._uU(1,"registro-empresa works!"),e.qZA())},styles:[""]}),o})();function Tt(o,i){1&o&&(e.TgZ(0,"div",30),e._uU(1,"No puede estar vac\xedo"),e.qZA())}function qt(o,i){1&o&&(e.TgZ(0,"div",30),e._uU(1,"Debe tener 8 n\xfameros y 1 letra en may\xfascula"),e.qZA())}function xt(o,i){1&o&&(e.TgZ(0,"div",30),e._uU(1,"Debe tener 9 caracteres"),e.qZA())}function Ct(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Tt,2,0,"div",29),e.YNc(2,qt,2,0,"div",29),e.YNc(3,xt,2,0,"div",29),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.dni.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.dni.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.formulario.dni.errors.maxlength)}}function yt(o,i){1&o&&(e.TgZ(0,"div",30),e._uU(1,"No puede estar vac\xedo"),e.qZA())}function Et(o,i){if(1&o&&(e.ynx(0),e.YNc(1,yt,2,0,"div",29),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.nombre.errors.required)}}function Ut(o,i){1&o&&(e.TgZ(0,"div",30),e._uU(1,"No puede estar vac\xedo."),e.qZA())}function wt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Ut,2,0,"div",29),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.apellido.errors.required)}}function Mt(o,i){1&o&&(e.TgZ(0,"div",30),e._uU(1,"No puede estar vac\xedo"),e.qZA())}function Nt(o,i){1&o&&(e.TgZ(0,"div",30),e._uU(1,"Debe tener formato de correo electr\xf3nico "),e.qZA())}function Jt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Mt,2,0,"div",29),e.YNc(2,Nt,2,0,"div",29),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.email)}}let kt=(()=>{class o{constructor(t,r){this.formBuilder=t,this.router=r,this.submitted=!1;var a="";if(this.correoRepresentante="",this.nombreRepresentante="",this.ape="",this.dni="",null!=sessionStorage.getItem(o.representante)){a=sessionStorage.getItem(o.representante);var n=JSON.parse(a);this.correoRepresentante=n.correo?n.correo:"",this.nombreRepresentante=n.nombre?n.nombre:"",this.ape=n.apellido?n.apellido:"",this.dni=n.dni?n.dni:""}this.representante=this.formBuilder.group({email:[this.correoRepresentante,[l.kI.required,l.kI.email]],nombre:[this.nombreRepresentante,[l.kI.required]],apellido:[this.ape,[l.kI.required]],dni:[this.dni,[l.kI.required,l.kI.minLength(9),l.kI.maxLength(9)]]})}ngOnInit(){}get formulario(){return this.representante.controls}onSubmit(){this.submitted=!0,this.representante.valid&&(sessionStorage.setItem(o.representante,JSON.stringify({correo:this.representante.value.email,nombre:this.representante.value.nombre,apellido:this.representante.value.apellido,dni:this.representante.value.dni})),this.router.navigateByUrl("data-management/registro-empresa/empresa"),this.onReset())}onReset(){this.submitted=!1,this.representante.reset()}}return o.representante="representante",o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(U.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-representante"]],decls:68,vars:5,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-default","mr-2"],[1,"col-12","p-2"],[1,"breadcrumb"],[1,"item","active"],[1,"arrow"],[1,"hide-mobile"],[1,"show-mobile"],[1,"item"],[1,"row","px-4","py-4","d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"col-12","col-lg-8","card","p-3"],[1,"mb-3"],[1,"row","d-flex","align-items-center"],[1,"col-12","col-lg-4","d-lg-flex","justify-content-end"],["for","dni",1,"form-label","fw-bold","m-0"],[1,"col-12","col-lg-8"],["type","text","id","dni","placeholder","00000000X","formControlName","dni",1,"form-control"],[4,"ngIf"],["for","nombre",1,"form-label","fw-bold","m-0"],["type","text","id","nombre","formControlName","nombre","placeholder","Nombre del representante...",1,"form-control"],["for","apellidos",1,"form-label","fw-bold","m-0"],["type","text","id","apellidos","formControlName","apellido","placeholder","Apellidos del representante...",1,"form-control"],["for","email",1,"form-label","fw-bold","m-0"],["type","email","id","email","placeholder","representante@empresa.com","formControlName","email",1,"form-control"],[1,"row","py-2","d-flex","justify-content-center"],[1,"col-6","col-xl-6","d-flex","justify-content-center"],["type","submit","value","Aceptar y continuar",1,"btn","btn-outline-primary"],["class","text-danger bg-white rounded border border-2 border-danger p-2",4,"ngIf"],[1,"text-danger","bg-white","rounded","border","border-2","border-danger","p-2"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Registro de empresas"),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"a",6),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11,"Representante legal"),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Repre..."),e.qZA(),e.qZA(),e.TgZ(14,"a",10),e._UZ(15,"span",7),e.TgZ(16,"span",8),e._uU(17,"Empresa"),e.qZA(),e.TgZ(18,"span",9),e._uU(19,"Empresa"),e.qZA(),e.qZA(),e.TgZ(20,"a",10),e._UZ(21,"span",7),e.TgZ(22,"span",8),e._uU(23,"Ubicaci\xf3n"),e.qZA(),e.TgZ(24,"span",9),e._uU(25,"Ubicaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(26,"a",10),e.TgZ(27,"span",8),e._uU(28,"Resumen"),e.qZA(),e.TgZ(29,"span",9),e._uU(30,"Resumen"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"form",11),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(32,"div",12),e.TgZ(33,"div",13),e.TgZ(34,"div",14),e.TgZ(35,"div",15),e.TgZ(36,"label",16),e._uU(37,"DNI"),e.qZA(),e.qZA(),e.TgZ(38,"div",17),e._UZ(39,"input",18),e.YNc(40,Ct,4,3,"ng-container",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",13),e.TgZ(42,"div",14),e.TgZ(43,"div",15),e.TgZ(44,"label",20),e._uU(45,"Nombre"),e.qZA(),e.qZA(),e.TgZ(46,"div",17),e._UZ(47,"input",21),e.YNc(48,Et,2,1,"ng-container",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",13),e.TgZ(50,"div",14),e.TgZ(51,"div",15),e.TgZ(52,"label",22),e._uU(53,"Apellidos"),e.qZA(),e.qZA(),e.TgZ(54,"div",17),e._UZ(55,"input",23),e.YNc(56,wt,2,1,"ng-container",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",13),e.TgZ(58,"div",14),e.TgZ(59,"div",15),e.TgZ(60,"label",24),e._uU(61,"Correo electr\xf3nico"),e.qZA(),e.qZA(),e.TgZ(62,"div",17),e._UZ(63,"input",25),e.YNc(64,Jt,3,2,"ng-container",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",26),e.TgZ(66,"div",27),e._UZ(67,"input",28),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(31),e.Q6J("formGroup",r.representante),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.dni.errors),e.xp6(8),e.Q6J("ngIf",r.submitted&&r.formulario.nombre.errors),e.xp6(8),e.Q6J("ngIf",r.submitted&&r.formulario.apellido.errors),e.xp6(8),e.Q6J("ngIf",r.submitted&&r.formulario.email.errors))},directives:[g._L,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,A.O5],styles:[""]}),o})(),Ft=(()=>{class o{constructor(t){this.http=t,this.descargarTrigger=new e.vpe,this.ruta="http://localhost:8000/api/"}enviarDatos(t){let r=this.ruta+"addDatosEmpresa",a=new _.WM({"Content-Type":"application/json"});return this.http.post(r,t,{headers:a})}descargarAnexo0(t){return this.http.post(this.ruta+"descargarAnexo0",{ruta_anexo:t},{responseType:"arraybuffer"})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),It=(()=>{class o{constructor(t,r,a,n,s,d){var u;this.router=t,this.formBuilder=r,this.registroEmpresaService=a,this.toastr=n,this.dialogService=s,this.storageUser=d,this.submitted=!1,this.tipoNumero=0,this.correoRep="hola",this.nombreRep="hola",this.apellidosRep="hola",this.dniRep="hola",this.correoEmp="hola",this.nombreEmp="hola",this.telefonoEmp=0,this.cifEmp="hola",this.tipoEmpresa="0",this.localidad="hola",this.direccion="hola",this.provincia="hola",this.cp=0,this.dniTutor=null===(u=d.getUser())||void 0===u?void 0:u.dni,this.resumen=this.formBuilder.group({correoRep:[""],nombreRep:[""],apellidosRep:[""],dniRep:[""],correoEmp:[""],nombreEmp:[""],telefonoEmp:[""],cifEmp:[""],tipoEmpresa:[""],direccion:[""],localidad:[""],provincia:[""],cp:[""]})}ngOnInit(){var t=sessionStorage.getItem(o.repre),r=sessionStorage.getItem(o.empresa),a=sessionStorage.getItem(o.ubi),n=JSON.parse(t);this.correoRep=n.correo,this.nombreRep=n.nombre,this.apellidosRep=n.apellido,this.dniRep=n.dni;var s=JSON.parse(r);this.correoEmp=s.correo,this.nombreEmp=s.nombre,this.telefonoEmp=s.telefono,this.cifEmp=s.cif,this.tipoEmpresa="1"==s.tipoEmpresa?"Privada":"P\xfablica",this.tipoNumero=s.tipoEmpresa;var d=JSON.parse(a);this.localidad=d.localidad,this.direccion=d.direccion,this.provincia=d.provincia,this.cp=d.cp}get formulario(){return this.resumen.controls}onSubmit(){this.submitted=!0,this.resumen.valid&&(this.registroEmpresaService.enviarDatos({empresa:{cif:this.cifEmp,nombre:this.nombreEmp,telefono:this.telefonoEmp,email:this.correoEmp,localidad:this.localidad,provincia:this.provincia,direccion:this.direccion,cp:this.cp,es_privada:this.tipoNumero},representante:{dni:this.dniRep,email:this.correoRep,password:"superman",nombre:this.nombreRep,apellidos:this.apellidosRep},dni:this.dniTutor}).subscribe({next:n=>{let s=n.ruta_anexo;console.log(s),this.abrirModalDialog(s),this.toastr.success("Datos guardados correctamente.","Registro de empresa.")},error:n=>{this.toastr.error("No se han guardado los datos correctamente.","Error al registrar empresa")}}),this.onReset())}onReset(){this.submitted=!1,this.resumen.reset()}abrirModalDialog(t){var r=this;return(0,x.Z)(function*(){(yield r.dialogService.confirmacion("Descargar Anexo 0","Se ha generado el Anexo 0, \xbfQuiere descargarlo?"))&&r.registroEmpresaService.descargarAnexo0(t).subscribe({next:n=>{r.toastr.success("Anexo 0 descargado correctamente.","Descarga Anexo 0.");let d=t.split("\\",3).pop();const u=new Blob([n],{type:"application/octet-stream"});S.saveAs(u,d)},error:n=>{r.toastr.error("No se ha descargado el Anexo 0.","Error al descargar el Anexo 0")}}),r.router.navigateByUrl("data-management/gestion-empresas")})()}}return o.dni_tutor="dni_tutor",o.repre="representante",o.empresa="empresa",o.ubi="ubicacion",o.\u0275fac=function(t){return new(t||o)(e.Y36(U.F0),e.Y36(l.qu),e.Y36(Ft),e.Y36(p._W),e.Y36(k),e.Y36(T.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-resumen"]],decls:143,vars:14,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-default","mr-2"],[1,"col-12","p-2"],[1,"breadcrumb"],["routerLink","/data-management/registro-empresa/representante",1,"item","completed"],[1,"arrow"],[1,"hide-mobile"],[1,"show-mobile"],["routerLink","/data-management/registro-empresa/empresa",1,"item","completed"],["routerLink","/data-management/registro-empresa/ubicacion",1,"item","completed"],["routerLink","data-management/registro-empresa/resumen",1,"item","active"],[1,"row","px-4","py-4","d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"col-12","border","border-black","p-3","card"],[1,"col-xl-4","col-12","px-4"],[1,"col-12","h3","text-center"],[1,"row","border","border-dark","border-1","rounded","p-2","d-flex","align-items-center"],[1,"col-12","mb-3"],[1,"row","d-flex","align-items-center"],[1,"col-12","col-lg-4","d-lg-flex","justify-content-end"],["for","dniRep",1,"form-label","fw-bold","m-0"],[1,"col-12","col-lg-8"],["type","text","id","dniRep","formControlName","dniRep","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","nombreRep",1,"form-label","fw-bold","m-0"],["type","text","id","nombreRep","formControlName","nombreRep","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","apellidosRep",1,"form-label","fw-bold","m-0"],["type","text","id","apellidosRep","formControlName","apellidosRep","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","correoRep",1,"form-label","fw-bold","m-0"],["type","text","id","correoRep","formControlName","correoRep","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],[1,"col-12","text-center","h3"],["for","cifEmp",1,"form-label","fw-bold","m-0"],["type","text","id","cifEmp","formControlName","cifEmp","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","nombreEmp",1,"form-label","fw-bold","m-0"],["type","text","id","nombreEmp","formControlName","nombreEmp","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","correoEmp",1,"form-label","fw-bold","m-0"],["type","text","id","correoEmp","formControlName","correoEmp","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","telefonoEmp",1,"form-label","fw-bold","m-0"],["type","text","id","telefonoEmp","formControlName","telefonoEmp","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","tipoEmpresa",1,"form-label","fw-bold","m-0"],["type","text","id","tipoEmpresa","formControlName","tipoEmpresa","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","localidad",1,"form-label","fw-bold","m-0"],["type","text","id","localidad","formControlName","localidad","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","provincia",1,"form-label","fw-bold","m-0"],["type","text","id","provincia","formControlName","provincia","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","direccion",1,"form-label","fw-bold","m-0"],["type","text","id","direccion","formControlName","direccion","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],["for","cp",1,"form-label","fw-bold","m-0"],["type","text","id","cp","formControlName","cp","readonly","",1,"form-control-plaintext",3,"ngModel","ngModelChange"],[1,"row","py-2","d-flex","align-items-center"],[1,"col-12","col-xl-12","d-flex","justify-content-center"],["type","submit","value","Aceptar y continuar",1,"btn","btn-outline-primary"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Registro de empresas"),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"a",6),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11,"Representante"),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Repre..."),e.qZA(),e.qZA(),e.TgZ(14,"a",10),e._UZ(15,"span",7),e.TgZ(16,"span",8),e._uU(17,"Empresa"),e.qZA(),e.TgZ(18,"span",9),e._uU(19,"Empresa"),e.qZA(),e.qZA(),e.TgZ(20,"a",11),e._UZ(21,"span",7),e.TgZ(22,"span",8),e._uU(23,"Ubicaci\xf3n"),e.qZA(),e.TgZ(24,"span",9),e._uU(25,"Ubicaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(26,"a",12),e.TgZ(27,"span",8),e._uU(28,"Resumen"),e.qZA(),e.TgZ(29,"span",9),e._uU(30,"Resumen"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"form",13),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(32,"div",14),e.TgZ(33,"div",0),e.TgZ(34,"div",15),e.TgZ(35,"div",0),e.TgZ(36,"h2",16),e._uU(37,"Representante"),e.qZA(),e.qZA(),e.TgZ(38,"div",17),e.TgZ(39,"div",18),e.TgZ(40,"div",19),e.TgZ(41,"div",20),e.TgZ(42,"label",21),e._uU(43,"DNI:"),e.qZA(),e.qZA(),e.TgZ(44,"div",22),e.TgZ(45,"input",23),e.NdJ("ngModelChange",function(n){return r.dniRep=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",18),e.TgZ(47,"div",19),e.TgZ(48,"div",20),e.TgZ(49,"label",24),e._uU(50,"Nombre:"),e.qZA(),e.qZA(),e.TgZ(51,"div",22),e.TgZ(52,"input",25),e.NdJ("ngModelChange",function(n){return r.nombreRep=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",18),e.TgZ(54,"div",19),e.TgZ(55,"div",20),e.TgZ(56,"label",26),e._uU(57,"Apellidos:"),e.qZA(),e.qZA(),e.TgZ(58,"div",22),e.TgZ(59,"input",27),e.NdJ("ngModelChange",function(n){return r.apellidosRep=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(60,"div",18),e.TgZ(61,"div",19),e.TgZ(62,"div",20),e.TgZ(63,"label",28),e._uU(64,"E-mail:"),e.qZA(),e.qZA(),e.TgZ(65,"div",22),e.TgZ(66,"input",29),e.NdJ("ngModelChange",function(n){return r.correoRep=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(67,"div",15),e.TgZ(68,"div",0),e.TgZ(69,"h2",30),e._uU(70,"Empresa"),e.qZA(),e.qZA(),e.TgZ(71,"div",17),e.TgZ(72,"div",18),e.TgZ(73,"div",19),e.TgZ(74,"div",20),e.TgZ(75,"label",31),e._uU(76,"CIF:"),e.qZA(),e.qZA(),e.TgZ(77,"div",22),e.TgZ(78,"input",32),e.NdJ("ngModelChange",function(n){return r.cifEmp=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(79,"div",18),e.TgZ(80,"div",19),e.TgZ(81,"div",20),e.TgZ(82,"label",33),e._uU(83,"Nombre:"),e.qZA(),e.qZA(),e.TgZ(84,"div",22),e.TgZ(85,"input",34),e.NdJ("ngModelChange",function(n){return r.nombreEmp=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",18),e.TgZ(87,"div",19),e.TgZ(88,"div",20),e.TgZ(89,"label",35),e._uU(90,"Email:"),e.qZA(),e.qZA(),e.TgZ(91,"div",22),e.TgZ(92,"input",36),e.NdJ("ngModelChange",function(n){return r.correoEmp=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(93,"div",18),e.TgZ(94,"div",19),e.TgZ(95,"div",20),e.TgZ(96,"label",37),e._uU(97,"Tel\xe9fono:"),e.qZA(),e.qZA(),e.TgZ(98,"div",22),e.TgZ(99,"input",38),e.NdJ("ngModelChange",function(n){return r.telefonoEmp=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(100,"div",18),e.TgZ(101,"div",19),e.TgZ(102,"div",20),e.TgZ(103,"label",39),e._uU(104,"Tipo:"),e.qZA(),e.qZA(),e.TgZ(105,"div",22),e.TgZ(106,"input",40),e.NdJ("ngModelChange",function(n){return r.tipoEmpresa=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(107,"div",15),e.TgZ(108,"div",0),e.TgZ(109,"h2",30),e._uU(110,"Ubicaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(111,"div",17),e.TgZ(112,"div",18),e.TgZ(113,"div",19),e.TgZ(114,"div",20),e.TgZ(115,"label",41),e._uU(116,"Localidad:"),e.qZA(),e.qZA(),e.TgZ(117,"div",22),e.TgZ(118,"input",42),e.NdJ("ngModelChange",function(n){return r.localidad=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(119,"div",18),e.TgZ(120,"div",19),e.TgZ(121,"div",20),e.TgZ(122,"label",43),e._uU(123,"Provincia:"),e.qZA(),e.qZA(),e.TgZ(124,"div",22),e.TgZ(125,"input",44),e.NdJ("ngModelChange",function(n){return r.provincia=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(126,"div",18),e.TgZ(127,"div",19),e.TgZ(128,"div",20),e.TgZ(129,"label",45),e._uU(130,"Direcci\xf3n:"),e.qZA(),e.qZA(),e.TgZ(131,"div",22),e.TgZ(132,"input",46),e.NdJ("ngModelChange",function(n){return r.direccion=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(133,"div",18),e.TgZ(134,"div",19),e.TgZ(135,"div",20),e.TgZ(136,"label",47),e._uU(137,"CP:"),e.qZA(),e.qZA(),e.TgZ(138,"div",22),e.TgZ(139,"input",48),e.NdJ("ngModelChange",function(n){return r.cp=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(140,"div",49),e.TgZ(141,"div",50),e._UZ(142,"input",51),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(31),e.Q6J("formGroup",r.resumen),e.xp6(14),e.Q6J("ngModel",r.dniRep),e.xp6(7),e.Q6J("ngModel",r.nombreRep),e.xp6(7),e.Q6J("ngModel",r.apellidosRep),e.xp6(7),e.Q6J("ngModel",r.correoRep),e.xp6(12),e.Q6J("ngModel",r.cifEmp),e.xp6(7),e.Q6J("ngModel",r.nombreEmp),e.xp6(7),e.Q6J("ngModel",r.correoEmp),e.xp6(7),e.Q6J("ngModel",r.telefonoEmp),e.xp6(7),e.Q6J("ngModel",r.tipoEmpresa),e.xp6(12),e.Q6J("ngModel",r.localidad),e.xp6(7),e.Q6J("ngModel",r.provincia),e.xp6(7),e.Q6J("ngModel",r.direccion),e.xp6(7),e.Q6J("ngModel",r.cp))},directives:[g._L,U.yS,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],styles:[""]}),o})();function St(o,i){1&o&&(e.TgZ(0,"div",32),e._uU(1,"No puede estar vac\xeda"),e.qZA())}function Pt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,St,2,0,"div",31),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.localidad.errors.required)}}function Yt(o,i){1&o&&(e.TgZ(0,"div",32),e._uU(1,"No puede estar vac\xeda"),e.qZA())}function Dt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Yt,2,0,"div",31),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.provincia.errors.required)}}function Qt(o,i){1&o&&(e.TgZ(0,"div",32),e._uU(1,"No puede estar vac\xeda"),e.qZA())}function Ot(o,i){if(1&o&&(e.ynx(0),e.YNc(1,Qt,2,0,"div",31),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.direccion.errors.required)}}function jt(o,i){1&o&&(e.TgZ(0,"div",32),e._uU(1,"No puede estar vac\xedo"),e.qZA())}function Lt(o,i){1&o&&(e.TgZ(0,"div",32),e._uU(1,"Debe tener 5 d\xedgitos"),e.qZA())}function Rt(o,i){1&o&&(e.TgZ(0,"div",32),e._uU(1,"Debe tener 5 d\xedgitos"),e.qZA())}function Gt(o,i){if(1&o&&(e.ynx(0),e.YNc(1,jt,2,0,"div",31),e.YNc(2,Lt,2,0,"div",31),e.YNc(3,Rt,2,0,"div",31),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.cp.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.cp.errors.minlength),e.xp6(1),e.Q6J("ngIf",t.formulario.cp.errors.maxlength)}}let zt=(()=>{class o{constructor(t,r){this.formBuilder=t,this.router=r,this.submitted=!1;var a="";if(this.localidad="",this.direccion="",this.provincia="",this.cp="",null!=sessionStorage.getItem(o.ubicacion)){a=sessionStorage.getItem(o.ubicacion);var n=JSON.parse(a);this.localidad=n.localidad?n.localidad:"",this.direccion=n.direccion?n.direccion:"",this.provincia=n.provincia?n.provincia:"",this.cp=n.cp?n.cp:""}this.ubicacion=this.formBuilder.group({localidad:[this.localidad,[l.kI.required]],direccion:[this.direccion,[l.kI.required]],provincia:[this.provincia,[l.kI.required]],cp:[this.cp,[l.kI.required,l.kI.minLength(5),l.kI.maxLength(5)]]})}ngOnInit(){}get formulario(){return this.ubicacion.controls}onSubmit(){if(this.submitted=!0,this.ubicacion.valid){var s={localidad:this.ubicacion.value.localidad,direccion:this.ubicacion.value.direccion,provincia:this.ubicacion.value.provincia,cp:this.ubicacion.value.cp};sessionStorage.setItem(o.ubicacion,JSON.stringify(s)),console.log(s),this.router.navigateByUrl("data-management/registro-empresa/resumen"),this.onReset()}}onReset(){this.submitted=!1,this.ubicacion.reset()}}return o.ubicacion="ubicacion",o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(U.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-ubicacion"]],decls:68,vars:5,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-default","mr-2"],[1,"col-12","p-2"],[1,"breadcrumb"],["routerLink","/data-management/registro-empresa/representante",1,"item","completed"],[1,"arrow"],[1,"hide-mobile"],[1,"show-mobile"],["routerLink","/data-management/registro-empresa/empresa",1,"item","completed"],["routerLink","/data-management/registro-empresa/ubicacion",1,"item","active"],[1,"item"],[1,"row","px-4","py-4","d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"col-12","col-lg-8","card","p-3"],[1,"mb-3"],[1,"row","d-flex","align-items-center"],[1,"col-12","col-lg-4","d-lg-flex","justify-content-end"],["for","localidad",1,"form-label","fw-bold","m-0"],[1,"col-12","col-lg-8"],["type","text","id","localidad","formControlName","localidad","placeholder","Localidad del centro de trabajo",1,"form-control"],[4,"ngIf"],["for","provincia",1,"form-label","fw-bold","m-0"],["type","text","id","provincia","formControlName","provincia","placeholder","Provincia del centro de trabajo",1,"form-control"],["for","direccion",1,"form-label","fw-bold","m-0"],["type","text","id","direccion","id","direccion","formControlName","direccion","placeholder","Av/ Avenida, 123",1,"form-control"],["for","cp",1,"form-label","fw-bold","m-0"],["type","text","id","cp","formControlName","cp","placeholder","00000",1,"form-control"],[1,"row","py-2","d-flex","justify-content-center"],[1,"col-6","d-flex","justify-content-center"],["type","submit","value","Aceptar y continuar",1,"btn","btn-outline-primary"],["class","text-danger bg-white rounded border border-2 border-danger p-2",4,"ngIf"],[1,"text-danger","bg-white","rounded","border","border-2","border-danger","p-2"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Registro de empresas"),e.qZA(),e.TgZ(4,"button",3),e._uU(5,"?"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"a",6),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11,"Representante legal"),e.qZA(),e.TgZ(12,"span",9),e._uU(13,"Repre..."),e.qZA(),e.qZA(),e.TgZ(14,"a",10),e._UZ(15,"span",7),e.TgZ(16,"span",8),e._uU(17,"Empresa"),e.qZA(),e.TgZ(18,"span",9),e._uU(19,"Empresa"),e.qZA(),e.qZA(),e.TgZ(20,"a",11),e._UZ(21,"span",7),e.TgZ(22,"span",8),e._uU(23,"Ubicaci\xf3n"),e.qZA(),e.TgZ(24,"span",9),e._uU(25,"Ubicaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(26,"a",12),e.TgZ(27,"span",8),e._uU(28,"Resumen"),e.qZA(),e.TgZ(29,"span",9),e._uU(30,"Resumen"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"form",13),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(32,"div",14),e.TgZ(33,"div",15),e.TgZ(34,"div",16),e.TgZ(35,"div",17),e.TgZ(36,"label",18),e._uU(37,"Localidad"),e.qZA(),e.qZA(),e.TgZ(38,"div",19),e._UZ(39,"input",20),e.YNc(40,Pt,2,1,"ng-container",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",15),e.TgZ(42,"div",16),e.TgZ(43,"div",17),e.TgZ(44,"label",22),e._uU(45,"Provincia"),e.qZA(),e.qZA(),e.TgZ(46,"div",19),e._UZ(47,"input",23),e.YNc(48,Dt,2,1,"ng-container",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",15),e.TgZ(50,"div",16),e.TgZ(51,"div",17),e.TgZ(52,"label",24),e._uU(53,"Direcci\xf3n"),e.qZA(),e.qZA(),e.TgZ(54,"div",19),e._UZ(55,"input",25),e.YNc(56,Ot,2,1,"ng-container",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",15),e.TgZ(58,"div",16),e.TgZ(59,"div",17),e.TgZ(60,"label",26),e._uU(61,"C\xf3digo Postal"),e.qZA(),e.qZA(),e.TgZ(62,"div",19),e._UZ(63,"input",27),e.YNc(64,Gt,4,3,"ng-container",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"div",28),e.TgZ(66,"div",29),e._UZ(67,"input",30),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(31),e.Q6J("formGroup",r.ubicacion),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.localidad.errors),e.xp6(8),e.Q6J("ngIf",r.submitted&&r.formulario.provincia.errors),e.xp6(8),e.Q6J("ngIf",r.submitted&&r.formulario.direccion.errors),e.xp6(8),e.Q6J("ngIf",r.submitted&&r.formulario.cp.errors))},directives:[g._L,U.yS,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,A.O5],styles:[""]}),o})();class ee{constructor(i,t,r,a,n,s){this.id_jornada=i,this.orden_jornada=t,this.fecha_jornada=r,this.actividades=a,this.observaciones=n,this.tiempo_empleado=s}static JornadaJSON(i){return new ee(i.id_jornada,i.orden_jornada,i.fecha_jornada,i.actividades,i.observaciones,i.tiempo_empleado)}}let ie=(()=>{class o{constructor(t){this.http=t,this.ruta="http://localhost:8000/api/",this.jornadasArray=new K.X(""),this.jornadaTrigger=new e.vpe}addJornada(t,r){let a=this.ruta+"addJornada",n=new _.WM({"Content-Type":"application/json"});return this.http.post(a,{jornada:t,dni_alumno:r},{headers:n})}updateJornada(t,r){let a=this.ruta+"updateJornada",n=new _.WM({"Content-Type":"application/json"});return this.http.post(a,{jornada:t,dni_alumno:r},{headers:n})}getJornadasInArray(t){this.jornadasArray.next(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class ne{constructor(i,t){this.dni=i,this.nombre=t}static tutorJSON(i){return new ne(i.dni,i.nombre)}}let te=(()=>{class o{constructor(t){this.http=t,this.ruta="http://localhost:8000/api/"}escribirDatos(t){let r=this.ruta+"devolverDatosAlumno",a=new _.WM({"Content-Type":"application/json"});return this.http.post(r,{dni:t},{headers:a})}gestionarDepartamento(t){let r=this.ruta+"gestionarDepartamento",a=new _.WM({"Content-Type":"application/json"});return this.http.post(r,{dni:t},{headers:a})}addDepartamento(t,r){let a=this.ruta+"addDepartamento",n=new _.WM({"Content-Type":"application/json"});return this.http.put(a,{dni:t,departamento:r},{headers:n})}sumatorioHorasTotales(t){let r=this.ruta+"sumatorioHorasTotales",a=new _.WM({"Content-Type":"application/json"});return this.http.post(r,{dni:t},{headers:a})}devolverJornadas(t){let r=this.ruta+"devolverJornadas",a=new _.WM({"Content-Type":"application/json"});return this.http.post(r,{dni:t},{headers:a})}descargarPDF(t){return this.http.post(this.ruta+"generarAnexo3",{dni:t},{responseType:"arraybuffer"})}recogerTutorEmpresa(t){let r=this.ruta+"recogerTutorEmpresa",a=new _.WM({"Content-Type":"application/json"});return this.http.post(r,{dni:t},{headers:a})}getTutoresResponsables(t){return this.http.get(this.ruta+"getTutoresResponsables/id="+t).pipe((0,J.U)(a=>a.map(n=>ne.tutorJSON(n))))}guardarTutorSeleccionado(t,r){let a=this.ruta+"actualizarTutorEmpresa",n=new _.WM({"Content-Type":"application/json"});return this.http.put(a,{dni_tutor_nuevo:t,dni_alumno:r},{headers:n})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Ht(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La fecha no puede estar vac\xeda."),e.qZA())}function Bt(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,Ht,2,0,"div",27),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.fecha.errors.required)}}function $t(o,i){1&o&&(e.TgZ(0,"div",26),e.TgZ(1,"div"),e._uU(2,"No se puede introducir una fecha superior a la de hoy. "),e.qZA(),e.qZA())}function Wt(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Las actividades no pueden estar vac\xedas. "),e.qZA())}function Vt(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,Wt,2,0,"div",27),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formulario.actividad.errors.required)}}function Xt(o,i){1&o&&(e.TgZ(0,"div",26),e._uU(1," Las horas no pueden estar vac\xedas. "),e.qZA())}function Kt(o,i){1&o&&(e.TgZ(0,"div",26),e._uU(1," No se pueden a\xf1adir m\xe1s de 10 horas diarias. "),e.qZA())}let eo=(()=>{class o{constructor(t,r,a,n,s,d){var u;this.formBuilder=t,this.modalJornadaService=r,this.modalActive=a,this.seguimientoService=n,this.storageUser=s,this.toastr=d,this.submitted=!1,this.jornadaEdit="",this.jornadasArray=[],this.fecha_invalida=!1,this.usuario=s.getUser(),this.dni_alumno=null===(u=this.usuario)||void 0===u?void 0:u.dni,this.jornada=this.formBuilder.group({fecha:["",[l.kI.required]],actividad:["",[l.kI.required]],observaciones:[""],horas:["",[l.kI.required,l.kI.max(10)]]}),this.modalJornadaService.jornadaTrigger.subscribe(c=>{this.jornadaEdit=c})}ngOnInit(){}get formulario(){return this.jornada.controls}closeModel(){this.modalActive.dismiss()}guardarJornada(){if(this.submitted=!0,!this.jornada.valid||(this.fecha_invalida=this.comprobarFecha(),this.fecha_invalida))return;var a=this.jornada.value.observaciones;null==a&&(a="");let s=new ee(0,0,this.jornada.value.fecha,this.jornada.value.actividad,a,this.jornada.value.horas);this.modalJornadaService.addJornada(s,this.dni_alumno).subscribe({next:d=>{this.toastr.success("Jornada a\xf1adida correctamente.","Nueva jornada"),this.recogerJornadas(),this.closeModel()},error:d=>{this.toastr.error("Oh vaya, algo ha fallado al a\xf1adir una jornada.","Error al a\xf1adir jornada")}})}comprobarFecha(){var t=new Date;return new Date(this.jornada.value.fecha)>t}recogerJornadas(){this.seguimientoService.devolverJornadas(this.dni_alumno).subscribe({next:t=>{this.jornadasArray=t,this.modalJornadaService.getJornadasInArray(this.jornadasArray)},error:t=>{console.log("error en el nombre",t)}})}}return o.dniA="dniA",o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(ie),e.Y36(g.Kz),e.Y36(te),e.Y36(T.L),e.Y36(p._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-add"]],decls:44,vars:6,consts:[[1,"modal-header"],[1,"text-center","modal-title"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x-square"],["d","M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],[1,"modal-body"],[1,"col-12","border","border-dark",3,"formGroup","ngSubmit"],[1,"row","py-4","px-2"],[1,"col-12"],[1,"row","d-flex","align-items-center","py-3"],[1,"col-4","fw-bold","d-flex","justify-content-end"],["for","fecha",1,"form-label","fw-bold","m-0"],[1,"col-8"],["type","date","formControlName","fecha","id","fecha",1,"col-12","form-control"],["class","col-12 col-xl-12 text-danger bg-white rounded border border-2 border-danger p-2",4,"ngIf"],["for","actividades_realizadas",1,"form-label","fw-bold","m-0"],["formControlName","actividad","id","actividades_realizadas","placeholder","Actividades realizadas en la fecha indicada...",1,"col-12","form-control"],["for","observaciones",1,"form-label","fw-bold","m-0"],["formControlName","observaciones","id","observaciones","placeholder","Observaciones...",1,"col-12","form-control"],["for","tiempo_empleado",1,"form-label","fw-bold","m-0"],["type","number","formControlName","horas","name","","id","tiempo_empleado","placeholder","Horas empleadas (M\xe1x. 10)",1,"col-8","form-control"],[1,"row","d-flex","justify-content-center","pt-2"],[1,"col-xl-5","col-5"],[1,"row"],["type","submit","value","Guardar jornada","name","guardar",1,"btn","btn-primary","col-12"],[1,"col-12","col-xl-12","text-danger","bg-white","rounded","border","border-2","border-danger","p-2"],[4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"A\xf1adir jornada"),e.qZA(),e.TgZ(3,"a",2),e.NdJ("click",function(){return r.closeModel()}),e.O4$(),e.TgZ(4,"svg",3),e._UZ(5,"path",4),e._UZ(6,"path",5),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(7,"div",6),e.TgZ(8,"form",7),e.NdJ("ngSubmit",function(){return r.guardarJornada()}),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"div",11),e.TgZ(13,"label",12),e._uU(14,"Fecha:"),e.qZA(),e.qZA(),e.TgZ(15,"div",13),e._UZ(16,"input",14),e.YNc(17,Bt,2,1,"div",15),e.YNc(18,$t,3,0,"div",15),e.qZA(),e.qZA(),e.TgZ(19,"div",10),e.TgZ(20,"div",11),e.TgZ(21,"label",16),e._uU(22,"Actividades realizadas:"),e.qZA(),e.qZA(),e.TgZ(23,"div",13),e._UZ(24,"textarea",17),e.YNc(25,Vt,2,1,"div",15),e.qZA(),e.qZA(),e.TgZ(26,"div",10),e.TgZ(27,"div",11),e.TgZ(28,"label",18),e._uU(29,"Observaciones:"),e.qZA(),e.qZA(),e.TgZ(30,"div",13),e._UZ(31,"textarea",19),e.qZA(),e.qZA(),e.TgZ(32,"div",10),e.TgZ(33,"div",11),e.TgZ(34,"label",20),e._uU(35,"Tiempo empleado:"),e.qZA(),e.qZA(),e.TgZ(36,"div",13),e._UZ(37,"input",21),e.YNc(38,Xt,2,0,"div",15),e.YNc(39,Kt,2,0,"div",15),e.qZA(),e.qZA(),e.TgZ(40,"div",22),e.TgZ(41,"div",23),e.TgZ(42,"div",24),e._UZ(43,"input",25),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("formGroup",r.jornada),e.xp6(9),e.Q6J("ngIf",r.submitted&&r.formulario.fecha.errors),e.xp6(1),e.Q6J("ngIf",r.comprobarFecha()),e.xp6(7),e.Q6J("ngIf",r.submitted&&r.formulario.actividad.errors),e.xp6(13),e.Q6J("ngIf",r.submitted&&r.formulario.horas.errors&&r.formulario.horas.errors.required),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.formulario.horas.errors&&r.formulario.horas.errors.max))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,A.O5,l.wV],styles:[""]}),o})();function to(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La fecha no puede estar vac\xeda."),e.qZA())}function oo(o,i){if(1&o&&(e.TgZ(0,"div",27),e.YNc(1,to,2,0,"div",28),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.fecha.errors.required)}}function ro(o,i){1&o&&(e.TgZ(0,"div",27),e.TgZ(1,"div"),e._uU(2,"No se puede introducir una fecha superior a la de hoy. "),e.qZA(),e.qZA())}function ao(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"Las actividades no pueden estar vac\xedas. "),e.qZA())}function io(o,i){if(1&o&&(e.TgZ(0,"div",27),e.YNc(1,ao,2,0,"div",28),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.actividad.errors.required)}}function no(o,i){1&o&&(e.TgZ(0,"div",27),e._uU(1," Las horas no pueden estar vac\xedas. "),e.qZA())}function so(o,i){1&o&&(e.TgZ(0,"div",27),e._uU(1," No se pueden a\xf1adir m\xe1s de 10 horas diarias. "),e.qZA())}function lo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"div",10),e.TgZ(2,"div",11),e.TgZ(3,"div",12),e.TgZ(4,"label",13),e._uU(5,"Fecha"),e.qZA(),e.qZA(),e.TgZ(6,"div",14),e.TgZ(7,"input",15),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().jornada.fecha_jornada=a})("ngModelChange",function(){return e.CHM(t),e.oxw().onChanges()}),e.qZA(),e.YNc(8,oo,2,1,"div",16),e.YNc(9,ro,3,0,"div",16),e.qZA(),e.qZA(),e.TgZ(10,"div",11),e.TgZ(11,"div",12),e.TgZ(12,"label",17),e._uU(13,"Actividades realizadas"),e.qZA(),e.qZA(),e.TgZ(14,"div",14),e.TgZ(15,"textarea",18),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().jornada.actividades=a})("ngModelChange",function(){return e.CHM(t),e.oxw().onChanges()}),e.qZA(),e.YNc(16,io,2,1,"div",16),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"div",12),e.TgZ(19,"label",19),e._uU(20,"Observaciones:"),e.qZA(),e.qZA(),e.TgZ(21,"div",14),e.TgZ(22,"textarea",20),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().jornada.observaciones=a})("ngModelChange",function(){return e.CHM(t),e.oxw().onChanges()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",11),e.TgZ(24,"div",12),e.TgZ(25,"label",21),e._uU(26,"Tiempo empleado:"),e.qZA(),e.qZA(),e.TgZ(27,"div",14),e.TgZ(28,"input",22),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().jornada.tiempo_empleado=a})("ngModelChange",function(){return e.CHM(t),e.oxw().onChanges()}),e.qZA(),e.YNc(29,no,2,0,"div",16),e.YNc(30,so,2,0,"div",16),e.qZA(),e.qZA(),e.TgZ(31,"div",23),e.TgZ(32,"div",24),e.TgZ(33,"div",25),e._UZ(34,"input",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(7),e.Q6J("ngModel",t.jornada.fecha_jornada),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.fecha.errors),e.xp6(1),e.Q6J("ngIf",t.comprobarFecha()),e.xp6(6),e.Q6J("ngModel",t.jornada.actividades),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.actividad.errors),e.xp6(6),e.Q6J("ngModel",t.jornada.observaciones),e.xp6(6),e.Q6J("ngModel",t.jornada.tiempo_empleado),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.horas.errors&&t.formulario.horas.errors.required),e.xp6(1),e.Q6J("ngIf",t.submitted&&t.formulario.horas.errors&&t.formulario.horas.errors.max)}}let uo=(()=>{class o{constructor(t,r,a,n,s,d,u){var c;this.modalActive=t,this.formBuilder=r,this.modalJornadaService=a,this.seguimientoService=n,this.storageUser=s,this.toastr=d,this.dialogService=u,this.submitted=!1,this.arrayJornadas=[],this.fecha_invalida=!1,this.modified=!1,this.usuario=s.getUser(),this.dni_alumno=null===(c=this.usuario)||void 0===c?void 0:c.dni,this.editarJornada=this.formBuilder.group({fecha:["",[l.kI.required]],actividad:["",[l.kI.required]],observaciones:[""],horas:["",[l.kI.required,l.kI.max(10)]]}),this.modalJornadaService.jornadaTrigger.subscribe(m=>{this.jornada=m})}ngOnInit(){}get formulario(){return this.editarJornada.controls}closeModel(){this.modified?this.confirmacion():this.modalActive.dismiss()}confirmacion(){var t=this;return(0,x.Z)(function*(){(yield t.dialogService.confirmacion("Descartar cambios","Tiene cambios sin guardar, \xbfDesea salir igualmente?"))&&(window.location.reload(),t.modalActive.dismiss())})()}onChanges(){console.log("cambio"),this.editarJornada.valueChanges.subscribe(t=>{this.modified||(this.modified=!0)})}comprobarFecha(){var t=new Date;return new Date(this.editarJornada.value.fecha)>t}editJornada(){if(this.submitted=!0,this.editarJornada.valid&&null!=this.jornada){var t=this.jornada.id_jornada,r=this.jornada.orden_jornada;if(this.fecha_invalida=this.comprobarFecha(),this.fecha_invalida)return;var u=new ee(t,r,this.jornada.fecha_jornada,this.jornada.actividades,this.jornada.observaciones,this.jornada.tiempo_empleado);this.modalJornadaService.updateJornada(u,this.dni_alumno).subscribe({next:c=>{this.toastr.success("La jornada se ha actualizado correctamente.","Editar jornada"),this.recogerJornadas(),this.modalActive.dismiss()},error:c=>{this.toastr.error("No se ha actualizado la jornada.","Error al editar jornada")}})}}recogerJornadas(){this.seguimientoService.devolverJornadas(this.dni_alumno).subscribe({next:t=>{this.arrayJornadas=t,this.modalJornadaService.getJornadasInArray(this.arrayJornadas)},error:t=>{console.log("error en el nombre",t)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Kz),e.Y36(l.qu),e.Y36(ie),e.Y36(te),e.Y36(T.L),e.Y36(p._W),e.Y36(k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-editar"]],decls:10,vars:2,consts:[[1,"modal-header"],[1,"text-center","modal-title"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x-square"],["d","M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],[1,"modal-body"],[1,"col-12","border","border-dark",3,"formGroup","ngSubmit"],["class","row py-4 px-2",4,"ngIf"],[1,"row","py-4","px-2"],[1,"col-12"],[1,"row","d-flex","align-items-center","py-3"],[1,"col-4","fw-bold","d-flex","justify-content-end"],["for","fecha",1,"form-label","fw-bold","m-0"],[1,"col-8"],["type","date","formControlName","fecha","id","fecha",1,"col-12","form-control",3,"ngModel","ngModelChange"],["class","col-12 col-xl-12 text-danger bg-white rounded border border-2 border-danger p-2",4,"ngIf"],["for","actividades_realizadas",1,"form-label","fw-bold","m-0"],["name","","formControlName","actividad","id","actividades_realizadas",1,"col-12","form-control",3,"ngModel","ngModelChange"],["for","observaciones",1,"form-label","fw-bold","m-0"],["name","","formControlName","observaciones","id","observaciones",1,"col-12","form-control",3,"ngModel","ngModelChange"],["for","tiempo_empleado",1,"form-label","fw-bold","m-0"],["type","number","formControlName","horas","name","","id","tiempo_empleado",1,"col-8","form-control",3,"ngModel","ngModelChange"],[1,"row","d-flex","justify-content-center","pt-2"],[1,"col-xl-5","col-5"],[1,"row"],["type","submit","value","Guardar jornada","name","guardar",1,"btn","btn-primary","col-12"],[1,"col-12","col-xl-12","text-danger","bg-white","rounded","border","border-2","border-danger","p-2"],[4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Editar jornada"),e.qZA(),e.TgZ(3,"a",2),e.NdJ("click",function(){return r.closeModel()}),e.O4$(),e.TgZ(4,"svg",3),e._UZ(5,"path",4),e._UZ(6,"path",5),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(7,"div",6),e.TgZ(8,"form",7),e.NdJ("ngSubmit",function(){return r.editJornada()}),e.YNc(9,lo,35,9,"div",8),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("formGroup",r.editarJornada),e.xp6(1),e.Q6J("ngIf",null!=r.jornada))},directives:[l._Y,l.JL,l.sg,A.O5,l.Fj,l.JJ,l.u,l.wV],styles:[""]}),o})();function co(o,i){if(1&o&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.s9C("value",t.dni),e.xp6(1),e.AsE("",t.nombre," - ",t.dni,"")}}let mo=(()=>{class o{constructor(t,r,a,n,s){var d;this.modalActive=t,this.seguimientoService=r,this.toastr=a,this.storageUser=n,this.formBuilder=s,this.arrayTutores=[],this.usuario=n.getUser(),this.dni_alumno=null===(d=this.usuario)||void 0===d?void 0:d.dni,this.nuevo_tutor=this.formBuilder.group({nuevoTu:[0]})}ngOnInit(){this.recogerTotalTutoresRespon()}closeModel(){this.modalActive.dismiss()}recogerTotalTutoresRespon(){let t=sessionStorage.getItem(o.id_empresa);this.seguimientoService.getTutoresResponsables(t).subscribe({next:r=>{this.arrayTutores=r,console.log(this.arrayTutores)},error:r=>{this.toastr.error("No se han recogido los tutores.","Error recogida tutores")}})}actualizarTutor(){this.dni_tutor=this.nuevo_tutor.value.nuevoTu,this.seguimientoService.guardarTutorSeleccionado(this.dni_tutor,this.dni_alumno).subscribe({next:t=>{this.toastr.success("Tutor actualizado correctamente.","Actualizaci\xf3n de tutor"),setTimeout(function(){window.location.reload()},1e3),this.closeModel()},error:t=>{console.log(t),this.toastr.error("Error al actualizar el tutor de la empresa.","Error al actualizar tutor")}})}}return o.id_empresa="id_empresa",o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Kz),e.Y36(te),e.Y36(p._W),e.Y36(T.L),e.Y36(l.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-cambiotutor"]],decls:19,vars:2,consts:[[1,"modal-header"],[1,"text-center","modal-title"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-x-square"],["d","M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"],["d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"],[1,"modal-body"],[1,"row"],[1,"col-12",3,"formGroup","ngSubmit"],[1,"row","d-flex","align-items-center"],[1,"col-4","d-flex","justify-content-center","fw-bold"],["for","newTutor",1,"form-label","fw-bold","m-0"],[1,"col-7","d-flex","justify-content-center"],["formControlName","nuevoTu",1,"form-select","select"],[3,"value",4,"ngFor","ngForOf"],[1,"row","d-flex","justify-content-center","p-3"],["type","submit","value","Guardar",1,"btn","btn-outline-primary","col-3"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Cambiar tutor empresa"),e.qZA(),e.TgZ(3,"a",2),e.NdJ("click",function(){return r.closeModel()}),e.O4$(),e.TgZ(4,"svg",3),e._UZ(5,"path",4),e._UZ(6,"path",5),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"form",8),e.NdJ("ngSubmit",function(){return r.actualizarTutor()}),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"label",11),e._uU(13,"Nuevo tutor:"),e.qZA(),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"select",13),e.YNc(16,co,2,3,"option",14),e.qZA(),e.qZA(),e.TgZ(17,"div",15),e._UZ(18,"input",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formGroup",r.nuevo_tutor),e.xp6(7),e.Q6J("ngForOf",r.arrayTutores))},directives:[l._Y,l.JL,l.sg,l.EJ,l.JJ,l.u,A.sg,l.YN,l.Kr],styles:[""]}),o})(),po=(()=>{class o{constructor(t){this.modalActive=t}ngOnInit(){}closeModal(){this.modalActive.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manual-anexo3"]],decls:94,vars:0,consts:[[1,"modal-header"],[1,"modal-title","fs-2"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"modal-body","p-3"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"fs-4","text-info"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_00.png","alt","Captura de pantalla con la vista la generaci\xf3n de la hoja de seguimiento",1,"img-fluid"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_01.png","alt","Captura de pantalla parte superior de la vista",1,"img-fluid"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_04.png","alt","Captura de pantalla parte superior de la vista",1,"img-fluid"],[1,"d-flex","justify-content-between","align-items-center"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_02.png","alt","Captura de pantalla con el bot\xf3n para a\xf1adir el departamento del alumno",1,"img-fluid","me-3"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_03.png","alt","Captura de pantalla del bot\xf3n para cambiar de tutor en la empresa",1,"img-fluid","me-3"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_05.png","alt","Captura de pantalla del bot\xf3n para a\xf1adir una nueva jornada",1,"img-fluid","me-3"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_06.png","alt","Captura de pantalla del bot\xf3n para descargar la hoja de seguimiento generada",1,"img-fluid","me-3"],[1,"m-0"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_07.png","alt","Captura de pantalla del desplegable de mostrar jornadas",1,"img-fluid","ms-3","border","border-dark"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_08.png","alt","Captura de pantalla del campo b\xfasqueda",1,"img-fluid","me-3","border","border-dark"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_09.png","alt","Captura de pantalla que muestra las jornadas ordenadas ascendentemente por fecha",1,"img-fluid","me-3","border","border-dark"],["src","/assets/Manuales/hoja-seguimiento/Screenshot_10.png","alt","Captura de pantalla del bot\xf3n para descargar la hoja de seguimiento generada",1,"img-fluid","me-3"],[1,"modal-footer"],[1,"btn","btn-outline-primary",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Manual de generaci\xf3n de la hoja de seguimiento"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.closeModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"ul",4),e.TgZ(6,"li",5),e.TgZ(7,"h2",6),e._uU(8,"Vistazo general"),e.qZA(),e.TgZ(9,"p"),e._uU(10,"En la vista de gesti\xf3n de la hoja de seguimiento se muestran por un lado (A) los datos principales, y por otro lado (B) se encuentra el registro de las jornadas diarias que va implementando el alumno."),e.qZA(),e.TgZ(11,"p"),e._uU(12,"En la siguiente imagen puede observar ambas partes:"),e.qZA(),e._UZ(13,"img",7),e.TgZ(14,"p"),e._uU(15,"En las siguientes im\xe1genes puede observar cada uno de los elementos de la parte superior (A), y de la parte central (B), numerados."),e.qZA(),e._UZ(16,"img",8),e._UZ(17,"img",9),e.qZA(),e.TgZ(18,"li",5),e.TgZ(19,"h2",6),e._uU(20,"1. A\xf1adir departamento"),e.qZA(),e.TgZ(21,"div",10),e._UZ(22,"img",11),e.TgZ(23,"div"),e.TgZ(24,"p"),e._uU(25,"Este bot\xf3n, situado en la parte superior, permite a\xf1adir el departamento al que est\xe1 asignado el alumno dentro de la empresa en la que realiza las pr\xe1cticas"),e.qZA(),e.TgZ(26,"p"),e._uU(27,"Una vez a\xf1adido el departamento, no habr\xe1 que volver a hacerlo puesto que se quedar\xe1 ya establecido"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"li",5),e.TgZ(29,"h2",6),e._uU(30,"2. Cambiar tutor asignado en la empresa"),e.qZA(),e.TgZ(31,"div",10),e._UZ(32,"img",12),e.TgZ(33,"div"),e.TgZ(34,"p"),e._uU(35,"Al pulsar este bot\xf3n, situado en la parte superior,aparecer\xe1 un modal donde tendr\xe1 la opci\xf3n de cambiar su tutor en la empresa."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"li",5),e.TgZ(37,"h2",6),e._uU(38,"3. A\xf1adir nueva jornada"),e.qZA(),e.TgZ(39,"div",10),e._UZ(40,"img",13),e.TgZ(41,"div"),e.TgZ(42,"p"),e._uU(43,'Al pulsar este bot\xf3n, situado en la parte central, aparecer\xe1 un modal donde tendr\xe1 la que rellenar los campos necesarios para a\xf1adir una nueva jornada. El campo "Observaciones" es opcional. '),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"li",5),e.TgZ(45,"h2",6),e._uU(46,"4. Descargar hoja de seguimiento"),e.qZA(),e.TgZ(47,"div",10),e._UZ(48,"img",14),e.TgZ(49,"div"),e.TgZ(50,"p"),e._uU(51,"Este bot\xf3n, situado en la parte lateral derecha de la vista, aparecer\xe1 cada vez que rellene 5 jornadas nuevas. "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"li",5),e.TgZ(53,"h2",6),e._uU(54,"5. Cantidad de registros a mostrar"),e.qZA(),e.TgZ(55,"div",10),e.TgZ(56,"div"),e.TgZ(57,"p"),e._uU(58,"Puede clickear sobre el desplegable para seleccionar cu\xe1ntos registros quiere ver en cada p\xe1gina"),e.qZA(),e.TgZ(59,"p",15),e._uU(60,"Mostrar m\xe1s de 50 registros puede reducir el rendimiento de la aplicaci\xf3n"),e.qZA(),e.qZA(),e._UZ(61,"img",16),e.qZA(),e.qZA(),e.TgZ(62,"li",5),e.TgZ(63,"h2",6),e._uU(64,"6. B\xfasqueda por cualquier campo"),e.qZA(),e.TgZ(65,"p"),e._uU(66,"Puede buscar jornadas registradas usando la barra de b\xfasquedas en la parte superior derecha de la tabla"),e.qZA(),e._UZ(67,"img",17),e.TgZ(68,"p"),e._uU(69,"Puede buscar una jornada por cualquiera de los campos de la tabla: Jornada, Fecha, Actividades realizadas, Observaciones y Horas "),e.qZA(),e.qZA(),e.TgZ(70,"li",5),e.TgZ(71,"h2",6),e._uU(72,"7. Ordenar seg\xfan campo"),e.qZA(),e.TgZ(73,"p"),e._uU(74,"Puede ordenar las jornadas en orden ascendente o descendente de cualquiera de los campos de la tabla clickeando sobre el t\xedtulo de la columna"),e.qZA(),e.TgZ(75,"p"),e._uU(76,"En este caso, se muestran las fechas ordenadas ascendentemente"),e.qZA(),e._UZ(77,"img",18),e.qZA(),e.TgZ(78,"li",5),e.TgZ(79,"h2",6),e._uU(80,"8. Editar una jornada"),e.qZA(),e.TgZ(81,"div",10),e._UZ(82,"img",19),e.TgZ(83,"div"),e.TgZ(84,"p"),e._uU(85,'Este bot\xf3n, situado en cada registro de la tabla, abrir\xe1 un modal que le permitir\xe1 editar los datos de cada registro. El campo "observaciones" es opcional. '),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"li",5),e.TgZ(87,"h2",6),e._uU(88,"9. Navegar por las p\xe1ginas de datos"),e.qZA(),e.TgZ(89,"p"),e._uU(90,"Utilice los botones de la esquina inferior derecha de la pantalla para navegar por las p\xe1ginas de datos"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(91,"div",20),e.TgZ(92,"button",21),e.NdJ("click",function(){return r.closeModal()}),e._uU(93,"Volver"),e.qZA(),e.qZA())},styles:[""]}),o})();function go(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El Departamento no puede estar vac\xedo."),e.qZA())}function _o(o,i){if(1&o&&(e.TgZ(0,"div",47),e.YNc(1,go,2,0,"div",48),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.depto.errors.required)}}function fo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",38),e.TgZ(1,"form",39),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().guardarDepartamento()}),e.TgZ(2,"div",7),e.TgZ(3,"div",8),e.TgZ(4,"label",40),e._uU(5,"Departamento:"),e.qZA(),e.qZA(),e.TgZ(6,"div",19),e._UZ(7,"input",41),e.qZA(),e.TgZ(8,"div",21),e.TgZ(9,"button",42),e.O4$(),e.TgZ(10,"svg",43),e._UZ(11,"path",44),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(12,"div",45),e.YNc(13,_o,2,1,"div",46),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.deptoForm),e.xp6(12),e.Q6J("ngIf",t.submitted&&t.formulario.depto.errors)}}function Zo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.TgZ(2,"label",49),e._uU(3,"Departamento:"),e.qZA(),e.qZA(),e.TgZ(4,"div",10),e.TgZ(5,"input",50),e.NdJ("ngModelChange",function(a){return e.CHM(t),e.oxw().departamento=a}),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.departamento)}}function ho(o,i){if(1&o){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",51),e.TgZ(1,"button",52),e.NdJ("click",function(){return e.CHM(t),e.oxw().descargarPDF()}),e.O4$(),e.TgZ(2,"svg",53),e._UZ(3,"path",54),e.qZA(),e.qZA(),e.qZA()}}function vo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr",55),e.TgZ(1,"td",56),e._uU(2),e.qZA(),e.TgZ(3,"td",56),e._uU(4),e.qZA(),e.TgZ(5,"td",56),e._uU(6),e.qZA(),e.TgZ(7,"td",56),e._uU(8),e.qZA(),e.TgZ(9,"td",56),e._uU(10),e.qZA(),e.TgZ(11,"td",57),e.TgZ(12,"button",58),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().editar(n)}),e.O4$(),e.TgZ(13,"svg",59),e._UZ(14,"use",60),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(2),e.hij(" ",t.orden_jornada," "),e.xp6(2),e.hij("",t.fecha_jornada," "),e.xp6(2),e.Oqu(t.actividades),e.xp6(2),e.hij("",t.observaciones," "),e.xp6(2),e.hij(" ",t.tiempo_empleado," ")}}let bo=(()=>{class o{constructor(t,r,a,n,s,d,u,c){var m;this.formBuilder=t,this.router=r,this.modal=a,this.modalJornadaService=n,this.seguimientoService=s,this.storageUser=d,this.toastr=u,this.dialogService=c,this.dtOptions={},this.dtTrigger=new G.x,this.arrayJornadas=[],this.departamentoEstablecido=!1,this.submitted=!1,this.horasTotales=0,this.botonDescargar=!1,this.botonVer=!1,this.tutor_empresa="",this.usuario=d.getUser(),this.dni_alumno=null===(m=this.usuario)||void 0===m?void 0:m.dni,this.deptoForm=this.formBuilder.group({depto:["",[l.kI.required]]})}ngAfterViewInit(){this.dtTrigger.next(this.arrayJornadas)}ngOnInit(){this.arrayJornadas=this.rellenarArray(),this.ponerNombre(),this.recogerTutorEmpresa(),this.gestionDepartamento(),this.sumatorioHorasTotales(),this.getArrayJornadas()}ngOnDestroy(){this.dtTrigger.unsubscribe()}rerender(){this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next(this.arrayJornadas)})}recogerTutorEmpresa(){this.seguimientoService.recogerTutorEmpresa(this.dni_alumno).subscribe({next:t=>{this.tutor_empresa=t[0].dni_tutor+" - "+t[0].nombre_tutor,sessionStorage.setItem(o.id_empresa,JSON.stringify(t[1]))},error:t=>{this.toastr.error("No se ha podido recoger el tutor empresa.","Error al recoger el tutor")}})}modalCambiarTutor(){this.modal.open(mo,{size:"xs"})}get formulario(){return this.deptoForm.controls}getArrayJornadas(){this.modalJornadaService.jornadasArray.subscribe(t=>{this.arrayJornadas=t;var r=this.arrayJornadas.length;this.sumatorioHorasTotales(),r>=5&&r%5==0&&(this.botonDescargar=!0,this.botonVer=!1),r>5&&r%5!=0&&(this.botonVer=!0,this.botonDescargar=!1),this.rerender()})}nuevaJornada(){this.modal.open(eo,{size:"m"})}rellenarArray(){return this.seguimientoService.devolverJornadas(this.dni_alumno).subscribe({next:t=>{this.arrayJornadas=t;var r=this.arrayJornadas.length;r>=5&&r%5==0&&(this.botonDescargar=!0,this.botonVer=!1),r>5&&r%5!=0&&(this.botonVer=!0,this.botonDescargar=!1),this.rerender(),$.fn.dataTable.ext.errMode="throw",this.dtTrigger.next(this.arrayJornadas)},error:t=>{this.toastr.error("No se han podido mostrar las jornadas.","Error al mostrar jornadas")}}),$.extend(!0,$.fn.dataTable.defaults,{language:{url:"//cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"},columnDefs:[{targets:"nosort",orderable:!1}]}),this.arrayJornadas}editar(t){this.modal.open(uo,{size:"m"}),this.modalJornadaService.jornadaTrigger.emit(t)}ponerNombre(){this.seguimientoService.escribirDatos(this.dni_alumno).subscribe({next:t=>{this.nombre_alumno=t[0].nombre_alumno+" "+t[0].apellidos_alumno,this.nombre_empresa=t[0].nombre_empresa},error:t=>{this.toastr.error("No se ha podido mostrar ni el nombre del alumno ni de la empresa.","Error al mostrar datos"),console.log("error en el nombre",t)}})}gestionDepartamento(){this.seguimientoService.gestionarDepartamento(this.dni_alumno).subscribe({next:t=>{""!=t[0].departamento?(this.departamentoEstablecido=!0,this.departamento=t[0].departamento):this.departamentoEstablecido=!1},error:t=>{this.toastr.error("No se ha podido mostrar el departamento.","Error al mostrar departamento")}})}guardarDepartamento(){this.submitted=!0,this.deptoForm.valid&&(this.departamento=this.deptoForm.value.depto,this.seguimientoService.addDepartamento(this.dni_alumno,this.departamento).subscribe({next:t=>{this.departamentoEstablecido=!0},error:t=>{this.toastr.error("No se ha podido a\xf1adir el departamento.","Error al a\xf1adir departamento")}}))}sumatorioHorasTotales(){this.seguimientoService.sumatorioHorasTotales(this.dni_alumno).subscribe({next:t=>{this.horasTotales=t},error:t=>{this.toastr.error("No se ha podido mostrar las horas totales.","Error al mostrar horas totales")}})}descargarPDF(){var t=this;return(0,x.Z)(function*(){""==t.deptoForm.value.depto?t.toastr.error("No puedes descargar el documento sin a\xf1adir el departamento.","Error al descargar el documento"):(yield t.dialogService.confirmacion("Descargar Anexo III","Se ha generado tu hoja de seguimiento, \xbfQuiere descargarla?"))&&t.seguimientoService.descargarPDF(t.dni_alumno).subscribe({next:a=>{const n=new Blob([a],{type:"application/octet-stream"});S.saveAs(n,"hoja_seguimiento.docx"),t.toastr.success("Se ha descargado la hoja de seguimiento correctamente.","Generaci\xf3n de Anexo III")},error:a=>{t.toastr.error("No se ha podido generar el documento correctamente.","Error en la generaci\xf3n del Anexo III")}})})()}abrirAyuda(){this.modal.open(po,{size:"lg"})}}return o.id_empresa="id_empresa",o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(U.F0),e.Y36(g.FF),e.Y36(ie),e.Y36(te),e.Y36(T.L),e.Y36(p._W),e.Y36(k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-seguimiento"]],viewQuery:function(t,r){if(1&t&&e.Gf(F,5),2&t){let a;e.iGM(a=e.CRH())&&(r.dtElement=a.first)}},decls:74,vars:10,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-default","mr-2",3,"click"],[1,"card","p-3"],[1,"row","p-4"],[1,"col-6"],[1,"row","p-2"],[1,"col-xl-3","col-12"],["for","alumno",1,"form-label","fw-bold","m-0"],[1,"col-xl-9","col-12"],["type","text","name","","id","alumno","readonly","",3,"ngModel","ngModelChange"],["for","empresa",1,"form-label","fw-bold","m-0"],["type","text","name","","id","empresa","readonly","",3,"ngModel","ngModelChange"],["class","row py-2 d-flex align-items-center",4,"ngIf"],["class","row p-2",4,"ngIf"],["for","horas_totales",1,"form-label","fw-bold","m-0"],["type","text","name","","id","horas_totales","readonly","",3,"ngModel","ngModelChange"],["for","tutor_empresa",1,"form-label","fw-bold","m-0"],[1,"col-xl-5","col-12"],["type","text","name","","id","tutor_empresa","readonly","",3,"ngModel","ngModelChange"],[1,"col-xl-4","col-12"],["type","submit","value","","ngbTooltip","Editar tutor empresa","aria-label","Editar",1,"btn","btn-outline-warning","px-2","py-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-fill"],["d","M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"],[1,"col-12","col-xl-2","p-1"],[1,"h4"],[1,"col-xl-8","col-6","p-1","text-center"],["type","submit","aria-label","A\xf1adir jornada","ngbTooltip","A\xf1adir jornada","value","Nueva jornada","name","nuevaJornada",1,"btn","btn-outline-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus-square-fill"],["d","M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z"],["class","col-xl-2 col-6 p-2 text-center d-flex justify-content-end",4,"ngIf"],[1,"col-12","p-2","table-responsive"],["datatable","",1,"table","table-striped","table-hover","text-center",3,"dtOptions","dtTrigger"],[1,"table-primary","text-white"],["scope","col"],["scope","col",1,"nosort"],["class","bg-primary bg-opacity-50 text-center",4,"ngFor","ngForOf"],[1,"row","py-2","d-flex","align-items-center"],[1,"col-12",3,"formGroup","ngSubmit"],["for","departamento",1,"form-label","fw-bold","m-0"],["type","text","placeholder","Inform\xe1tica...","id","departamento","formControlName","depto"],["type","submit","aria-label","A\xf1adir departamento","ngbTooltip","A\xf1adir departamento",1,"btn","btn-outline-warning","px-2","py-1"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-save2-fill"],["d","M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v6h-2a.5.5 0 0 0-.354.854l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5A.5.5 0 0 0 10.5 7.5h-2v-6z"],[1,"row","text-center","pt-2"],["class","col-12 col-xl-12",4,"ngIf"],[1,"col-12","col-xl-12"],[4,"ngIf"],["for","departamento2",1,"form-label","fw-bold","m-0"],["type","text","name","","id","departamento2","readonly","",3,"ngModel","ngModelChange"],[1,"col-xl-2","col-6","p-2","text-center","d-flex","justify-content-end"],["type","button","aria-label","Descargar documento","ngbTooltip","Descargar documento","value","Descargar documento","name","descargarDoc",1,"btn","btn-outline-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-file-earmark-arrow-down-fill"],["d","M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zm-1 4v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 11.293V7.5a.5.5 0 0 1 1 0z"],[1,"bg-primary","bg-opacity-50","text-center"],["scope","col",1,"align-middle","cursor-pointer",2,"max-width","15em"],["scope","col",1,"align-middle"],["tittle","editar","ngbTooltip","Editar jornada","aria-label","Editar",1,"btn","btn-outline-warning","px-2","py-1",3,"click"],["width","16","height","16",1,"bi"],[0,"xlink","href","#lapiz"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Seguimiento de pr\xe1cticas"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.abrirAyuda()}),e._uU(5,"?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",0),e.TgZ(9,"div",6),e.TgZ(10,"div",7),e.TgZ(11,"div",8),e.TgZ(12,"label",9),e._uU(13,"Alumno:"),e.qZA(),e.qZA(),e.TgZ(14,"div",10),e.TgZ(15,"input",11),e.NdJ("ngModelChange",function(n){return r.nombre_alumno=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",6),e.TgZ(17,"div",7),e.TgZ(18,"div",8),e.TgZ(19,"label",12),e._uU(20,"Empresa:"),e.qZA(),e.qZA(),e.TgZ(21,"div",10),e.TgZ(22,"input",13),e.NdJ("ngModelChange",function(n){return r.nombre_empresa=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",0),e.TgZ(24,"div",6),e.YNc(25,fo,14,2,"div",14),e.YNc(26,Zo,6,1,"div",15),e.qZA(),e.TgZ(27,"div",6),e.TgZ(28,"div",7),e.TgZ(29,"div",8),e.TgZ(30,"label",16),e._uU(31,"Horas totales:"),e.qZA(),e.qZA(),e.TgZ(32,"div",10),e.TgZ(33,"input",17),e.NdJ("ngModelChange",function(n){return r.horasTotales=n}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",0),e.TgZ(35,"div",6),e.TgZ(36,"div",7),e.TgZ(37,"div",8),e.TgZ(38,"label",18),e._uU(39,"Tutor empresa:"),e.qZA(),e.qZA(),e.TgZ(40,"div",19),e.TgZ(41,"input",20),e.NdJ("ngModelChange",function(n){return r.tutor_empresa=n}),e.qZA(),e.qZA(),e.TgZ(42,"div",21),e.TgZ(43,"button",22),e.NdJ("click",function(){return r.modalCambiarTutor()}),e.O4$(),e.TgZ(44,"svg",23),e._UZ(45,"path",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(46,"div",0),e.TgZ(47,"div",25),e.TgZ(48,"h2",26),e._uU(49,"JORNADAS"),e.qZA(),e.qZA(),e.TgZ(50,"div",27),e.TgZ(51,"button",28),e.NdJ("click",function(){return r.nuevaJornada()}),e.O4$(),e.TgZ(52,"svg",29),e._UZ(53,"path",30),e.qZA(),e.qZA(),e.qZA(),e.YNc(54,ho,4,0,"div",31),e.qZA(),e.kcU(),e.TgZ(55,"div",0),e.TgZ(56,"div",32),e.TgZ(57,"table",33),e.TgZ(58,"thead",34),e.TgZ(59,"tr"),e.TgZ(60,"th",35),e._uU(61,"Jornada"),e.qZA(),e.TgZ(62,"th",35),e._uU(63,"Fecha"),e.qZA(),e.TgZ(64,"th",35),e._uU(65,"Actividades realizadas"),e.qZA(),e.TgZ(66,"th",35),e._uU(67,"Observaciones"),e.qZA(),e.TgZ(68,"th",35),e._uU(69,"Horas"),e.qZA(),e.TgZ(70,"th",36),e._uU(71,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(72,"tbody"),e.YNc(73,vo,15,5,"tr",37),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(15),e.Q6J("ngModel",r.nombre_alumno),e.xp6(7),e.Q6J("ngModel",r.nombre_empresa),e.xp6(3),e.Q6J("ngIf",!r.departamentoEstablecido),e.xp6(1),e.Q6J("ngIf",r.departamentoEstablecido),e.xp6(7),e.Q6J("ngModel",r.horasTotales),e.xp6(8),e.Q6J("ngModel",r.tutor_empresa),e.xp6(13),e.Q6J("ngIf",r.botonDescargar),e.xp6(3),e.Q6J("dtOptions",r.dtOptions)("dtTrigger",r.dtTrigger),e.xp6(16),e.Q6J("ngForOf",r.arrayJornadas))},directives:[g._L,l.Fj,l.JJ,l.On,A.O5,F,A.sg,l._Y,l.JL,l.sg,l.u],styles:[""]}),o})();class Q{constructor(i,t,r,a,n,s,d,u){this.dni=i,this.email=t,this.nombre=r,this.apellidos=a,this.password1=n,this.password2=s,this.roles=d,this.personaAux=u}static userJSON(i){return new Q(i.dni,i.email,i.nombre,i.apellidos,i.password1,i.password2,i.roles,i.personaAux)}}let pe=(()=>{class o{constructor(t){this.http=t,this.ruta="http://127.0.0.1:8000/api/",this.profesoresArray=new K.X("")}getProfesores(t){return this.http.get(this.ruta+"listarProfesores/"+t)}getProfesor(t){return this.http.get(this.ruta+"listarProfesor/"+t)}getProfesorEdit(t){return this.http.get(this.ruta+"listarProfesorEditar/"+t)}eliminarProfesor(t){let r=this.ruta+"eliminarProfesor/"+t,a=new _.WM({"Content-Type":"application/json"});return this.http.delete(r,{headers:a})}editarUser(t){let r=this.ruta+"modificarProfesor",a=new _.WM({"Content-Type":"application/json"});return this.http.post(r,t,{headers:a}).pipe((0,J.U)(n=>Q.userJSON(t)))}registrarProfesor(t){let r=this.ruta+"addProfesor",a=new _.WM({"Content-Type":"application/json"});return this.http.post(r,t,{headers:a}).pipe((0,J.U)(n=>Q.userJSON(t)))}getProfesoresInArray(t){this.profesoresArray.next(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Ao(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",24),e.qZA())}function To(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",25),e.qZA())}function qo(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",26),e.qZA())}function xo(o,i){1&o&&(e.TgZ(0,"div"),e._UZ(1,"input",27),e.qZA())}function Co(o,i){if(1&o&&(e.TgZ(0,"div",22),e.YNc(1,Ao,2,0,"div",23),e.YNc(2,To,2,0,"div",23),e.YNc(3,qo,2,0,"div",23),e.YNc(4,xo,2,0,"div",23),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngIf",1==t),e.xp6(1),e.Q6J("ngIf",2==t),e.xp6(1),e.Q6J("ngIf",3==t),e.xp6(1),e.Q6J("ngIf",4==t)}}function yo(o,i){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,Co,5,4,"div",21),e.qZA()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("ngForOf",t.roles)}}function Eo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h1",3),e._uU(3),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().CloseModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"form",6),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"label",9),e.TgZ(10,"b"),e._uU(11,"Nombre:"),e.qZA(),e.qZA(),e._UZ(12,"input",10),e.qZA(),e.TgZ(13,"div",11),e.TgZ(14,"label",12),e.TgZ(15,"b"),e._uU(16,"Apellido:"),e.qZA(),e.qZA(),e._UZ(17,"input",13),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"label",14),e.TgZ(20,"b"),e._uU(21,"DNI:"),e.qZA(),e.qZA(),e._UZ(22,"input",15),e.qZA(),e.TgZ(23,"div",11),e.TgZ(24,"label",16),e.TgZ(25,"b"),e._uU(26,"Email:"),e.qZA(),e.qZA(),e._UZ(27,"input",17),e.qZA(),e.qZA(),e._UZ(28,"hr",18),e.TgZ(29,"div",7),e.TgZ(30,"label",19),e.TgZ(31,"b"),e._uU(32,"Roles:"),e.qZA(),e.qZA(),e.YNc(33,yo,2,1,"div",20),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.hij("Perfil de ",t.profesor[0].nombre," "),e.xp6(9),e.s9C("value",t.profesor[0].nombre),e.xp6(5),e.s9C("value",t.profesor[0].apellidos),e.xp6(5),e.s9C("value",t.profesor[0].dni),e.xp6(5),e.s9C("value",t.profesor[0].email),e.xp6(6),e.Q6J("ngForOf",t.profesor)}}function Uo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El nombre no puede estar vacio"),e.qZA())}function wo(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,Uo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.nombre.errors.required)}}function Mo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El apellido no puede estar vacio"),e.qZA())}function No(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,Mo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.apellido.errors.required)}}function Jo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El dni no puede estar vacio"),e.qZA())}function ko(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,Jo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.dni.errors.required)}}function Fo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El email no puede estar vacio"),e.qZA())}function Io(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El email debe ser un email valido"),e.qZA())}function So(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,Fo,2,0,"div",23),e.YNc(2,Io,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.email)}}function Po(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a no puede estar vacia"),e.qZA())}function Yo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a debe tener al menos un d\xedgito, una min\xfascula, una may\xfascula y tener como m\xednimo 8 caracteres"),e.qZA())}function Do(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,Po,2,0,"div",23),e.YNc(2,Yo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.password1.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.password1.errors.pattern)}}function Qo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a no puede estar vacia"),e.qZA())}function Oo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a debe tener al menos un d\xedgito, una min\xfascula, una may\xfascula y tener como m\xednimo 8 caracteres"),e.qZA())}function jo(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,Qo,2,0,"div",23),e.YNc(2,Oo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.password2.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.password2.errors.pattern)}}function Lo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h1",3),e._uU(3,"Crear Usuario: "),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().CloseModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"form",28),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmitCreate()}),e.TgZ(7,"div",7),e.TgZ(8,"div",29),e.TgZ(9,"label",9),e.TgZ(10,"b"),e._uU(11,"Nombre:"),e.qZA(),e.qZA(),e._UZ(12,"input",30),e.YNc(13,wo,2,1,"div",31),e.qZA(),e.qZA(),e.TgZ(14,"div",29),e.TgZ(15,"label",12),e.TgZ(16,"b"),e._uU(17,"Apellido:"),e.qZA(),e.qZA(),e._UZ(18,"input",32),e.YNc(19,No,2,1,"div",31),e.qZA(),e.TgZ(20,"div",29),e.TgZ(21,"label",14),e.TgZ(22,"b"),e._uU(23,"DNI:"),e.qZA(),e.qZA(),e._UZ(24,"input",33),e.YNc(25,ko,2,1,"div",31),e.qZA(),e.TgZ(26,"div",29),e.TgZ(27,"label",34),e.TgZ(28,"b"),e._uU(29,"Email:"),e.qZA(),e.qZA(),e._UZ(30,"input",35),e.YNc(31,So,3,2,"div",31),e.qZA(),e.TgZ(32,"div",36),e.TgZ(33,"div",8),e.TgZ(34,"label",37),e.TgZ(35,"b"),e._uU(36,"Contrase\xf1a:"),e.qZA(),e.qZA(),e._UZ(37,"input",38),e.YNc(38,Do,3,2,"div",31),e.qZA(),e.TgZ(39,"div",29),e.TgZ(40,"label",39),e.TgZ(41,"b"),e._uU(42,"Repite la Contrase\xf1a:"),e.qZA(),e.qZA(),e._UZ(43,"input",40),e.YNc(44,jo,3,2,"div",31),e.qZA(),e.TgZ(45,"p",41),e.TgZ(46,"b"),e._uU(47,"Roles:"),e.qZA(),e.qZA(),e.TgZ(48,"div",42),e.TgZ(49,"label",43),e._UZ(50,"input",44),e._uU(51," Director"),e.qZA(),e.TgZ(52,"label",45),e._UZ(53,"input",46),e._uU(54," Jefe de estudios"),e.qZA(),e.TgZ(55,"label",47),e._UZ(56,"input",48),e._uU(57," Tutor"),e.qZA(),e.TgZ(58,"label",49),e._UZ(59,"input",50),e._uU(60," Profesor"),e.qZA(),e.qZA(),e.qZA(),e._UZ(61,"hr",18),e.TgZ(62,"div",51),e._UZ(63,"input",52),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("formGroup",t.datosProfesor),e.xp6(7),e.Q6J("ngIf",t.submitted&&t.formulario.nombre.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.apellido.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.dni.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.email.errors),e.xp6(7),e.Q6J("ngIf",t.submitted&&t.formulario.password1.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.password2.errors)}}function Ro(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El nombre no puede estar vacio"),e.qZA())}function Go(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,Ro,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.nombre.errors.required)}}function zo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El apellido no puede estar vacio"),e.qZA())}function Ho(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,zo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.apellido.errors.required)}}function Bo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El dni no puede estar vacio"),e.qZA())}function $o(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,Bo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.dni.errors.required)}}function Wo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El email no puede estar vacio"),e.qZA())}function Vo(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"El email debe ser un email valido"),e.qZA())}function Xo(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,Wo,2,0,"div",23),e.YNc(2,Vo,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.email.errors.email)}}function Ko(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a no puede estar vacia"),e.qZA())}function er(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a debe tener al menos un d\xedgito, una min\xfascula, una may\xfascula y tener como m\xednimo 8 caracteres"),e.qZA())}function tr(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,Ko,2,0,"div",23),e.YNc(2,er,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.password1.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.password1.errors.pattern)}}function or(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1," La contrase\xf1a no puede estar vacia"),e.qZA())}function rr(o,i){1&o&&(e.TgZ(0,"div"),e._uU(1,"La contrase\xf1a debe tener al menos un d\xedgito, una min\xfascula, una may\xfascula y tener como m\xednimo 8 caracteres"),e.qZA())}function ar(o,i){if(1&o&&(e.TgZ(0,"div",53),e.YNc(1,or,2,0,"div",23),e.YNc(2,rr,2,0,"div",23),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formulario.password2.errors.required),e.xp6(1),e.Q6J("ngIf",t.formulario.password2.errors.pattern)}}function ir(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h1",3),e._uU(3,"Editar Profesor: "),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().CloseModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"form",28),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmitEdit()}),e.TgZ(7,"div",7),e.TgZ(8,"div",29),e.TgZ(9,"label",9),e.TgZ(10,"b"),e._uU(11,"Nombre:"),e.qZA(),e.qZA(),e._UZ(12,"input",30),e.YNc(13,Go,2,1,"div",31),e.qZA(),e.qZA(),e.TgZ(14,"div",29),e.TgZ(15,"label",12),e.TgZ(16,"b"),e._uU(17,"Apellido:"),e.qZA(),e.qZA(),e._UZ(18,"input",32),e.YNc(19,Ho,2,1,"div",31),e.qZA(),e.TgZ(20,"div",29),e.TgZ(21,"label",14),e.TgZ(22,"b"),e._uU(23,"DNI:"),e.qZA(),e.qZA(),e._UZ(24,"input",33),e.YNc(25,$o,2,1,"div",31),e.qZA(),e.TgZ(26,"div",29),e.TgZ(27,"label",34),e.TgZ(28,"b"),e._uU(29,"Email:"),e.qZA(),e.qZA(),e._UZ(30,"input",35),e.YNc(31,Xo,3,2,"div",31),e.qZA(),e.TgZ(32,"div",36),e.TgZ(33,"div",8),e.TgZ(34,"label",37),e.TgZ(35,"b"),e._uU(36,"Contrase\xf1a:"),e.qZA(),e.qZA(),e._UZ(37,"input",38),e.YNc(38,tr,3,2,"div",31),e.qZA(),e.TgZ(39,"div",29),e.TgZ(40,"label",39),e.TgZ(41,"b"),e._uU(42,"Repite la Contrase\xf1a:"),e.qZA(),e.qZA(),e._UZ(43,"input",40),e.YNc(44,ar,3,2,"div",31),e.qZA(),e.TgZ(45,"p",41),e.TgZ(46,"b"),e._uU(47,"Roles:"),e.qZA(),e.qZA(),e.TgZ(48,"div",42),e.TgZ(49,"label",43),e._UZ(50,"input",44),e._uU(51," Director"),e.qZA(),e.TgZ(52,"label",45),e._UZ(53,"input",46),e._uU(54," Jefe de estudios"),e.qZA(),e.TgZ(55,"label",47),e._UZ(56,"input",48),e._uU(57," Tutor"),e.qZA(),e.TgZ(58,"label",49),e._UZ(59,"input",54),e._uU(60," Profesor"),e.qZA(),e.qZA(),e.qZA(),e._UZ(61,"hr",18),e.TgZ(62,"div",51),e._UZ(63,"input",55),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("formGroup",t.datosProfesor),e.xp6(7),e.Q6J("ngIf",t.submitted&&t.formulario.nombre.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.apellido.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.dni.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.email.errors),e.xp6(7),e.Q6J("ngIf",t.submitted&&t.formulario.password1.errors),e.xp6(6),e.Q6J("ngIf",t.submitted&&t.formulario.password2.errors)}}let se=(()=>{class o{constructor(t,r,a,n,s){var d;this.formBuilder=t,this.modalActive=r,this.profesorService=a,this.toastr=n,this.storageUser=s,this.profesor=[],this.roles=[],this.profesoresArray=[],this.submitted=!1,this.numero=sessionStorage.getItem("numPeticion"),this.usuario=s.getUser(),this.dni=null===(d=this.usuario)||void 0===d?void 0:d.dni,this.datosProfesor=this.formBuilder.group({dni:["",[l.kI.required]],email:["",[l.kI.required,l.kI.email]],nombre:["",[l.kI.required]],apellido:["",[l.kI.required]],password1:["",[l.kI.required]],password2:["",[l.kI.required]]})}get formulario(){return this.datosProfesor.controls}ngOnInit(){"0"==this.numero?this.verProfesor():"2"==this.numero&&this.verProfesorEdit()}verProfesor(){const t=sessionStorage.getItem("dniProfesor");this.profesorService.getProfesor(t).subscribe(r=>{this.profesor=r})}verProfesorEdit(){const t=sessionStorage.getItem("dniProfesor");this.profesorService.getProfesorEdit(t).subscribe(r=>{this.profesor=r,sessionStorage.setItem("dniAnt",this.profesor[0].personaAux),this.updateForm()})}updateForm(){this.datosProfesor.controls.dni.setValue(this.profesor[0].dni),this.datosProfesor.controls.email.setValue(this.profesor[0].email),this.datosProfesor.controls.nombre.setValue(this.profesor[0].nombre),this.datosProfesor.controls.apellido.setValue(this.profesor[0].apellidos),this.datosProfesor.controls.password1.setValue(this.profesor[0].password1),this.datosProfesor.controls.password2.setValue(this.profesor[0].password2);let t=document.querySelectorAll("#rolesUsers input");this.profesor[0].roles.forEach(r=>{t.forEach(a=>{if(a){let n=parseInt(a.value);r==n&&(a.checked=!0)}})})}onSubmitEdit(){if(this.submitted=!0,this.datosProfesor.invalid)return;this.roles=document.querySelectorAll("#rolesUsers input");let t=[],r=0,a=!1;if(this.roles.forEach(n=>{n.checked&&(a=!0,t[r]=parseInt(n.value),r++)}),0==a)this.toastr.error("Tienes que poner un rol como minimo","Fallo");else{let n=sessionStorage.getItem("dniAnt"),s=new Q(this.datosProfesor.value.dni,this.datosProfesor.value.email,this.datosProfesor.value.nombre,this.datosProfesor.value.apellido,this.datosProfesor.value.password1,this.datosProfesor.value.password2,t,n);this.profesorService.editarUser(s).subscribe({next:()=>{this.toastr.success("Profesor Editado","Logrado!"),this.recogerProfesores(),this.CloseModal()},error:d=>{this.toastr.error("Error al editar","Error")}})}}CloseModal(){this.modalActive.dismiss()}onSubmitCreate(){let t=0,r=[],a=!1;if(this.submitted=!0,!this.datosProfesor.invalid)if(this.roles=document.querySelectorAll("#rolesUsers input"),this.roles.forEach(n=>{n.checked&&(a=!0,r[t]=parseInt(n.value),t++)}),0==a)this.toastr.error("Tienes que poner un rol como minimo","Fallo");else{let n=new Q(this.datosProfesor.value.dni,this.datosProfesor.value.email,this.datosProfesor.value.nombre,this.datosProfesor.value.apellido,this.datosProfesor.value.password1,this.datosProfesor.value.password2,r,this.dni);console.log(n),this.profesorService.registrarProfesor(n).subscribe({next:()=>{this.toastr.success("Profesor Creado","Logrado!"),this.recogerProfesores(),this.CloseModal()},error:s=>{this.toastr.error("El profesor no ha podido crearse","Fallo")}})}}recogerProfesores(){this.profesorService.getProfesores(this.dni).subscribe({next:t=>{this.profesoresArray=t,this.profesorService.getProfesoresInArray(this.profesoresArray)},error:t=>{this.toastr.error("Los profesores no han podido mostrarse","Fallo")}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.qu),e.Y36(g.Kz),e.Y36(pe),e.Y36(p._W),e.Y36(T.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-profesores"]],decls:3,vars:3,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"modal-header"],[1,"modal-title","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"needs-validation"],[1,"row","g-3"],[1,"col-md-4"],["for","nombre",1,"form-label"],["type","text","id","nombre","readonly","",1,"form-control-plaintext",3,"value"],[1,"col-md-8"],["for","apellido",1,"form-label"],["type","text","id","apellido","readonly","",1,"form-control-plaintext",3,"value"],["for","dni",1,"form-label"],["type","text","id","dni","readonly","",1,"form-control-plaintext",3,"value"],["for","email_profesor",1,"form-label"],["type","text","id","email_profesor","readonly","",1,"form-control-plaintext",3,"value"],[1,"my-3"],["for","roles",1,"form-label"],["class","col-md-4",4,"ngFor","ngForOf"],["class","col-md-9",4,"ngFor","ngForOf"],[1,"col-md-9"],[4,"ngIf"],["type","text","id","roles","value","Director",1,"form-control-plaintext"],["type","text","id","roles","value","Jefe de estudios",1,"form-control-plaintext"],["type","text","id","roles","value","Tutor",1,"form-control-plaintext"],["type","text","id","roles","value","Profesor",1,"form-control-plaintext"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"col-md-8","pb-2"],["type","text","id","nombre","placeholder","Maria","formControlName","nombre",1,"form-control"],["class","text-danger bg-white rounded border border-2 border-danger p-2",4,"ngIf"],["type","text","id","apellido","placeholder","Fernandez","formControlName","apellido",1,"form-control"],["type","text","id","dni","placeholder","00000000X","formControlName","dni",1,"form-control"],["for","email",1,"form-label"],["type","email","id","email","placeholder","ejemplo@gmail.com","formControlName","email",1,"form-control"],[1,"row","g-3","pb-2"],["for","password1",1,"form-label"],["type","password","id","password1","formControlName","password1",1,"form-control"],["for","password2",1,"form-label"],["type","password","id","password2","formControlName","password2",1,"form-control"],[1,"form-label"],["id","rolesUsers",1,"col","pb-2","d-flex","justify-content-between"],["for","cbox1"],["type","checkbox","id","cbox1","value","1"],["for","cbox2"],["type","checkbox","id","cbox2","value","2"],["for","cbox3"],["type","checkbox","id","cbox3","value","3"],["for","cbox4"],["type","checkbox","id","cbox4","value","4","checked",""],[1,"row","d-flex","align-items-center","justify-content-center","modal-footer"],["type","submit","value","Crear Usuario",1,"w-50","btn","btn-primary","btn-md"],[1,"text-danger","bg-white","rounded","border","border-2","border-danger","p-2"],["type","checkbox","id","cbox4","value","4"],["type","submit","value","Guardar cambios",1,"w-50","btn","btn-primary","btn-md"]],template:function(t,r){1&t&&(e.YNc(0,Eo,34,6,"div",0),e.YNc(1,Lo,64,7,"div",0),e.YNc(2,ir,64,7,"div",0)),2&t&&(e.Q6J("ngIf","0"==r.numero),e.xp6(1),e.Q6J("ngIf","1"==r.numero),e.xp6(1),e.Q6J("ngIf","2"==r.numero))},directives:[A.O5,l._Y,l.JL,l.F,A.sg,l.sg,l.Fj,l.JJ,l.u],styles:[""]}),o})();function nr(o,i){if(1&o){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.oxw().eliminarProfesor(a.dni)}),e.O4$(),e.TgZ(1,"svg",14),e._UZ(2,"use",18),e.qZA(),e.qZA()}}function sr(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",12),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().verProfesor(n.dni)}),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td",12),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().verProfesor(n.dni)}),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"td",12),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().verProfesor(n.dni)}),e.TgZ(8,"p"),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"td",10),e.TgZ(11,"button",13),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().modificarProfesor(n.dni)}),e.O4$(),e.TgZ(12,"svg",14),e._UZ(13,"use",15),e.qZA(),e.qZA(),e.YNc(14,nr,3,0,"button",16),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit,r=e.oxw();e.xp6(3),e.Oqu(t.apellidos),e.xp6(3),e.hij(" ",t.nombre," "),e.xp6(3),e.Oqu(t.dni),e.xp6(5),e.Q6J("ngIf",t.dni!=r.dni)}}let lr=(()=>{class o{constructor(t,r,a,n,s){var d;this.profesoresService=t,this.router=r,this.toastr=a,this.modal=n,this.storageUser=s,this.dtOptions={},this.dtTrigger=new G.x,this.profesores=[],this.profesor=[],this.respuesta=[],this.usuario=s.getUser(),this.dni=null===(d=this.usuario)||void 0===d?void 0:d.dni}ngAfterViewInit(){this.dtTrigger.next(this.profesores)}ngOnInit(){delete this.dtOptions.language,this.verProfesores(),this.getArrayProfesores()}ngOnDestroy(){this.dtTrigger.unsubscribe()}rerender(){this.dtElement.dtInstance.then(t=>{t.destroy(),this.dtTrigger.next(this.profesores)})}verProfesores(){this.profesoresService.getProfesores(this.dni).subscribe(t=>{this.profesores=t,t=this.profesores.data,this.rerender(),this.dtTrigger.next(this.profesores),$.fn.dataTable.ext.errMode="throw"}),$.extend(!0,$.fn.dataTable.defaults,{language:{url:"//cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"}})}getArrayProfesores(){this.profesoresService.profesoresArray.subscribe(t=>{this.profesores=t,this.rerender()})}registrarProfesor(){sessionStorage.setItem("numPeticion","1"),this.modal.open(se,{size:"md"})}verProfesor(t){sessionStorage.setItem("numPeticion","0"),sessionStorage.setItem("dniProfesor",t),this.modal.open(se,{size:"md"})}eliminarProfesor(t){this.profesoresService.eliminarProfesor(t).subscribe({next:r=>{this.toastr.success("Profesor Eliminado","Eliminado"),this.verProfesores()},error:r=>{console.log(r),this.toastr.error("El profesor no ha podido eliminarse","Fallo")}})}modificarProfesor(t){sessionStorage.setItem("numPeticion","2"),sessionStorage.setItem("dniProfesor",t),this.modal.open(se,{size:"md"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(pe),e.Y36(U.F0),e.Y36(p._W),e.Y36(g.FF),e.Y36(T.L))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-crud-profesores"]],viewQuery:function(t,r){if(1&t&&e.Gf(F,5),2&t){let a;e.iGM(a=e.CRH())&&(r.dtElement=a.first)}},decls:28,vars:3,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"col-12","d-flex","justify-content-between","pb-3","page-header"],[1,"h2"],[1,"col-12","bg-white"],[1,"row","p-3"],[1,"btn","btn-outline-primary","float-end",3,"click"],["datatable","",1,"table","table-striped","table-bordered","row-border","hover","text-center","table-hover",3,"dtOptions","dtTrigger"],[1,"table-primary","text-white"],["scope","col"],[4,"ngFor","ngForOf"],["scope","col",1,"cursor-pointer",3,"click"],["type","submit","aria-label","modificar profesor",1,"btn","btn-outline-warning","px-2","py-1","me-2",3,"click"],["width","16","height","16",1,"bi"],[0,"xlink","href","#lapiz"],["class","btn btn-outline-danger px-2 py-1 me-2","type","submit","aria-label","eliminar profesor",3,"click",4,"ngIf"],["type","submit","aria-label","eliminar profesor",1,"btn","btn-outline-danger","px-2","py-1","me-2",3,"click"],[0,"xlink","href","#papelera"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",1),e.TgZ(4,"div",3),e.TgZ(5,"h2",4),e._uU(6,"Gesti\xf3n de Profesores"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",1),e.TgZ(8,"div",2),e.TgZ(9,"div",1),e.TgZ(10,"div",5),e.TgZ(11,"div",6),e.TgZ(12,"div",5),e.TgZ(13,"button",7),e.NdJ("click",function(){return r.registrarProfesor()}),e._uU(14,"Registrar Profesor"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"table",8),e.TgZ(16,"thead",9),e.TgZ(17,"tr"),e.TgZ(18,"th",10),e._uU(19,"Apellido"),e.qZA(),e.TgZ(20,"th",10),e._uU(21,"Nombre"),e.qZA(),e.TgZ(22,"th",10),e._uU(23,"DNI"),e.qZA(),e.TgZ(24,"th",10),e._uU(25,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,sr,15,4,"tr",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(15),e.Q6J("dtOptions",r.dtOptions)("dtTrigger",r.dtTrigger),e.xp6(12),e.Q6J("ngForOf",r.profesores))},directives:[F,A.sg,A.O5],styles:[""]}),o})();class O{constructor(i,t,r,a,n,s,d,u,c,m,h,q,C,E,N,I){this.nombre=i,this.dni=t,this.va_a_fct=r,this.horario=a,this.fecha_ini=n,this.fecha_fin=s,this.cod_alumno=d,this.email=u,this.apellidos=c,this.password=m,this.provincia=h,this.localidad=q,this.dni_antiguo=C,this.matricula_cod=E,this.matricula_cod_centro=N,this.matricula_cod_grupo=I}static alumnoJSON(i){return new O(i.nombre,i.dni,i.va_a_fct,i.horario,i.fecha_ini,i.fecha_fin)}static alumnoCompletoJSON(i){return new O(i.nombre,i.dni,i.va_a_fct,i.horario,i.fecha_ini,i.fecha_fin,i.cod_alumno,i.email,i.apellidos,i.password,i.provincia,i.localidad,i.dni_antiguo,i.matricula_cod,i.matricula_cod_centro,i.matricula_cod_grupo)}get nombreCompleto(){return this.nombre+" "+this.apellidos}}class oe{constructor(i,t){this.cod=i,this.nombre_ciclo=t}static grupoJSON(i){return new oe(i.cod,i.nombre_ciclo)}}var z=(()=>{return(o=z||(z={}))[o.editar=0]="editar",o[o.nuevo=1]="nuevo",o[o.detalle=2]="detalle",z;var o})();let ge=(()=>{class o{constructor(t){this.http=t,this.alumnoTrigger=new e.vpe,this.alumnosArray=new K.X([]),this.urlBase="http://localhost:8000/api/jefatura/",this.urlListarAlumnos="listarAlumnos/",this.urlVerAlumno="verAlumno/",this.urlAddAlumno="addAlumno",this.urlModificarAlumno="modificarAlumno",this.urlEliminarAlumno="eliminarAlumno/",this.urlListarGrupos="listarGrupos"}listarGrupos(){return this.http.get(this.urlBase+this.urlListarGrupos).pipe((0,J.U)(r=>r.map(a=>oe.grupoJSON(a))))}listarAlumnos(t){return this.http.get(this.urlBase+this.urlListarAlumnos+t).pipe((0,J.U)(a=>a.map(n=>O.alumnoCompletoJSON(n))))}borrarAlumno(t){return this.http.delete(this.urlBase+this.urlEliminarAlumno+t).pipe((0,J.U)(a=>a))}actualizarAlumno(t){const r=this.urlBase+this.urlModificarAlumno,a=new _.WM({"Content-Type":"application/json"});return this.http.put(r,JSON.stringify(t),{headers:a})}registrarAlumno(t){const r=this.urlBase+this.urlAddAlumno;console.log(r);const a=new _.WM({"Content-Type":"application/json"});return this.http.post(r,JSON.stringify(t),{headers:a})}setAlumnosArray(t){this.alumnosArray.next(t)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),dr=(()=>{class o{constructor(t){this.http=t,this.alumnoTrigger=new e.vpe,this.urlBase="http://localhost:8000/api/"}listarProvincias(){return this.http.get(this.urlBase+"listarProvincias").pipe((0,J.U)(r=>r))}listarCiudades(t){return this.http.get(this.urlBase+"listarCiudades/"+t).pipe((0,J.U)(a=>a))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function ur(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Este campo es obligatorio "),e.qZA())}function cr(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Este campo es obligatorio (un DNI v\xe1lido tiene 8 n\xfameros y una letra) "),e.qZA())}function mr(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Este campo es obligatorio "),e.qZA())}function pr(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Este campo es obligatorio "),e.qZA())}function gr(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Este campo es obligatorio "),e.qZA())}function _r(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Este campo es obligatorio "),e.qZA())}function fr(o,i){if(1&o&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&o){const t=i.$implicit,r=e.oxw(2);e.Q6J("value",t)("selected",(null==r.datosAlumno?null:r.datosAlumno.value.provincia)==t||null),e.xp6(1),e.hij(" ",t," ")}}function Zr(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Este campo es obligatorio "),e.qZA())}function hr(o,i){if(1&o&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&o){const t=i.$implicit,r=e.oxw(2);e.Q6J("value",t)("selected",(null==r.datosAlumno?null:r.datosAlumno.value.localidad)==t||null),e.xp6(1),e.hij(" ",t," ")}}function vr(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Este campo es obligatorio "),e.qZA())}function br(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Este campo es obligatorio "),e.qZA())}function Ar(o,i){if(1&o&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&o){const t=i.$implicit,r=e.oxw(2);e.Q6J("value",t.cod)("selected",(null==r.datosAlumno?null:r.datosAlumno.value.matricula_cod_grupo)==t.cod||null),e.xp6(1),e.hij(" ",t.nombre_ciclo," ")}}function Tr(o,i){1&o&&(e.TgZ(0,"div",38),e._uU(1," Este campo es obligatorio "),e.qZA())}function qr(o,i){if(1&o&&(e.ynx(0),e.TgZ(1,"div",40),e._UZ(2,"input",41),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",!t.modified||null)}}function xr(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h1",3),e._uU(3),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeModal()}),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"form",6),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"h2",9),e._uU(10,"Datos del alumno"),e.qZA(),e.qZA(),e.TgZ(11,"div",10),e.TgZ(12,"label",11),e._uU(13,"C\xf3digo de alumno"),e.qZA(),e._UZ(14,"input",12),e.YNc(15,ur,2,0,"div",13),e.qZA(),e.TgZ(16,"div",10),e.TgZ(17,"label",14),e._uU(18,"DNI"),e.qZA(),e._UZ(19,"input",15),e.YNc(20,cr,2,0,"div",13),e.qZA(),e.TgZ(21,"div",10),e.TgZ(22,"label",16),e._uU(23,"Nombre"),e.qZA(),e._UZ(24,"input",17),e.YNc(25,mr,2,0,"div",13),e.qZA(),e.TgZ(26,"div",10),e.TgZ(27,"label",18),e._uU(28,"Apellidos"),e.qZA(),e._UZ(29,"input",19),e.YNc(30,pr,2,0,"div",13),e.qZA(),e.TgZ(31,"div",10),e.TgZ(32,"label",20),e._uU(33,"Email"),e.qZA(),e._UZ(34,"input",21),e.YNc(35,gr,2,0,"div",13),e.qZA(),e.TgZ(36,"div",10),e.TgZ(37,"label",22),e._uU(38,"Contrase\xf1a"),e.qZA(),e._UZ(39,"input",23),e.YNc(40,_r,2,0,"div",13),e.qZA(),e.TgZ(41,"div",10),e.TgZ(42,"label",24),e._uU(43,"Provincia"),e.qZA(),e.TgZ(44,"select",25),e.NdJ("change",function(a){return e.CHM(t),e.oxw().cambiarProvincia(a)}),e.YNc(45,fr,2,3,"option",26),e.qZA(),e.YNc(46,Zr,2,0,"div",13),e.qZA(),e.TgZ(47,"div",10),e.TgZ(48,"label",27),e._uU(49,"Localidad"),e.qZA(),e.TgZ(50,"select",28),e.NdJ("change",function(a){return e.CHM(t),e.oxw().cambiarCiudad(a)}),e.YNc(51,hr,2,3,"option",26),e.qZA(),e.YNc(52,vr,2,0,"div",13),e.qZA(),e._UZ(53,"hr",29),e.TgZ(54,"div",8),e.TgZ(55,"h2",9),e._uU(56,"Datos de matriculaci\xf3n en el curso actual"),e.qZA(),e.qZA(),e.TgZ(57,"div",10),e.TgZ(58,"label",30),e._uU(59,"C\xf3digo de matr\xedcula"),e.qZA(),e._UZ(60,"input",31),e.YNc(61,br,2,0,"div",13),e.qZA(),e.TgZ(62,"div",10),e.TgZ(63,"label",32),e._uU(64,"Grupo"),e.qZA(),e.TgZ(65,"select",33),e.NdJ("change",function(a){return e.CHM(t),e.oxw().cambiarGrupo(a)}),e.YNc(66,Ar,2,3,"option",26),e.qZA(),e.YNc(67,Tr,2,0,"div",13),e.qZA(),e.TgZ(68,"div",10),e.TgZ(69,"div",34),e._UZ(70,"input",35),e.TgZ(71,"label",36),e._uU(72," Va a FCT "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(73,qr,3,1,"ng-container",37),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.modo==t.modosEdicion.nuevo?"Nuevo alumno":"Detalles de "+t.alumno.nombreCompleto),e.xp6(3),e.Q6J("formGroup",t.datosAlumno),e.xp6(6),e.Gre("form-label fw-bold ",t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"required":"",""),e.xp6(2),e.Tol(t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"form-control":"form-control-plaintext"),e.uIk("readonly",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(1),e.Q6J("ngIf",t.formulario.cod_alumno.invalid&&t.submitted),e.xp6(2),e.Gre("form-label fw-bold ",t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"required":"",""),e.xp6(2),e.Tol(t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"form-control":"form-control-plaintext"),e.uIk("readonly",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(1),e.Q6J("ngIf",t.formulario.dni.invalid&&t.submitted),e.xp6(2),e.Gre("form-label fw-bold ",t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"required":"",""),e.xp6(2),e.Tol(t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"form-control":"form-control-plaintext"),e.uIk("readonly",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(1),e.Q6J("ngIf",t.formulario.nombre.invalid&&t.submitted),e.xp6(2),e.Gre("form-label fw-bold ",t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"required":"",""),e.xp6(2),e.Tol(t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"form-control":"form-control-plaintext"),e.uIk("readonly",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(1),e.Q6J("ngIf",t.formulario.apellidos.invalid&&t.submitted),e.xp6(2),e.Gre("form-label fw-bold ",t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"required":"",""),e.xp6(2),e.Tol(t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"form-control":"form-control-plaintext"),e.uIk("readonly",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(1),e.Q6J("ngIf",t.formulario.email.invalid&&t.submitted),e.xp6(2),e.Gre("form-label fw-bold ",t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"required":"",""),e.xp6(2),e.Tol(t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"form-control":"form-control-plaintext"),e.uIk("readonly",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(1),e.Q6J("ngIf",t.formulario.password.invalid&&t.submitted),e.xp6(2),e.Gre("form-label fw-bold ",t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"required":"",""),e.xp6(2),e.uIk("disabled",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(1),e.Q6J("ngForOf",t.listadoProvincias),e.xp6(1),e.Q6J("ngIf",t.formulario.provincia.invalid&&t.submitted),e.xp6(2),e.Gre("form-label fw-bold ",t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"required":""," "),e.xp6(2),e.uIk("disabled",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(1),e.Q6J("ngForOf",t.listadoCiudades),e.xp6(1),e.Q6J("ngIf",t.formulario.localidad.invalid&&t.submitted),e.xp6(6),e.Gre("form-label fw-bold ",t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"required":"",""),e.xp6(2),e.Tol(t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"form-control":"form-control-plaintext"),e.uIk("readonly",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(1),e.Q6J("ngIf",t.formulario.matricula_cod.invalid&&t.submitted),e.xp6(2),e.Gre("form-label fw-bold ",t.modo==t.modosEdicion.editar||t.modo==t.modosEdicion.nuevo?"required":""," "),e.xp6(2),e.uIk("disabled",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(1),e.Q6J("ngForOf",t.listadoGrupos),e.xp6(1),e.Q6J("ngIf",t.formulario.matricula_cod_grupo.invalid&&t.submitted),e.xp6(3),e.uIk("readonly",t.modo!=t.modosEdicion.editar&&t.modo!=t.modosEdicion.nuevo||null),e.xp6(3),e.Q6J("ngIf",t.modo!==t.modosEdicion.detalle)}}let _e=(()=>{class o{constructor(t,r,a,n,s,d,u){this.modalActive=t,this.crudAlumnosService=r,this.auxService=a,this.loginService=n,this.formBuilder=s,this.dialogService=d,this.toastr=u,this.modosEdicion=z,this.submitted=!1,this.modified=!1,this.datosAlumno=this.formBuilder.group({}),this.crudAlumnosService.alumnoTrigger.subscribe({next:c=>{this.alumno=c[0],this.modo=c[1],this.construirFormulario(),this.obtenerListaGrupos(),this.obtenerListaProvincias()}})}ngOnInit(){this.onChanges()}construirFormulario(){var t,r,a,n,s,d,u,c,m,h,q;this.datosAlumno=this.formBuilder.group({cod_alumno:[null===(t=this.alumno)||void 0===t?void 0:t.cod_alumno,[l.kI.required,l.kI.min(0)]],dni:[null===(r=this.alumno)||void 0===r?void 0:r.dni,[l.kI.required]],email:[null===(a=this.alumno)||void 0===a?void 0:a.email,[l.kI.required,l.kI.email]],password:[null===(n=this.alumno)||void 0===n?void 0:n.password,this.modo!==this.modosEdicion.detalle?[]:[l.kI.required]],nombre:[null===(s=this.alumno)||void 0===s?void 0:s.nombre,[l.kI.required]],apellidos:[null===(d=this.alumno)||void 0===d?void 0:d.apellidos,[l.kI.required]],provincia:[null===(u=this.alumno)||void 0===u?void 0:u.provincia,[l.kI.required]],localidad:[null===(c=this.alumno)||void 0===c?void 0:c.localidad,[l.kI.required]],va_a_fct:[0!=parseInt((null===(m=this.alumno)||void 0===m?void 0:m.va_a_fct)+"")],matricula_cod:[null===(h=this.alumno)||void 0===h?void 0:h.matricula_cod,[l.kI.required]],matricula_cod_grupo:[null===(q=this.alumno)||void 0===q?void 0:q.matricula_cod_grupo,[l.kI.required]]})}get formulario(){return this.datosAlumno.controls}onSubmit(){var t,r;this.submitted=!0;let a=this.datosAlumno.value,n=new O(a.nombre,a.dni,a.va_a_fct?1:0,"",new Date,new Date,a.cod_alumno,a.email,a.apellidos,a.password,a.provincia,a.localidad,null===(t=this.alumno)||void 0===t?void 0:t.dni,a.matricula_cod,null===(r=this.alumno)||void 0===r?void 0:r.matricula_cod_centro,a.matricula_cod_grupo);this.datosAlumno.invalid||(this.modified=!1,this.modo==this.modosEdicion.nuevo?this.registrarAlumno(n):this.actualizarAlumno(n),this.modalActive.close())}onChanges(){var t;null===(t=this.datosAlumno)||void 0===t||t.valueChanges.subscribe(r=>{this.modified||(this.modified=!0)})}closeModal(){var t=this;return(0,x.Z)(function*(){t.modified&&(yield t.dialogService.confirmacion("Guardar cambios","Hay cambios sin guardar. \xbfQuiere guardarlos antes de salir?"))?t.onSubmit():t.modalActive.close()})()}cambiarProvincia(t){this.formulario.provincia.setValue(t.target.value),this.obtenerListaCiudades(t.target.value)}cambiarCiudad(t){this.formulario.localidad.setValue(t.target.value)}cambiarGrupo(t){this.formulario.matricula_cod_grupo.setValue(t.target.value)}cambiarVaAFCT(t){this.formulario.va_a_fct.setValue(t.target.checked)}obtenerListaGrupos(){this.crudAlumnosService.listarGrupos().subscribe({next:t=>{this.modo==this.modosEdicion.nuevo?(this.listadoGrupos=[new oe("","Seleccione uno...")],this.listadoGrupos=this.listadoGrupos.concat(t)):this.listadoGrupos=t}})}obtenerListaProvincias(){this.auxService.listarProvincias().subscribe({next:t=>{var r;this.modo!=this.modosEdicion.detalle?(this.listadoProvincias=["Seleccione uno..."],this.listadoProvincias=this.listadoProvincias.concat(t)):(this.listadoProvincias=[""],this.listadoProvincias=this.listadoProvincias.concat(t)),this.modo!=this.modosEdicion.nuevo&&this.obtenerListaCiudades(null===(r=this.alumno)||void 0===r?void 0:r.provincia)}})}obtenerListaCiudades(t){this.auxService.listarCiudades(t).subscribe({next:r=>{this.listadoCiudades=r}})}actualizarAlumno(t){this.crudAlumnosService.actualizarAlumno(t).subscribe({next:r=>{this.toastr.success("Alumno actualizado correctamente"),this.obtenerAlumnos()},error:r=>{this.toastr.error("Se produjo un error al actualizar al alumno")}})}registrarAlumno(t){this.crudAlumnosService.registrarAlumno(t).subscribe({next:r=>{this.toastr.success("Alumno registrado correctamente"),this.obtenerAlumnos()},error:r=>{this.toastr.success("Se produjo un error al registrar al alumno")}})}obtenerAlumnos(){var t;this.crudAlumnosService.listarAlumnos(null===(t=this.loginService.getUser())||void 0===t?void 0:t.dni).subscribe({next:r=>{this.crudAlumnosService.setAlumnosArray(r)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Kz),e.Y36(ge),e.Y36(dr),e.Y36(T.L),e.Y36(l.qu),e.Y36(k),e.Y36(p._W))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-modal-alumno"]],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"modal-header"],[1,"modal-title","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-md-12"],[1,"fs-5"],[1,"col-md-6"],["for","cod_alumno"],["type","text","id","cod_alumno","placeholder","12345","formControlName","cod_alumno"],["class","text-danger bg-white rounded border border-2 border-danger p-2",4,"ngIf"],["for","dni"],["type","text","id","dni","placeholder","00000000X","formControlName","dni"],["for","nombre"],["type","text","id","nombre","placeholder","Nombre","formControlName","nombre"],["for","apellidos"],["type","text","id","apellidos","placeholder","Apellidos","formControlName","apellidos"],["for","email"],["type","text","id","email","placeholder","user@mail.com","formControlName","email"],["for","password"],["type","password","id","password","placeholder","******","formControlName","password"],["for","provincia"],["id","provincia",1,"form-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["for","localidad"],["id","localidad",1,"form-select",3,"change"],[1,"my-3"],["for","matricula_cod"],["type","text","id","matricula_cod","placeholder","1234","formControlName","matricula_cod"],["for","matricula_cod_grupo"],["id","matricula_cod_grupo",1,"form-select",3,"change"],[1,"form-check"],["formControlName","va_a_fct","type","checkbox","id","va_a_fct","checked","",1,"form-check-input"],["for","va_a_fct",1,"form-check-label"],[4,"ngIf"],[1,"text-danger","bg-white","rounded","border","border-2","border-danger","p-2"],[3,"value","selected"],[1,"row","d-flex","align-items-center","justify-content-center","modal-footer","mt-3"],["type","submit","value","Guardar cambios",1,"w-50","btn","btn-primary","btn-md",3,"disabled"]],template:function(t,r){1&t&&e.YNc(0,xr,74,78,"div",0),2&t&&e.Q6J("ngIf",r.alumno)},directives:[A.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,A.sg,l.Wl,l.YN,l.Kr],styles:[""]}),o})(),Cr=(()=>{class o{constructor(t){this.modalActive=t}ngOnInit(){}closeModal(){this.modalActive.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-manual-gestion-alumnos"]],decls:84,vars:0,consts:[[1,"modal-header"],[1,"modal-title","fs-2"],["type","button","data-bs-dismiss","modal","aria-label","Cerrar",1,"btn-close",3,"click"],[1,"modal-body","p-3"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"fs-4","text-info"],["src","/assets/Manuales/gestion-alumnos/0.jpg","alt","Captura de pantalla con la vista de gesti\xf3n de alumnos",1,"img-fluid"],[1,"d-flex","justify-content-between","align-items-center"],["src","/assets/Manuales/gestion-alumnos/1.png","alt","Captura de pantalla con el bot\xf3n para registrar un alumno",1,"img-fluid","me-3"],[1,"m-0"],["src","/assets/Manuales/gestion-alumnos/2.png","alt","Captura de pantalla del desplegable de mostrar registros",1,"img-fluid","ms-3","border","border-dark"],[1,"d-flex","justify-content-center","mt-3"],["src","/assets/Manuales/gestion-alumnos/3.png","alt","Captura de pantalla del desplegable de mostrar registros",1,"img-fluid","ms-3","border","border-dark"],["src","/assets/Manuales/gestion-alumnos/buscar.gif","alt","GIF que ejemplifica la b\xfasqueda en la tabla de gesti\xf3n de alumnos",1,"img-fluid","me-3","border","border-dark"],[1,"mt-3"],["src","/assets/Manuales/gestion-alumnos/4.png","alt","Captura de pantalla que muestra la zona donde hay que hacer clic para ordenar la columna 'Nombre' por orden alfab\xe9tico",1,"img-fluid","me-3","border","border-dark"],[1,"d-flex","justify-content-center"],["src","/assets/Manuales/gestion-alumnos/5.png","alt","Captura de pantalla que muestra el cursor sobre una fila de la tabla",1,"img-fluid","border","border-dark"],["src","/assets/Manuales/gestion-alumnos/editar.png","alt","Captura de pantalla con el bot\xf3n para editar un alumno",1,"img-fluid","me-3"],[1,"required"],["src","/assets/Manuales/gestion-alumnos/6.png","alt","Captura de pantalla que muestra el cursor sobre una fila de la tabla",1,"img-fluid","border","border-dark"],["src","/assets/Manuales/gestion-alumnos/borrar.png","alt","Captura de pantalla con el bot\xf3n para eliminar un alumno",1,"img-fluid","me-3"],[1,"modal-footer"],[1,"btn","btn-outline-primary",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1",1),e._uU(2,"Manual de gesti\xf3n de alumnos"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return r.closeModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"ul",4),e.TgZ(6,"li",5),e.TgZ(7,"h2",6),e._uU(8,"Vistazo general"),e.qZA(),e.TgZ(9,"p"),e._uU(10,"En la vista de gesti\xf3n de alumnos se muestra el listado de alumnos pertenecientes al centro educativo al que pertenece la persona que inici\xf3 sesi\xf3n en la aplicaci\xf3n. Es decir, usted s\xf3lo podr\xe1 gestionar los alumnos de su centro educativo. "),e.qZA(),e.TgZ(11,"p"),e._uU(12,"En la siguiente imagen puede observar cada uno de los elementos m\xe1s importantes de la vista, numerados"),e.qZA(),e._UZ(13,"img",7),e.qZA(),e.TgZ(14,"li",5),e.TgZ(15,"h2",6),e._uU(16,"1. Registrar alumno"),e.qZA(),e.TgZ(17,"div",8),e._UZ(18,"img",9),e.TgZ(19,"div"),e.TgZ(20,"p"),e._uU(21,"Este bot\xf3n, situado en la esquina superior derecha, permite registrar un alumno en la aplicaci\xf3n. Deber\xe1, adem\xe1s, ser matriculado en un grupo para el presente curso acad\xe9mico"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"li",5),e.TgZ(23,"h2",6),e._uU(24,"2. Cantidad de registros a mostrar"),e.qZA(),e.TgZ(25,"div",8),e.TgZ(26,"div"),e.TgZ(27,"p"),e._uU(28,"Haga clic sobre el desplegable para seleccionar cu\xe1ntos registros quiere ver en cada p\xe1gina de la tabla. "),e.qZA(),e.TgZ(29,"p",10),e._uU(30,"Mostrar m\xe1s de 50 registros puede reducir el rendimiento de la aplicaci\xf3n. Utilice los botones de la esquina inferior derecha de la pantalla para navegar por las p\xe1ginas de datos."),e.qZA(),e.qZA(),e._UZ(31,"img",11),e.qZA(),e.TgZ(32,"div",12),e._UZ(33,"img",13),e.qZA(),e.qZA(),e.TgZ(34,"li",5),e.TgZ(35,"h2",6),e._uU(36,"3. Filtros por campo"),e.qZA(),e.TgZ(37,"p"),e._uU(38,"Filtre los resultados de la tabla usando la barra de b\xfasquedas en la parte superior derecha."),e.qZA(),e.TgZ(39,"p",10),e._uU(40,"Puede filtrar a alumnos por cualquiera de los campos de la tabla: C\xf3digo de alumno, nombre y apellidos o e-mail de contacto "),e._UZ(41,"img",14),e.qZA(),e.qZA(),e.TgZ(42,"li",5),e.TgZ(43,"h2",6),e._uU(44,"4. Ordenar seg\xfan campo"),e.qZA(),e.TgZ(45,"p"),e._uU(46,"Puede ordenar a los alumnos en orden ascendente o descendente de cualquiera de los campos de la tabla haciendo clic sobre el t\xedtulo de la columna"),e.qZA(),e.TgZ(47,"p",15),e._uU(48,"Si desea cambiar el orden, clickee de nuevo sobre el mismo t\xedtulo"),e.qZA(),e._UZ(49,"img",16),e.qZA(),e.TgZ(50,"li",5),e.TgZ(51,"h2",6),e._uU(52,"5. Ver detalles de un alumno"),e.qZA(),e.TgZ(53,"p"),e._uU(54,"Haga clic sobre una fila de la tabla para ver los datos del alumno correspondiente. Se abrir\xe1 una ventana por encima de la tabla, con el fondo sombreado. Si desea salir de esta ventana, haga clic en el bot\xf3n con forma de aspa, en la parte superior de dicha ventana."),e.qZA(),e.TgZ(55,"div",17),e._UZ(56,"img",18),e.qZA(),e.qZA(),e.TgZ(57,"li",5),e.TgZ(58,"h2",6),e._uU(59,"6. Editar alumno"),e.qZA(),e.TgZ(60,"div",8),e._UZ(61,"img",19),e.TgZ(62,"div"),e.TgZ(63,"p"),e._uU(64,"Haga clic sobre el bot\xf3n de editar (lapicero) para modificar los datos de un alumno. legal."),e.qZA(),e.TgZ(65,"p",10),e._uU(66,"Se abrir\xe1 una ventana modal que le permitir\xe1 cambiar todos los datos del alumno. Los campos obligatorios est\xe1n marcados con un asterisco rojo ("),e._UZ(67,"strong",20),e._uU(68," )"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",17),e._UZ(70,"img",21),e.qZA(),e.qZA(),e.TgZ(71,"li",5),e.TgZ(72,"h2",6),e._uU(73,"7. Eliminar alumno"),e.qZA(),e.TgZ(74,"div",8),e._UZ(75,"img",22),e.TgZ(76,"div"),e.TgZ(77,"p"),e._uU(78,"Haga clic sobre el bot\xf3n de eliminar (cubo de basura) para eliminar de la aplicaci\xf3n los datos de un alumno."),e.qZA(),e.TgZ(79,"p",10),e._uU(80,"Dado que es una acci\xf3n definitiva, deber\xe1 confirmar la acci\xf3n."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(81,"div",23),e.TgZ(82,"button",24),e.NdJ("click",function(){return r.closeModal()}),e._uU(83,"Volver"),e.qZA(),e.qZA())},styles:[""]}),o})();function yr(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td",13),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw();return s.mostrarAlumno(n,s.modosEdicion.detalle)}),e._uU(2),e.qZA(),e.TgZ(3,"td",13),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw();return s.mostrarAlumno(n,s.modosEdicion.detalle)}),e._uU(4),e.qZA(),e.TgZ(5,"td",13),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw();return s.mostrarAlumno(n,s.modosEdicion.detalle)}),e._uU(6),e.qZA(),e.TgZ(7,"td",14),e.TgZ(8,"button",15),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw();return s.mostrarAlumno(n,s.modosEdicion.editar)}),e.O4$(),e.TgZ(9,"svg",16),e._UZ(10,"use",17),e.qZA(),e.qZA(),e.kcU(),e.TgZ(11,"button",18),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.oxw().borrarAlumno(n)}),e.O4$(),e.TgZ(12,"svg",16),e._UZ(13,"use",19),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=i.$implicit;e.xp6(1),e.Q2q("aria-label","Ver en detalle a ",t.nombreCompleto,""),e.xp6(1),e.Oqu(t.cod_alumno),e.xp6(1),e.Q2q("aria-label","Ver en detalle a ",t.nombreCompleto,""),e.xp6(1),e.Oqu(t.nombreCompleto),e.xp6(1),e.Q2q("aria-label","Ver en detalle a ",t.nombreCompleto,""),e.xp6(1),e.Oqu(t.email),e.xp6(2),e.Q2q("aria-label","Editar a ",t.nombre+" "+t.apellidos,""),e.xp6(3),e.Q2q("aria-label","Eliminar a ",t.nombreCompleto,"")}}const Er=[{path:"asig-alum-empresa",component:P},{path:"registro-empresa",component:At},{path:"registro-empresa/representante",component:kt},{path:"registro-empresa/empresa",component:bt},{path:"registro-empresa/ubicacion",component:zt},{path:"registro-empresa/resumen",component:It},{path:"seguimiento",component:bo},{path:"gestion-empresas",component:Ie},{path:"gestion-alumnos",component:(()=>{class o{constructor(t,r,a,n,s){this.crudAlumnosService=t,this.loginStorageUser=r,this.toastr=a,this.modal=n,this.dialog=s,this.dtOptions={},this.dtTrigger=new G.x,this.listaAlumnos=[],this.modosEdicion=z}ngAfterViewInit(){this.dtTrigger.next(this.listaAlumnos)}ngOnDestroy(){this.dtTrigger.unsubscribe()}rerender(){this.dtElement.dtInstance.then(t=>{t.destroy()})}ngOnInit(){$.extend(!0,$.fn.dataTable.defaults,{language:{url:"//cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"}}),this.cargarAlumnos(),this.obtenerAlumnosDesdeModal()}cargarAlumnos(){var t;this.crudAlumnosService.listarAlumnos(null===(t=this.loginStorageUser.getUser())||void 0===t?void 0:t.dni).subscribe({next:r=>{this.listaAlumnos=r,this.rerender(),this.dtTrigger.next(this.listaAlumnos),$.fn.dataTable.ext.errMode="throw"},error:r=>{this.toastr.error("No se han podido recuperar los datos","Error")}})}mostrarAlumno(t,r){this.modal.open(_e,{size:"md",backdrop:"static",keyboard:!1}),this.crudAlumnosService.alumnoTrigger.emit([t,r])}registrarAlumno(){var t;this.modal.open(_e,{size:"md",backdrop:"static",keyboard:!1});let r=new O("","",0);r.matricula_cod_centro=null===(t=this.loginStorageUser.getUser())||void 0===t?void 0:t.cod_centro,this.crudAlumnosService.alumnoTrigger.emit([r,this.modosEdicion.nuevo])}borrarAlumno(t){this.dialog.open(w,{data:{title:"Eliminar registro",message:"\xbfEst\xe1 seguro de que quiere eliminar a este alumno?"},width:"400px"}).afterClosed().subscribe(r=>{r.respuesta&&this.crudAlumnosService.borrarAlumno(t.dni).subscribe({next:a=>{this.cargarAlumnos(),this.toastr.success("Alumno borrado correctamente")},error:a=>{this.toastr.error("Ha ocurrido un error al eliminar al alumno")}})})}obtenerAlumnosDesdeModal(){this.crudAlumnosService.alumnosArray.subscribe(t=>{this.listaAlumnos=t,this.rerender(),this.dtTrigger.next(this.listaAlumnos)})}abrirAyuda(){this.modal.open(Cr,{size:"lg"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ge),e.Y36(T.L),e.Y36(p._W),e.Y36(g.FF),e.Y36(Z.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-gestion-alumnos"]],viewQuery:function(t,r){if(1&t&&e.Gf(F,5),2&t){let a;e.iGM(a=e.CRH())&&(r.dtElement=a.first)}},decls:27,vars:3,consts:[[1,"row"],[1,"page-header","d-flex","justify-content-between","pb-3"],[1,"h2"],["type","button","placement","left","ngbTooltip","Haga clic para acceder a la ayuda de esta secci\xf3n",1,"btn","btn-outline-default","mr-2",3,"click"],[1,"card","p-3"],[1,"d-flex","align-items-center","py-2","justify-content-end"],["aria-label","Registrar alumno","placement","left","ngbTooltip","Registrar alumno",1,"btn","btn-outline-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-plus-square-fill"],["d","M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm6.5 4.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0z"],[1,"col-12","p-2","table-responsive"],["datatable","",1,"table","table-striped","table-hover",3,"dtOptions","dtTrigger"],[1,"table-primary","text-white"],[4,"ngFor","ngForOf"],[1,"align-middle","cursor-pointer",3,"click"],[1,"text-center"],["placement","left","ngbTooltip","Editar alumno",1,"btn","btn-outline-warning","px-2","py-1","mx-3",3,"click"],["width","16","height","16",1,"bi"],[0,"xlink","href","#lapiz"],["placement","left","ngbTooltip","Eliminar alumno",1,"btn","btn-outline-danger","px-2","py-1","mx-3",3,"click"],[0,"xlink","href","#papelera"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Gesti\xf3n de alumnos"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return r.abrirAyuda()}),e._uU(5,"?"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",0),e.TgZ(8,"div",5),e.TgZ(9,"button",6),e.NdJ("click",function(){return r.registrarAlumno()}),e.O4$(),e.TgZ(10,"svg",7),e._UZ(11,"path",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(12,"div",0),e.TgZ(13,"div",9),e.TgZ(14,"table",10),e.TgZ(15,"thead",11),e.TgZ(16,"tr"),e.TgZ(17,"th"),e._uU(18,"C\xf3d. alumno"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Nombre completo"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Email"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"tbody"),e.YNc(26,yr,14,8,"tr",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(14),e.Q6J("dtOptions",r.dtOptions)("dtTrigger",r.dtTrigger),e.xp6(12),e.Q6J("ngForOf",r.listaAlumnos))},directives:[g._L,F,A.sg],styles:[""]}),o})()},{path:"crud-anexos",component:nt},{path:"crud-profesores",component:lr}];let Ur=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[U.Bz.forChild(Er)],U.Bz]}),o})(),wr=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[A.ez,l.u5,l.UX,Ur,g.IJ,M._t,Ye,Je]]}),o})()},4327:function(re,H){var U;void 0!==(U=function(){"use strict";function M(f,p,T){var Z=new XMLHttpRequest;Z.open("GET",f),Z.responseType="blob",Z.onload=function(){_(Z.response,p,T)},Z.onerror=function(){console.error("could not download file")},Z.send()}function S(f){var p=new XMLHttpRequest;p.open("HEAD",f,!1);try{p.send()}catch(T){}return 200<=p.status&&299>=p.status}function e(f){try{f.dispatchEvent(new MouseEvent("click"))}catch(T){var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(p)}}var g="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,B=g.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_=g.saveAs||("object"!=typeof window||window!==g?function(){}:"download"in HTMLAnchorElement.prototype&&!B?function(f,p,T){var Z=g.URL||g.webkitURL,w=document.createElement("a");w.download=p=p||f.name||"download",w.rel="noopener","string"==typeof f?(w.href=f,w.origin===location.origin?e(w):S(w.href)?M(f,p,T):e(w,w.target="_blank")):(w.href=Z.createObjectURL(f),setTimeout(function(){Z.revokeObjectURL(w.href)},4e4),setTimeout(function(){e(w)},0))}:"msSaveOrOpenBlob"in navigator?function(f,p,T){if(p=p||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(function x(f,p){return void 0===p?p={autoBom:!1}:"object"!=typeof p&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\ufeff",f],{type:f.type}):f}(f,T),p);else if(S(f))M(f,p,T);else{var Z=document.createElement("a");Z.href=f,Z.target="_blank",setTimeout(function(){e(Z)})}}:function(f,p,T,Z){if((Z=Z||open("","_blank"))&&(Z.document.title=Z.document.body.innerText="downloading..."),"string"==typeof f)return M(f,p,T);var w="application/octet-stream"===f.type,k=/constructor/i.test(g.HTMLElement)||g.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||w&&k||B)&&"undefined"!=typeof FileReader){var L=new FileReader;L.onloadend=function(){var P=L.result;P=l?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),Z?Z.location.href=P:location=P,Z=null},L.readAsDataURL(f)}else{var W=g.URL||g.webkitURL,R=W.createObjectURL(f);Z?Z.location=R:location.href=R,Z=null,setTimeout(function(){W.revokeObjectURL(R)},4e4)}});g.saveAs=_.saveAs=_,re.exports=_}.apply(H,[]))&&(re.exports=U)}}]);